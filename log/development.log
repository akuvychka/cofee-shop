  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" varchar NOT NULL PRIMARY KEY, "value" varchar, "created_at" datetime(6) NOT NULL, "updated_at" datetime(6) NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddProducts (20221021182148)
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddProducts (20221021182148)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal, "tax_rate" decimal)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20221021182148"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["key", "environment"], ["value", "development"], ["created_at", "2022-10-21 18:30:56.529800"], ["updated_at", "2022-10-21 18:30:56.529800"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddProducts (20221021182148)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE "products"[0m
  [1m[36mActiveRecord::SchemaMigration Delete All (0.1ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = ?[0m  [["version", "20221021182148"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddProducts (20221021182148)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal, "tax_rate" decimal, "storage_amount" integer)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20221021182148"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddProducts (20221021182148)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE "products"[0m
  [1m[36mActiveRecord::SchemaMigration Delete All (0.1ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = ?[0m  [["version", "20221021182148"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddProducts (20221021182148)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal, "tax_rate" decimal, "storage_amount" integer DEFAULT 0)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20221021182148"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddCombos (20221021210352)
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddCombos (20221021210352)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TABLE "combos" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20221021210352"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
Migrating to AddDiscounts (20221021210631)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "discounts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "discount_type" integer NOT NULL, "amount" decimal NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20221021210631"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
Migrating to AddProductCombos (20221021210701)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "product_combos" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "product_id" integer NOT NULL, "combo_id" integer NOT NULL, "discount_id" integer)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20221021210701"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mDiscount Create (2.3ms)[0m  [1m[32mINSERT INTO "discounts" ("discount_type", "amount") VALUES (?, ?)[0m  [["discount_type", 1], ["amount", 10.0]]
  [1m[36mTRANSACTION (1.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mDiscount Load (0.1ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" ORDER BY "discounts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mDiscount Load (0.3ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" ORDER BY "discounts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mProduct Create (0.5ms)[0m  [1m[32mINSERT INTO "products" ("name", "price", "tax_rate", "storage_amount") VALUES (?, ?, ?, ?)[0m  [["name", "Esspresso"], ["price", 5.0], ["tax_rate", 0.08], ["storage_amount", 5]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mProduct Create (0.9ms)[0m  [1m[32mINSERT INTO "products" ("name", "price", "tax_rate", "storage_amount") VALUES (?, ?, ?, ?)[0m  [["name", "Bagel"], ["price", 7.0], ["tax_rate", 0.03], ["storage_amount", 2]]
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mProduct Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Bagel"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Esspresso"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Bagel"], ["LIMIT", 1]]
  [1m[36mDiscount Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "discounts" WHERE "discounts"."discount_type" = ? AND "discounts"."amount" = ? LIMIT ?[0m  [["discount_type", 1], ["amount", 10.0], ["LIMIT", 1]]
  [1m[36mDiscount Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "discounts" WHERE "discounts"."discount_type" = ? AND "discounts"."amount" = ? LIMIT ?[0m  [["discount_type", 0], ["amount", 7.0], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mDiscount Create (0.2ms)[0m  [1m[32mINSERT INTO "discounts" ("discount_type", "amount") VALUES (?, ?)[0m  [["discount_type", 0], ["amount", 7.0]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mDiscount Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "discounts"[0m
  [1m[36mDiscount Load (0.0ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" ORDER BY "discounts"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (1.7ms)[0m  [1m[34mSELECT "products".* FROM "products"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mProduct Destroy (0.2ms)[0m  [1m[31mDELETE FROM "products" WHERE "products"."id" = ?[0m  [["id", 1]]
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mProduct Destroy (0.1ms)[0m  [1m[31mDELETE FROM "products" WHERE "products"."id" = ?[0m  [["id", 2]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mCombo Create (0.4ms)[0m  [1m[32mINSERT INTO "combos" ("name") VALUES (?)[0m  [["name", "Espresso + Bagel"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mCombo Destroy (0.3ms)[0m  [1m[31mDELETE FROM "combos" WHERE "combos"."id" = ?[0m  [["id", 1]]
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."name" = ?[0m  [["name", "Espresso"]]
  [1m[36mProduct Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Espresso"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mProduct Create (1.0ms)[0m  [1m[32mINSERT INTO "products" ("name", "price", "tax_rate", "storage_amount") VALUES (?, ?, ?, ?)[0m  [["name", "Espresso"], ["price", 5.0], ["tax_rate", 0.08], ["storage_amount", 5]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."name" = ?[0m  [["name", "Espresso"]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Espresso"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Mocka"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mProduct Create (0.2ms)[0m  [1m[32mINSERT INTO "products" ("name", "price", "tax_rate", "storage_amount") VALUES (?, ?, ?, ?)[0m  [["name", "Mocka"], ["price", 10.0], ["tax_rate", 0.08], ["storage_amount", 3]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Bagel"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "price", "tax_rate", "storage_amount") VALUES (?, ?, ?, ?)[0m  [["name", "Bagel"], ["price", 7.0], ["tax_rate", 0.03], ["storage_amount", 2]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mDiscount Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "discounts" WHERE "discounts"."discount_type" = ? AND "discounts"."amount" = ? LIMIT ?[0m  [["discount_type", 1], ["amount", 10.0], ["LIMIT", 1]]
  [1m[36mDiscount Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "discounts" WHERE "discounts"."discount_type" = ? AND "discounts"."amount" = ? LIMIT ?[0m  [["discount_type", 0], ["amount", 7.0], ["LIMIT", 1]]
  [1m[36mCombo Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "combos" WHERE "combos"."name" = ? LIMIT ?[0m  [["name", "Espresso + Bagel"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mCombo Create (2.1ms)[0m  [1m[32mINSERT INTO "combos" ("name") VALUES (?)[0m  [["name", "Espresso + Bagel"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."name" = ? ORDER BY "products"."id" ASC LIMIT ?[0m  [["name", "Espresso"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mProductCombo Create (0.1ms)[0m  [1m[32mINSERT INTO "product_combos" ("product_id", "combo_id", "discount_id") VALUES (?, ?, ?)[0m  [["product_id", 3], ["combo_id", 2], ["discount_id", nil]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."name" = ? ORDER BY "products"."id" ASC LIMIT ?[0m  [["name", "Bagel"], ["LIMIT", 1]]
  [1m[36mDiscount Load (0.0ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" WHERE "discounts"."discount_type" = ? AND "discounts"."amount" = ? ORDER BY "discounts"."id" ASC LIMIT ?[0m  [["discount_type", 1], ["amount", 10.0], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mProductCombo Create (0.1ms)[0m  [1m[32mINSERT INTO "product_combos" ("product_id", "combo_id", "discount_id") VALUES (?, ?, ?)[0m  [["product_id", 5], ["combo_id", 2], ["discount_id", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mCombo Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "combos" WHERE "combos"."name" = ? LIMIT ?[0m  [["name", "Mocka + Bagel"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mCombo Create (0.1ms)[0m  [1m[32mINSERT INTO "combos" ("name") VALUES (?)[0m  [["name", "Mocka + Bagel"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."name" = ? ORDER BY "products"."id" ASC LIMIT ?[0m  [["name", "Mocka"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mProductCombo Create (0.1ms)[0m  [1m[32mINSERT INTO "product_combos" ("product_id", "combo_id", "discount_id") VALUES (?, ?, ?)[0m  [["product_id", 4], ["combo_id", 3], ["discount_id", nil]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."name" = ? ORDER BY "products"."id" ASC LIMIT ?[0m  [["name", "Bagel"], ["LIMIT", 1]]
  [1m[36mDiscount Load (0.0ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" WHERE "discounts"."discount_type" = ? AND "discounts"."amount" = ? ORDER BY "discounts"."id" ASC LIMIT ?[0m  [["discount_type", 0], ["amount", 7.0], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mProductCombo Create (0.1ms)[0m  [1m[32mINSERT INTO "product_combos" ("product_id", "combo_id", "discount_id") VALUES (?, ?, ?)[0m  [["product_id", 5], ["combo_id", 3], ["discount_id", 2]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mProductCombo Load (0.7ms)[0m  [1m[34mSELECT "product_combos".* FROM "product_combos" WHERE "product_combos"."product_id" = ?[0m  [["product_id", 5]]
  [1m[36mCombo Load (0.5ms)[0m  [1m[34mSELECT "combos".* FROM "combos" INNER JOIN "product_combos" ON "combos"."id" = "product_combos"."combo_id" WHERE "product_combos"."product_id" = ?[0m  [["product_id", 5]]
  [1m[36mCombo Load (0.8ms)[0m  [1m[34mSELECT "combos".* FROM "combos" ORDER BY "combos"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mProduct Load (1.1ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_combos" ON "products"."id" = "product_combos"."product_id" WHERE "product_combos"."combo_id" = ?[0m  [["combo_id", 3]]
  [1m[36mProductCombo Load (0.3ms)[0m  [1m[34mSELECT "product_combos".* FROM "product_combos" ORDER BY "product_combos"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mDiscount Load (0.4ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" WHERE "discounts"."product_combo_id" = ? LIMIT ?[0m  [["product_combo_id", 4], ["LIMIT", 1]]
  [1m[36mDiscount Load (0.9ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" WHERE "discounts"."product_combo_id" = ? LIMIT ?[0m  [["product_combo_id", 4], ["LIMIT", 1]]
  [1m[36mDiscount Load (0.4ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" WHERE "discounts"."product_combo_id" = ? LIMIT ?[0m  [["product_combo_id", 4], ["LIMIT", 1]]
  [1m[36mProductCombo Load (0.6ms)[0m  [1m[34mSELECT "product_combos".* FROM "product_combos" WHERE "product_combos"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mDiscount Load (0.4ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" WHERE "discounts"."product_combo_id" = ? LIMIT ?[0m  [["product_combo_id", 4], ["LIMIT", 1]]
  [1m[36mProductCombo Load (1.0ms)[0m  [1m[34mSELECT "product_combos".* FROM "product_combos" WHERE "product_combos"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mDiscount Load (0.9ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" WHERE "discounts"."product_combo_id" = ? LIMIT ?[0m  [["product_combo_id", 4], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddProductCombos (20221021210701)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (1.0ms)[0m  [1m[35mDROP TABLE "product_combos"[0m
  [1m[36mActiveRecord::SchemaMigration Delete All (0.1ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = ?[0m  [["version", "20221021210701"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddDiscounts (20221021210631)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE "discounts"[0m
  [1m[36mActiveRecord::SchemaMigration Delete All (0.0ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = ?[0m  [["version", "20221021210631"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddCombos (20221021210352)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE "combos"[0m
  [1m[36mActiveRecord::SchemaMigration Delete All (0.1ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = ?[0m  [["version", "20221021210352"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddCombos (20221021210352)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE TABLE "combos" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20221021210352"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
Migrating to AddDiscounts (20221021210631)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "discounts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "discount_type" integer NOT NULL, "amount" decimal NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20221021210631"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
Migrating to AddProductCombos (20221021210701)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "product_combos" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "product_id" integer NOT NULL, "combo_id" integer NOT NULL, "discounts_id" integer, CONSTRAINT "fk_rails_bcd22fd219"
FOREIGN KEY ("discounts_id")
  REFERENCES "discounts" ("id")
)[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE INDEX "index_product_combos_on_discounts_id" ON "product_combos" ("discounts_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20221021210701"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Espresso"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Mocka"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Bagel"], ["LIMIT", 1]]
  [1m[36mDiscount Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "discounts" WHERE "discounts"."discount_type" = ? AND "discounts"."amount" = ? LIMIT ?[0m  [["discount_type", 1], ["amount", 10.0], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mDiscount Create (0.2ms)[0m  [1m[32mINSERT INTO "discounts" ("discount_type", "amount") VALUES (?, ?)[0m  [["discount_type", 1], ["amount", 10.0]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mDiscount Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "discounts" WHERE "discounts"."discount_type" = ? AND "discounts"."amount" = ? LIMIT ?[0m  [["discount_type", 0], ["amount", 7.0], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mDiscount Create (0.1ms)[0m  [1m[32mINSERT INTO "discounts" ("discount_type", "amount") VALUES (?, ?)[0m  [["discount_type", 0], ["amount", 7.0]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mCombo Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "combos" WHERE "combos"."name" = ? LIMIT ?[0m  [["name", "Espresso + Bagel"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mCombo Create (0.2ms)[0m  [1m[32mINSERT INTO "combos" ("name") VALUES (?)[0m  [["name", "Espresso + Bagel"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."name" = ? ORDER BY "products"."id" ASC LIMIT ?[0m  [["name", "Espresso"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCombo Load (0.0ms)[0m  [1m[34mSELECT "combos".* FROM "combos" WHERE "combos"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."name" = ? ORDER BY "products"."id" ASC LIMIT ?[0m  [["name", "Bagel"], ["LIMIT", 1]]
  [1m[36mDiscount Load (0.0ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" WHERE "discounts"."discount_type" = ? AND "discounts"."amount" = ? ORDER BY "discounts"."id" ASC LIMIT ?[0m  [["discount_type", 1], ["amount", 10.0], ["LIMIT", 1]]
  [1m[36mProductCombo Load (0.6ms)[0m  [1m[34mSELECT "product_combos".* FROM "product_combos" ORDER BY "product_combos"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Espresso"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Mocka"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Bagel"], ["LIMIT", 1]]
  [1m[36mDiscount Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "discounts" WHERE "discounts"."discount_type" = ? AND "discounts"."amount" = ? LIMIT ?[0m  [["discount_type", 1], ["amount", 10.0], ["LIMIT", 1]]
  [1m[36mDiscount Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "discounts" WHERE "discounts"."discount_type" = ? AND "discounts"."amount" = ? LIMIT ?[0m  [["discount_type", 0], ["amount", 7.0], ["LIMIT", 1]]
  [1m[36mCombo Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "combos" WHERE "combos"."name" = ? LIMIT ?[0m  [["name", "Espresso + Bagel"], ["LIMIT", 1]]
  [1m[36mCombo Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "combos" WHERE "combos"."name" = ? LIMIT ?[0m  [["name", "Mocka + Bagel"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mCombo Create (0.3ms)[0m  [1m[32mINSERT INTO "combos" ("name") VALUES (?)[0m  [["name", "Mocka + Bagel"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."name" = ? ORDER BY "products"."id" ASC LIMIT ?[0m  [["name", "Mocka"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCombo Load (0.0ms)[0m  [1m[34mSELECT "combos".* FROM "combos" WHERE "combos"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."name" = ? ORDER BY "products"."id" ASC LIMIT ?[0m  [["name", "Bagel"], ["LIMIT", 1]]
  [1m[36mDiscount Load (0.0ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" WHERE "discounts"."discount_type" = ? AND "discounts"."amount" = ? ORDER BY "discounts"."id" ASC LIMIT ?[0m  [["discount_type", 0], ["amount", 7.0], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mCombo Load (0.0ms)[0m  [1m[34mSELECT "combos".* FROM "combos" WHERE "combos"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mProductCombo Load (0.6ms)[0m  [1m[34mSELECT "product_combos".* FROM "product_combos" ORDER BY "product_combos"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mProduct Count (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
  [1m[36mProductCombo Load (0.2ms)[0m  [1m[34mSELECT "product_combos".* FROM "product_combos" ORDER BY "product_combos"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mCombo Create (0.4ms)[0m  [1m[32mINSERT INTO "combos" ("name") VALUES (?)[0m  [["name", "Mocka + Bagel"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."name" = ? ORDER BY "products"."id" ASC LIMIT ?[0m  [["name", "Mocka"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCombo Load (0.0ms)[0m  [1m[34mSELECT "combos".* FROM "combos" WHERE "combos"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mDiscount Load (0.7ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" WHERE "discounts"."discount_type" = ? AND "discounts"."amount" = ? ORDER BY "discounts"."id" ASC LIMIT ?[0m  [["discount_type", 0], ["amount", 7.0], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCombo Load (0.0ms)[0m  [1m[34mSELECT "combos".* FROM "combos" WHERE "combos"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddProductCombos (20221021210701)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE "product_combos"[0m
  [1m[36mActiveRecord::SchemaMigration Delete All (0.1ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = ?[0m  [["version", "20221021210701"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddProductCombos (20221021210701)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TABLE "product_combos" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "product_id" integer NOT NULL, "combo_id" integer NOT NULL, "discount_id" integer)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20221021210701"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Espresso"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Mocka"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Bagel"], ["LIMIT", 1]]
  [1m[36mDiscount Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "discounts" WHERE "discounts"."discount_type" = ? AND "discounts"."amount" = ? LIMIT ?[0m  [["discount_type", 1], ["amount", 10.0], ["LIMIT", 1]]
  [1m[36mDiscount Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "discounts" WHERE "discounts"."discount_type" = ? AND "discounts"."amount" = ? LIMIT ?[0m  [["discount_type", 0], ["amount", 7.0], ["LIMIT", 1]]
  [1m[36mCombo Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "combos" WHERE "combos"."name" = ? LIMIT ?[0m  [["name", "Espresso + Bagel"], ["LIMIT", 1]]
  [1m[36mCombo Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "combos" WHERE "combos"."name" = ? LIMIT ?[0m  [["name", "Mocka + Bagel"], ["LIMIT", 1]]
  [1m[36mProductCombo Load (0.3ms)[0m  [1m[34mSELECT "product_combos".* FROM "product_combos" ORDER BY "product_combos"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddProductCombos (20221021210701)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.9ms)[0m  [1m[35mDROP TABLE "product_combos"[0m
  [1m[36mActiveRecord::SchemaMigration Delete All (0.1ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = ?[0m  [["version", "20221021210701"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddDiscounts (20221021210631)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.9ms)[0m  [1m[35mDROP TABLE "discounts"[0m
  [1m[36mActiveRecord::SchemaMigration Delete All (0.1ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = ?[0m  [["version", "20221021210631"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddCombos (20221021210352)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE "combos"[0m
  [1m[36mActiveRecord::SchemaMigration Delete All (0.1ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = ?[0m  [["version", "20221021210352"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddCombos (20221021210352)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "combos" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20221021210352"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[36mcommit transaction[0m
Migrating to AddDiscounts (20221021210631)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "discounts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "discount_type" integer NOT NULL, "amount" decimal NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20221021210631"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
Migrating to AddProductCombos (20221021210701)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "product_combos" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "product_id" integer NOT NULL, "combo_id" integer NOT NULL, "discount_id" integer)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20221021210701"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Espresso"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Mocka"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Bagel"], ["LIMIT", 1]]
  [1m[36mDiscount Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "discounts" WHERE "discounts"."discount_type" = ? AND "discounts"."amount" = ? LIMIT ?[0m  [["discount_type", 1], ["amount", 10.0], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mDiscount Create (0.2ms)[0m  [1m[32mINSERT INTO "discounts" ("discount_type", "amount") VALUES (?, ?)[0m  [["discount_type", 1], ["amount", 10.0]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mDiscount Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "discounts" WHERE "discounts"."discount_type" = ? AND "discounts"."amount" = ? LIMIT ?[0m  [["discount_type", 0], ["amount", 7.0], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mDiscount Create (0.1ms)[0m  [1m[32mINSERT INTO "discounts" ("discount_type", "amount") VALUES (?, ?)[0m  [["discount_type", 0], ["amount", 7.0]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mCombo Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "combos" WHERE "combos"."name" = ? LIMIT ?[0m  [["name", "Espresso + Bagel"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mCombo Create (0.1ms)[0m  [1m[32mINSERT INTO "combos" ("name") VALUES (?)[0m  [["name", "Espresso + Bagel"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."name" = ? ORDER BY "products"."id" ASC LIMIT ?[0m  [["name", "Espresso"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCombo Load (0.0ms)[0m  [1m[34mSELECT "combos".* FROM "combos" WHERE "combos"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProductCombo Create (0.2ms)[0m  [1m[32mINSERT INTO "product_combos" ("product_id", "combo_id", "discount_id") VALUES (?, ?, ?)[0m  [["product_id", 3], ["combo_id", 1], ["discount_id", nil]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."name" = ? ORDER BY "products"."id" ASC LIMIT ?[0m  [["name", "Bagel"], ["LIMIT", 1]]
  [1m[36mDiscount Load (0.0ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" WHERE "discounts"."discount_type" = ? AND "discounts"."amount" = ? ORDER BY "discounts"."id" ASC LIMIT ?[0m  [["discount_type", 1], ["amount", 10.0], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mCombo Load (0.0ms)[0m  [1m[34mSELECT "combos".* FROM "combos" WHERE "combos"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProductCombo Create (0.1ms)[0m  [1m[32mINSERT INTO "product_combos" ("product_id", "combo_id", "discount_id") VALUES (?, ?, ?)[0m  [["product_id", 5], ["combo_id", 1], ["discount_id", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mCombo Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "combos" WHERE "combos"."name" = ? LIMIT ?[0m  [["name", "Mocka + Bagel"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mCombo Create (0.1ms)[0m  [1m[32mINSERT INTO "combos" ("name") VALUES (?)[0m  [["name", "Mocka + Bagel"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."name" = ? ORDER BY "products"."id" ASC LIMIT ?[0m  [["name", "Mocka"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mCombo Load (0.0ms)[0m  [1m[34mSELECT "combos".* FROM "combos" WHERE "combos"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProductCombo Create (0.1ms)[0m  [1m[32mINSERT INTO "product_combos" ("product_id", "combo_id", "discount_id") VALUES (?, ?, ?)[0m  [["product_id", 4], ["combo_id", 2], ["discount_id", nil]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."name" = ? ORDER BY "products"."id" ASC LIMIT ?[0m  [["name", "Bagel"], ["LIMIT", 1]]
  [1m[36mDiscount Load (0.0ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" WHERE "discounts"."discount_type" = ? AND "discounts"."amount" = ? ORDER BY "discounts"."id" ASC LIMIT ?[0m  [["discount_type", 0], ["amount", 7.0], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mCombo Load (0.0ms)[0m  [1m[34mSELECT "combos".* FROM "combos" WHERE "combos"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProductCombo Create (0.1ms)[0m  [1m[32mINSERT INTO "product_combos" ("product_id", "combo_id", "discount_id") VALUES (?, ?, ?)[0m  [["product_id", 5], ["combo_id", 2], ["discount_id", 2]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mProductCombo Load (0.1ms)[0m  [1m[34mSELECT "product_combos".* FROM "product_combos" ORDER BY "product_combos"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mProductCombo Load (0.2ms)[0m  [1m[34mSELECT "product_combos".* FROM "product_combos" ORDER BY "product_combos"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mDiscount Load (0.1ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" WHERE "discounts"."product_combo_id" = ? LIMIT ?[0m  [["product_combo_id", 4], ["LIMIT", 1]]
  [1m[36mProductCombo Load (0.1ms)[0m  [1m[34mSELECT "product_combos".* FROM "product_combos" ORDER BY "product_combos"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mDiscount Load (0.0ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" WHERE "discounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProductCombo Load (0.3ms)[0m  [1m[34mSELECT "product_combos".* FROM "product_combos" ORDER BY "product_combos"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mDiscount Load (0.0ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" WHERE "discounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProductCombo Load (0.2ms)[0m  [1m[34mSELECT "product_combos".* FROM "product_combos" ORDER BY "product_combos"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mDiscount Load (0.1ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" WHERE "discounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddCustomers (20221021230604)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "customers" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "first_name" varchar NOT NULL, "last_name" varchar, "contact_type" integer, "contact" varchar)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20221021230604"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
Migrating to AddOrders (20221021230759)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "orders" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "status" integer NOT NULL, "user_id" integer NOT NULL, "final_price" decimal DEFAULT 0.0)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20221021230759"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
Migrating to AddOrderProducts (20221021230954)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "order_products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "order_id" integer NOT NULL, "product_id" integer NOT NULL, "amount" integer NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20221021230954"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Espresso"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Mocka"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Bagel"], ["LIMIT", 1]]
  [1m[36mDiscount Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "discounts" WHERE "discounts"."discount_type" = ? AND "discounts"."amount" = ? LIMIT ?[0m  [["discount_type", 1], ["amount", 10.0], ["LIMIT", 1]]
  [1m[36mDiscount Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "discounts" WHERE "discounts"."discount_type" = ? AND "discounts"."amount" = ? LIMIT ?[0m  [["discount_type", 0], ["amount", 7.0], ["LIMIT", 1]]
  [1m[36mCombo Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "combos" WHERE "combos"."name" = ? LIMIT ?[0m  [["name", "Espresso + Bagel"], ["LIMIT", 1]]
  [1m[36mCombo Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "combos" WHERE "combos"."name" = ? LIMIT ?[0m  [["name", "Mocka + Bagel"], ["LIMIT", 1]]
  [1m[36mCustomer Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "customers"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mCustomer Create (0.2ms)[0m  [1m[32mINSERT INTO "customers" ("first_name", "last_name", "contact_type", "contact") VALUES (?, ?, ?, ?)[0m  [["first_name", "F Name"], ["last_name", nil], ["contact_type", 1], ["contact", "email@email.email"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Espresso"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Mocka"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Bagel"], ["LIMIT", 1]]
  [1m[36mDiscount Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "discounts" WHERE "discounts"."discount_type" = ? AND "discounts"."amount" = ? LIMIT ?[0m  [["discount_type", 1], ["amount", 10.0], ["LIMIT", 1]]
  [1m[36mDiscount Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "discounts" WHERE "discounts"."discount_type" = ? AND "discounts"."amount" = ? LIMIT ?[0m  [["discount_type", 0], ["amount", 7.0], ["LIMIT", 1]]
  [1m[36mCombo Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "combos" WHERE "combos"."name" = ? LIMIT ?[0m  [["name", "Espresso + Bagel"], ["LIMIT", 1]]
  [1m[36mCombo Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "combos" WHERE "combos"."name" = ? LIMIT ?[0m  [["name", "Mocka + Bagel"], ["LIMIT", 1]]
  [1m[36mCustomer Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "customers"[0m
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" ORDER BY "customers"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
Started GET "/products" for 127.0.0.1 at 2022-10-21 19:12:16 -0500
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
NoMethodError (undefined method `action_encoding_template' for ProductsController:Class):
  
actionpack (7.0.4) lib/action_dispatch/request/utils.rb:95:in `action_encoding_template'
actionpack (7.0.4) lib/action_dispatch/request/utils.rb:83:in `encode'
actionpack (7.0.4) lib/action_dispatch/request/utils.rb:45:in `set_binary_encoding'
actionpack (7.0.4) lib/action_dispatch/http/parameters.rb:68:in `path_parameters='
actionpack (7.0.4) lib/action_dispatch/journey/router.rb:48:in `block in serve'
actionpack (7.0.4) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (7.0.4) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (7.0.4) lib/action_dispatch/routing/route_set.rb:852:in `call'
jsonapi-rails (0.4.1) lib/jsonapi/rails/filter_media_type.rb:16:in `call'
rack (2.2.4) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.2.4) lib/rack/etag.rb:27:in `call'
rack (2.2.4) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.4) lib/rack/head.rb:12:in `call'
actionpack (7.0.4) lib/action_dispatch/http/permissions_policy.rb:38:in `call'
actionpack (7.0.4) lib/action_dispatch/http/content_security_policy.rb:36:in `call'
rack (2.2.4) lib/rack/session/abstract/id.rb:266:in `context'
rack (2.2.4) lib/rack/session/abstract/id.rb:260:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/cookies.rb:696:in `call'
activerecord (7.0.4) lib/active_record/migration.rb:603:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (7.0.4) lib/active_support/callbacks.rb:99:in `run_callbacks'
actionpack (7.0.4) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/actionable_exceptions.rb:17:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/debug_exceptions.rb:28:in `call'
web-console (4.2.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.0) lib/web_console/middleware.rb:17:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/show_exceptions.rb:26:in `call'
railties (7.0.4) lib/rails/rack/logger.rb:40:in `call_app'
railties (7.0.4) lib/rails/rack/logger.rb:25:in `block in call'
activesupport (7.0.4) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (7.0.4) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (7.0.4) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (7.0.4) lib/rails/rack/logger.rb:25:in `call'
sprockets-rails (3.4.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/remote_ip.rb:93:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.4) lib/rack/method_override.rb:24:in `call'
rack (2.2.4) lib/rack/runtime.rb:22:in `call'
activesupport (7.0.4) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/server_timing.rb:61:in `block in call'
actionpack (7.0.4) lib/action_dispatch/middleware/server_timing.rb:26:in `collect_events'
actionpack (7.0.4) lib/action_dispatch/middleware/server_timing.rb:60:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/static.rb:23:in `call'
rack (2.2.4) lib/rack/sendfile.rb:110:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/host_authorization.rb:137:in `call'
railties (7.0.4) lib/rails/engine.rb:530:in `call'
puma (5.6.5) lib/puma/configuration.rb:252:in `call'
puma (5.6.5) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.5) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.5) lib/puma/request.rb:76:in `handle_request'
puma (5.6.5) lib/puma/server.rb:443:in `process_client'
puma (5.6.5) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mProduct Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Espresso"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Mocka"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Bagel"], ["LIMIT", 1]]
  [1m[36mDiscount Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "discounts" WHERE "discounts"."discount_type" = ? AND "discounts"."amount" = ? LIMIT ?[0m  [["discount_type", 1], ["amount", 10.0], ["LIMIT", 1]]
  [1m[36mDiscount Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "discounts" WHERE "discounts"."discount_type" = ? AND "discounts"."amount" = ? LIMIT ?[0m  [["discount_type", 0], ["amount", 7.0], ["LIMIT", 1]]
  [1m[36mCombo Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "combos" WHERE "combos"."name" = ? LIMIT ?[0m  [["name", "Espresso + Bagel"], ["LIMIT", 1]]
  [1m[36mCombo Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "combos" WHERE "combos"."name" = ? LIMIT ?[0m  [["name", "Mocka + Bagel"], ["LIMIT", 1]]
  [1m[36mCustomer Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "customers"[0m
Started GET "/products" for 127.0.0.1 at 2022-10-21 19:13:36 -0500
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
NoMethodError (undefined method `action_encoding_template' for ProductsController:Class):
  
actionpack (7.0.4) lib/action_dispatch/request/utils.rb:95:in `action_encoding_template'
actionpack (7.0.4) lib/action_dispatch/request/utils.rb:83:in `encode'
actionpack (7.0.4) lib/action_dispatch/request/utils.rb:45:in `set_binary_encoding'
actionpack (7.0.4) lib/action_dispatch/http/parameters.rb:68:in `path_parameters='
actionpack (7.0.4) lib/action_dispatch/journey/router.rb:48:in `block in serve'
actionpack (7.0.4) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (7.0.4) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (7.0.4) lib/action_dispatch/routing/route_set.rb:852:in `call'
jsonapi-rails (0.4.1) lib/jsonapi/rails/filter_media_type.rb:16:in `call'
rack (2.2.4) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.2.4) lib/rack/etag.rb:27:in `call'
rack (2.2.4) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.4) lib/rack/head.rb:12:in `call'
actionpack (7.0.4) lib/action_dispatch/http/permissions_policy.rb:38:in `call'
actionpack (7.0.4) lib/action_dispatch/http/content_security_policy.rb:36:in `call'
rack (2.2.4) lib/rack/session/abstract/id.rb:266:in `context'
rack (2.2.4) lib/rack/session/abstract/id.rb:260:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/cookies.rb:696:in `call'
activerecord (7.0.4) lib/active_record/migration.rb:603:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (7.0.4) lib/active_support/callbacks.rb:99:in `run_callbacks'
actionpack (7.0.4) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/actionable_exceptions.rb:17:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/debug_exceptions.rb:28:in `call'
web-console (4.2.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.0) lib/web_console/middleware.rb:17:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/show_exceptions.rb:26:in `call'
railties (7.0.4) lib/rails/rack/logger.rb:40:in `call_app'
railties (7.0.4) lib/rails/rack/logger.rb:25:in `block in call'
activesupport (7.0.4) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (7.0.4) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (7.0.4) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (7.0.4) lib/rails/rack/logger.rb:25:in `call'
sprockets-rails (3.4.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/remote_ip.rb:93:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.4) lib/rack/method_override.rb:24:in `call'
rack (2.2.4) lib/rack/runtime.rb:22:in `call'
activesupport (7.0.4) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/server_timing.rb:61:in `block in call'
actionpack (7.0.4) lib/action_dispatch/middleware/server_timing.rb:26:in `collect_events'
actionpack (7.0.4) lib/action_dispatch/middleware/server_timing.rb:60:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/static.rb:23:in `call'
rack (2.2.4) lib/rack/sendfile.rb:110:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/host_authorization.rb:137:in `call'
railties (7.0.4) lib/rails/engine.rb:530:in `call'
puma (5.6.5) lib/puma/configuration.rb:252:in `call'
puma (5.6.5) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.5) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.5) lib/puma/request.rb:76:in `handle_request'
puma (5.6.5) lib/puma/server.rb:443:in `process_client'
puma (5.6.5) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/products" for 127.0.0.1 at 2022-10-21 19:19:45 -0500
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
NoMethodError (undefined method `action_encoding_template' for ProductsController:Class):
  
actionpack (7.0.4) lib/action_dispatch/request/utils.rb:95:in `action_encoding_template'
actionpack (7.0.4) lib/action_dispatch/request/utils.rb:83:in `encode'
actionpack (7.0.4) lib/action_dispatch/request/utils.rb:45:in `set_binary_encoding'
actionpack (7.0.4) lib/action_dispatch/http/parameters.rb:68:in `path_parameters='
actionpack (7.0.4) lib/action_dispatch/journey/router.rb:48:in `block in serve'
actionpack (7.0.4) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (7.0.4) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (7.0.4) lib/action_dispatch/routing/route_set.rb:852:in `call'
rack (2.2.4) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.2.4) lib/rack/etag.rb:27:in `call'
rack (2.2.4) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.4) lib/rack/head.rb:12:in `call'
actionpack (7.0.4) lib/action_dispatch/http/permissions_policy.rb:38:in `call'
actionpack (7.0.4) lib/action_dispatch/http/content_security_policy.rb:36:in `call'
rack (2.2.4) lib/rack/session/abstract/id.rb:266:in `context'
rack (2.2.4) lib/rack/session/abstract/id.rb:260:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/cookies.rb:696:in `call'
activerecord (7.0.4) lib/active_record/migration.rb:603:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (7.0.4) lib/active_support/callbacks.rb:99:in `run_callbacks'
actionpack (7.0.4) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/actionable_exceptions.rb:17:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/debug_exceptions.rb:28:in `call'
web-console (4.2.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.0) lib/web_console/middleware.rb:17:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/show_exceptions.rb:26:in `call'
railties (7.0.4) lib/rails/rack/logger.rb:40:in `call_app'
railties (7.0.4) lib/rails/rack/logger.rb:25:in `block in call'
activesupport (7.0.4) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (7.0.4) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (7.0.4) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (7.0.4) lib/rails/rack/logger.rb:25:in `call'
sprockets-rails (3.4.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/remote_ip.rb:93:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.4) lib/rack/method_override.rb:24:in `call'
rack (2.2.4) lib/rack/runtime.rb:22:in `call'
activesupport (7.0.4) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/server_timing.rb:61:in `block in call'
actionpack (7.0.4) lib/action_dispatch/middleware/server_timing.rb:26:in `collect_events'
actionpack (7.0.4) lib/action_dispatch/middleware/server_timing.rb:60:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/static.rb:23:in `call'
rack (2.2.4) lib/rack/sendfile.rb:110:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/host_authorization.rb:137:in `call'
railties (7.0.4) lib/rails/engine.rb:530:in `call'
puma (5.6.5) lib/puma/configuration.rb:252:in `call'
puma (5.6.5) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.5) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.5) lib/puma/request.rb:76:in `handle_request'
puma (5.6.5) lib/puma/server.rb:443:in `process_client'
puma (5.6.5) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/products" for 127.0.0.1 at 2022-10-21 19:20:09 -0500
  
TypeError (superclass must be an instance of Class (given an instance of Module)):
  
app/controllers/products_controller.rb:4:in `<main>'
Started GET "/products" for 127.0.0.1 at 2022-10-21 19:20:26 -0500
Processing by ProductsController#index as */*
Completed 200 OK in 24ms (Views: 0.6ms | Allocations: 3107)


Started GET "/products" for 127.0.0.1 at 2022-10-21 19:20:40 -0500
Processing by ProductsController#index as */*
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE (storage_amount > 0)[0m
  ↳ app/controllers/products_controller.rb:6:in `index'
Completed 200 OK in 16ms (Views: 10.2ms | ActiveRecord: 0.8ms | Allocations: 19438)


Started GET "/products" for 127.0.0.1 at 2022-10-21 19:22:09 -0500
Processing by ProductsController#index as */*
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE (storage_amount > 0)[0m
  ↳ app/controllers/products_controller.rb:6:in `index'
Completed 200 OK in 13ms (Views: 4.0ms | ActiveRecord: 0.9ms | Allocations: 5141)


Started GET "/products" for 127.0.0.1 at 2022-10-21 19:22:18 -0500
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ProductsController#index as */*
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE (storage_amount > 0)[0m
  ↳ app/controllers/products_controller.rb:6:in `index'
Completed 200 OK in 13ms (Views: 5.0ms | ActiveRecord: 0.6ms | Allocations: 21829)


Started GET "/products" for 127.0.0.1 at 2022-10-21 19:23:18 -0500
Processing by ProductsController#index as */*
Completed 500 Internal Server Error in 9ms (Allocations: 6193)


  
ActionView::MissingTemplate (Missing template products/index, application/index with {:locale=>[:en], :formats=>[:html, :text, :js, :css, :ics, :csv, :vcf, :vtt, :png, :jpeg, :gif, :bmp, :tiff, :svg, :mpeg, :mp3, :ogg, :m4a, :webm, :mp4, :otf, :ttf, :woff, :woff2, :xml, :rss, :atom, :yaml, :multipart_form, :url_encoded_form, :json, :pdf, :zip, :gzip, :turbo_stream], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby, :jbuilder]}.

Searched in:
  * "/Users/artemkuvychka/Documents/Work/assesment/cofee-shop/app/views"
  * "/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/actiontext-7.0.4/app/views"
  * "/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/actionmailbox-7.0.4/app/views"

Did you mean?  rails/conductor/action_mailbox/inbound_emails/index
               layouts/mailer
               layouts/rails/conductor
               layouts/application
               rails/conductor/action_mailbox/inbound_emails/new
               rails/conductor/action_mailbox/inbound_emails/sources/new):
  
app/controllers/products_controller.rb:6:in `index'
Started GET "/products" for 127.0.0.1 at 2022-10-21 19:23:26 -0500
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ProductsController#index as */*
Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.0ms | Allocations: 9680)


  
ActionView::MissingTemplate (Missing template products/index, application/index with {:locale=>[:en], :formats=>[:html, :text, :js, :css, :ics, :csv, :vcf, :vtt, :png, :jpeg, :gif, :bmp, :tiff, :svg, :mpeg, :mp3, :ogg, :m4a, :webm, :mp4, :otf, :ttf, :woff, :woff2, :xml, :rss, :atom, :yaml, :multipart_form, :url_encoded_form, :json, :pdf, :zip, :gzip, :turbo_stream], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby, :jbuilder]}.

Searched in:
  * "/Users/artemkuvychka/Documents/Work/assesment/cofee-shop/app/views"
  * "/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/actiontext-7.0.4/app/views"
  * "/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/actionmailbox-7.0.4/app/views"

Did you mean?  rails/conductor/action_mailbox/inbound_emails/index
               layouts/mailer
               layouts/rails/conductor
               layouts/application
               rails/conductor/action_mailbox/inbound_emails/new
               rails/conductor/action_mailbox/inbound_emails/sources/new):
  
app/controllers/products_controller.rb:6:in `index'
Started GET "/products" for 127.0.0.1 at 2022-10-21 19:26:46 -0500
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ProductsController#index as */*
Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.0ms | Allocations: 9679)


  
ActionView::MissingTemplate (Missing template products/index, application/index with {:locale=>[:en], :formats=>[:html, :text, :js, :css, :ics, :csv, :vcf, :vtt, :png, :jpeg, :gif, :bmp, :tiff, :svg, :mpeg, :mp3, :ogg, :m4a, :webm, :mp4, :otf, :ttf, :woff, :woff2, :xml, :rss, :atom, :yaml, :multipart_form, :url_encoded_form, :json, :pdf, :zip, :gzip, :turbo_stream], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby, :jbuilder]}.

Searched in:
  * "/Users/artemkuvychka/Documents/Work/assesment/cofee-shop/app/views"
  * "/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/actiontext-7.0.4/app/views"
  * "/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/actionmailbox-7.0.4/app/views"

Did you mean?  rails/conductor/action_mailbox/inbound_emails/index
               layouts/mailer
               layouts/rails/conductor
               layouts/application
               rails/conductor/action_mailbox/inbound_emails/new
               rails/conductor/action_mailbox/inbound_emails/sources/new):
  
app/controllers/products_controller.rb:6:in `index'
Started GET "/products" for 127.0.0.1 at 2022-10-21 19:27:24 -0500
Processing by ProductsController#index as */*
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE (storage_amount > 0)[0m
  ↳ app/controllers/products_controller.rb:6:in `index'
Completed 200 OK in 17ms (Views: 12.0ms | ActiveRecord: 1.3ms | Allocations: 18496)


Started GET "/products" for 127.0.0.1 at 2022-10-21 19:27:46 -0500
Processing by ProductsController#index as */*
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE (storage_amount > 0)[0m
  ↳ app/controllers/products_controller.rb:6:in `index'
Completed 200 OK in 18ms (Views: 0.5ms | ActiveRecord: 0.9ms | Allocations: 5474)


Started GET "/products" for 127.0.0.1 at 2022-10-21 19:29:19 -0500
Processing by ProductsController#index as */*
Completed 500 Internal Server Error in 9ms (Allocations: 3567)


  
NoMethodError (undefined method `[]' for nil:NilClass):
  
app/controllers/products_controller.rb:6:in `new'
app/controllers/products_controller.rb:6:in `index'
Started GET "/products" for 127.0.0.1 at 2022-10-21 19:29:40 -0500
Processing by ProductsController#index as */*
Completed 500 Internal Server Error in 5ms (Allocations: 3551)


  
NoMethodError (undefined method `[]' for nil:NilClass):
  
app/controllers/products_controller.rb:6:in `new'
app/controllers/products_controller.rb:6:in `index'
Started GET "/products" for 127.0.0.1 at 2022-10-21 19:29:51 -0500
Processing by ProductsController#index as */*
Completed 500 Internal Server Error in 5ms (Allocations: 3538)


  
NoMethodError (undefined method `[]' for nil:NilClass):
  
app/controllers/products_controller.rb:6:in `new'
app/controllers/products_controller.rb:6:in `index'
Started GET "/products" for 127.0.0.1 at 2022-10-21 19:30:06 -0500
Processing by ProductsController#index as */*
Completed 500 Internal Server Error in 9ms (Allocations: 3551)


  
NoMethodError (undefined method `[]' for nil:NilClass):
  
app/controllers/products_controller.rb:6:in `new'
app/controllers/products_controller.rb:6:in `index'
Started GET "/products" for 127.0.0.1 at 2022-10-21 19:31:16 -0500
Processing by ProductsController#index as */*
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE (storage_amount > 0)[0m
  ↳ app/controllers/products_controller.rb:11:in `index'
  [1m[36mCombo Pluck (0.4ms)[0m  [1m[34mSELECT "combos"."id" FROM "combos" INNER JOIN "product_combos" ON "combos"."id" = "product_combos"."combo_id" WHERE "product_combos"."product_id" = ?[0m  [["product_id", 3]]
  ↳ app/controllers/products_controller.rb:11:in `index'
  [1m[36mCombo Load (0.2ms)[0m  [1m[34mSELECT "combos".* FROM "combos" INNER JOIN "product_combos" ON "combos"."id" = "product_combos"."combo_id" WHERE "product_combos"."product_id" = ?[0m  [["product_id", 3]]
  ↳ app/controllers/products_controller.rb:11:in `index'
  [1m[36mCombo Pluck (0.1ms)[0m  [1m[34mSELECT "combos"."id" FROM "combos" INNER JOIN "product_combos" ON "combos"."id" = "product_combos"."combo_id" WHERE "product_combos"."product_id" = ?[0m  [["product_id", 4]]
  ↳ app/controllers/products_controller.rb:11:in `index'
  [1m[36mCombo Load (0.0ms)[0m  [1m[34mSELECT "combos".* FROM "combos" INNER JOIN "product_combos" ON "combos"."id" = "product_combos"."combo_id" WHERE "product_combos"."product_id" = ?[0m  [["product_id", 4]]
  ↳ app/controllers/products_controller.rb:11:in `index'
  [1m[36mCombo Pluck (0.0ms)[0m  [1m[34mSELECT "combos"."id" FROM "combos" INNER JOIN "product_combos" ON "combos"."id" = "product_combos"."combo_id" WHERE "product_combos"."product_id" = ?[0m  [["product_id", 5]]
  ↳ app/controllers/products_controller.rb:11:in `index'
  [1m[36mCombo Load (0.0ms)[0m  [1m[34mSELECT "combos".* FROM "combos" INNER JOIN "product_combos" ON "combos"."id" = "product_combos"."combo_id" WHERE "product_combos"."product_id" = ?[0m  [["product_id", 5]]
  ↳ app/controllers/products_controller.rb:11:in `index'
Completed 200 OK in 73ms (Views: 0.7ms | ActiveRecord: 2.3ms | Allocations: 26799)


Started GET "/products" for 127.0.0.1 at 2022-10-21 19:32:02 -0500
Processing by ProductsController#index as */*
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE (storage_amount > 0)[0m
  ↳ app/controllers/products_controller.rb:7:in `index'
Completed 500 Internal Server Error in 27ms (ActiveRecord: 1.6ms | Allocations: 5343)


  
TypeError (no implicit conversion of Symbol into String):
  
app/controllers/products_controller.rb:7:in `index'
Started GET "/products" for 127.0.0.1 at 2022-10-21 19:32:15 -0500
Processing by ProductsController#index as */*
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE (storage_amount > 0)[0m
  ↳ app/controllers/products_controller.rb:11:in `index'
  [1m[36mProductCombo Load (0.5ms)[0m  [1m[34mSELECT "product_combos".* FROM "product_combos" WHERE "product_combos"."product_id" IN (?, ?, ?)[0m  [["product_id", 3], ["product_id", 4], ["product_id", 5]]
  ↳ app/controllers/products_controller.rb:11:in `index'
  [1m[36mCombo Load (0.8ms)[0m  [1m[34mSELECT "combos".* FROM "combos" WHERE "combos"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  ↳ app/controllers/products_controller.rb:11:in `index'
Completed 200 OK in 61ms (Views: 1.8ms | ActiveRecord: 3.1ms | Allocations: 34261)


Started GET "/products" for 127.0.0.1 at 2022-10-21 21:29:06 -0500
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ProductsController#index as */*
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE (storage_amount > 0 AND name like '')[0m
  ↳ app/controllers/products_controller.rb:11:in `index'
Completed 200 OK in 11ms (Views: 0.2ms | ActiveRecord: 0.4ms | Allocations: 8346)


Started GET "/products" for 127.0.0.1 at 2022-10-21 21:30:49 -0500
Processing by ProductsController#index as */*
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE (storage_amount > 0 AND name like ?)[0m
  ↳ app/controllers/products_controller.rb:11:in `index'
Completed 200 OK in 31ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 3855)


  [1m[36mProduct Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "products"[0m
Started GET "/products" for 127.0.0.1 at 2022-10-21 21:31:57 -0500
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ProductsController#index as */*
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE (storage_amount > 0)[0m
  ↳ app/controllers/products_controller.rb:11:in `index'
  [1m[36mProductCombo Load (0.3ms)[0m  [1m[34mSELECT "product_combos".* FROM "product_combos" WHERE "product_combos"."product_id" IN (?, ?, ?)[0m  [["product_id", 3], ["product_id", 4], ["product_id", 5]]
  ↳ app/controllers/products_controller.rb:11:in `index'
  [1m[36mCombo Load (0.0ms)[0m  [1m[34mSELECT "combos".* FROM "combos" WHERE "combos"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  ↳ app/controllers/products_controller.rb:11:in `index'
Completed 200 OK in 28ms (Views: 0.5ms | ActiveRecord: 1.2ms | Allocations: 54428)


Started GET "/products?search=e" for 127.0.0.1 at 2022-10-21 21:32:10 -0500
Processing by ProductsController#index as */*
  Parameters: {"search"=>"e"}
  [1m[36mProduct Load (0.9ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE (storage_amount > 0 AND name like e)[0m
  ↳ app/controllers/products_controller.rb:11:in `index'
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.9ms | Allocations: 1534)


  
ActiveRecord::StatementInvalid (SQLite3::SQLException: no such column: e):
  
app/controllers/products_controller.rb:11:in `index'
Started GET "/products?search=e" for 127.0.0.1 at 2022-10-21 21:32:28 -0500
Processing by ProductsController#index as */*
  Parameters: {"search"=>"e"}
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE (storage_amount > 0 AND name like 'e')[0m
  ↳ app/controllers/products_controller.rb:11:in `index'
Completed 200 OK in 17ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 3877)


Started GET "/products?search=ba" for 127.0.0.1 at 2022-10-21 21:32:40 -0500
Processing by ProductsController#index as */*
  Parameters: {"search"=>"ba"}
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE (storage_amount > 0 AND name like 'ba')[0m
  ↳ app/controllers/products_controller.rb:11:in `index'
Completed 200 OK in 24ms (Views: 0.8ms | ActiveRecord: 0.4ms | Allocations: 770)


Started GET "/products?search=Ba" for 127.0.0.1 at 2022-10-21 21:32:44 -0500
Processing by ProductsController#index as */*
  Parameters: {"search"=>"Ba"}
  [1m[36mProduct Load (0.7ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE (storage_amount > 0 AND name like 'Ba')[0m
  ↳ app/controllers/products_controller.rb:11:in `index'
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 0.7ms | Allocations: 770)


Started GET "/products?search=B" for 127.0.0.1 at 2022-10-21 21:32:51 -0500
Processing by ProductsController#index as */*
  Parameters: {"search"=>"B"}
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE (storage_amount > 0 AND name like 'B')[0m
  ↳ app/controllers/products_controller.rb:11:in `index'
Completed 200 OK in 5ms (Views: 0.4ms | ActiveRecord: 0.6ms | Allocations: 759)


Started GET "/products?search=B" for 127.0.0.1 at 2022-10-21 21:33:11 -0500
Processing by ProductsController#index as */*
  Parameters: {"search"=>"B"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE (storage_amount > 0 AND name like '%B%')[0m
  ↳ app/controllers/products_controller.rb:11:in `index'
  [1m[36mProductCombo Load (1.0ms)[0m  [1m[34mSELECT "product_combos".* FROM "product_combos" WHERE "product_combos"."product_id" = ?[0m  [["product_id", 5]]
  ↳ app/controllers/products_controller.rb:11:in `index'
  [1m[36mCombo Load (0.1ms)[0m  [1m[34mSELECT "combos".* FROM "combos" WHERE "combos"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  ↳ app/controllers/products_controller.rb:11:in `index'
Completed 200 OK in 26ms (Views: 0.4ms | ActiveRecord: 2.3ms | Allocations: 18137)


Started GET "/products?search=e" for 127.0.0.1 at 2022-10-21 21:33:20 -0500
Processing by ProductsController#index as */*
  Parameters: {"search"=>"e"}
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE (storage_amount > 0 AND name like '%e%')[0m
  ↳ app/controllers/products_controller.rb:11:in `index'
  [1m[36mProductCombo Load (0.1ms)[0m  [1m[34mSELECT "product_combos".* FROM "product_combos" WHERE "product_combos"."product_id" IN (?, ?)[0m  [["product_id", 3], ["product_id", 5]]
  ↳ app/controllers/products_controller.rb:11:in `index'
  [1m[36mCombo Load (0.1ms)[0m  [1m[34mSELECT "combos".* FROM "combos" WHERE "combos"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  ↳ app/controllers/products_controller.rb:11:in `index'
Completed 200 OK in 6ms (Views: 0.3ms | ActiveRecord: 0.5ms | Allocations: 3237)


  [1m[36mCombo Load (0.8ms)[0m  [1m[34mSELECT "combos".* FROM "combos" ORDER BY "combos"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mCombo Load (0.6ms)[0m  [1m[34mSELECT "combos".* FROM "combos" INNER JOIN "product_combos" ON "product_combos"."combo_id" = "combos"."id"[0m
  [1m[36mCombo Load (0.5ms)[0m  [1m[34mSELECT "combos".* FROM "combos" INNER JOIN "product_combos" ON "product_combos"."combo_id" = "combos"."id" INNER JOIN "product_combos" "product_combos_combos_join" ON "product_combos_combos_join"."combo_id" = "combos"."id" INNER JOIN "products" ON "products"."id" = "product_combos_combos_join"."product_id"[0m
  [1m[36mCombo Load (0.8ms)[0m  [1m[34mSELECT "combos".* FROM "combos" INNER JOIN "product_combos" ON "product_combos"."combo_id" = "combos"."id" INNER JOIN "product_combos" "product_combos_combos_join" ON "product_combos_combos_join"."combo_id" = "combos"."id" INNER JOIN "products" ON "products"."id" = "product_combos_combos_join"."product_id" WHERE (products.storage_amount > 0)[0m
  [1m[36mCombo Load (1.2ms)[0m  [1m[34mSELECT "combos".* FROM "combos" INNER JOIN "product_combos" ON "product_combos"."combo_id" = "combos"."id" WHERE (products.storage_amount > 0)[0m
  [1m[36mCombo Load (0.3ms)[0m  [1m[34mSELECT "combos".* FROM "combos" INNER JOIN "product_combos" ON "product_combos"."combo_id" = "combos"."id" INNER JOIN "product_combos" "product_combos_combos_join" ON "product_combos_combos_join"."combo_id" = "combos"."id" INNER JOIN "products" ON "products"."id" = "product_combos_combos_join"."product_id" WHERE (products.storage_amount > 0)[0m
  [1m[36mCombo Load (1.4ms)[0m  [1m[34mSELECT "combos".* FROM "combos" INNER JOIN "product_combos" ON "product_combos"."combo_id" = "combos"."id" INNER JOIN "product_combos" "product_combos_combos_join" ON "product_combos_combos_join"."combo_id" = "combos"."id" INNER JOIN "products" ON "products"."id" = "product_combos_combos_join"."product_id" WHERE (products.storage_amount > 0)[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Mocka"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mProduct Update (7.7ms)[0m  [1m[33mUPDATE "products" SET "storage_amount" = ? WHERE "products"."id" = ?[0m  [["storage_amount", 0], ["id", 4]]
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mCombo Load (0.4ms)[0m  [1m[34mSELECT "combos".* FROM "combos" INNER JOIN "product_combos" ON "product_combos"."combo_id" = "combos"."id" INNER JOIN "product_combos" "product_combos_combos_join" ON "product_combos_combos_join"."combo_id" = "combos"."id" INNER JOIN "products" ON "products"."id" = "product_combos_combos_join"."product_id" WHERE (products.storage_amount > 0)[0m
Started GET "/products?search=e" for 127.0.0.1 at 2022-10-21 21:46:18 -0500
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by ProductsController#index as */*
  Parameters: {"search"=>"e"}
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE (storage_amount > 0 AND name like '%e%')[0m
  ↳ app/controllers/products_controller.rb:11:in `index'
  [1m[36mProductCombo Load (0.0ms)[0m  [1m[34mSELECT "product_combos".* FROM "product_combos" WHERE "product_combos"."product_id" IN (?, ?)[0m  [["product_id", 3], ["product_id", 5]]
  ↳ app/controllers/products_controller.rb:11:in `index'
  [1m[36mCombo Load (0.1ms)[0m  [1m[34mSELECT "combos".* FROM "combos" WHERE "combos"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  ↳ app/controllers/products_controller.rb:11:in `index'
  [1m[36mProduct Pluck (0.1ms)[0m  [1m[34mSELECT "products"."id" FROM "products" INNER JOIN "product_combos" ON "products"."id" = "product_combos"."product_id" WHERE "product_combos"."combo_id" = ?[0m  [["combo_id", 1]]
  ↳ app/controllers/products_controller.rb:11:in `index'
  [1m[36mProduct Pluck (0.0ms)[0m  [1m[34mSELECT "products"."id" FROM "products" INNER JOIN "product_combos" ON "products"."id" = "product_combos"."product_id" WHERE "product_combos"."combo_id" = ?[0m  [["combo_id", 2]]
  ↳ app/controllers/products_controller.rb:11:in `index'
Completed 200 OK in 32ms (Views: 0.3ms | ActiveRecord: 0.7ms | Allocations: 59904)


Started GET "/products" for 127.0.0.1 at 2022-10-21 21:46:23 -0500
Processing by ProductsController#index as */*
  [1m[36mProduct Load (6.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE (storage_amount > 0)[0m
  ↳ app/controllers/products_controller.rb:11:in `index'
  [1m[36mProductCombo Load (0.2ms)[0m  [1m[34mSELECT "product_combos".* FROM "product_combos" WHERE "product_combos"."product_id" IN (?, ?)[0m  [["product_id", 3], ["product_id", 5]]
  ↳ app/controllers/products_controller.rb:11:in `index'
  [1m[36mCombo Load (3.2ms)[0m  [1m[34mSELECT "combos".* FROM "combos" WHERE "combos"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  ↳ app/controllers/products_controller.rb:11:in `index'
  [1m[36mProduct Pluck (0.3ms)[0m  [1m[34mSELECT "products"."id" FROM "products" INNER JOIN "product_combos" ON "products"."id" = "product_combos"."product_id" WHERE "product_combos"."combo_id" = ?[0m  [["combo_id", 1]]
  ↳ app/controllers/products_controller.rb:11:in `index'
  [1m[36mProduct Pluck (0.1ms)[0m  [1m[34mSELECT "products"."id" FROM "products" INNER JOIN "product_combos" ON "products"."id" = "product_combos"."product_id" WHERE "product_combos"."combo_id" = ?[0m  [["combo_id", 2]]
  ↳ app/controllers/products_controller.rb:11:in `index'
Completed 200 OK in 57ms (Views: 0.7ms | ActiveRecord: 10.1ms | Allocations: 5054)


  [1m[36mCombo Load (0.4ms)[0m  [1m[34mSELECT "combos".* FROM "combos" INNER JOIN "product_combos" ON "product_combos"."combo_id" = "combos"."id" INNER JOIN "products" ON "products"."id" = "product_combos"."product_id" WHERE (products.storage_amount > 0)[0m
  [1m[36mCombo Load (0.3ms)[0m  [1m[34mSELECT "combos".* FROM "combos" INNER JOIN "product_combos" ON "product_combos"."combo_id" = "combos"."id" INNER JOIN "products" ON "products"."id" = "product_combos"."product_id" WHERE (products.storage_amount > 0)[0m
  [1m[36mCombo Load (0.3ms)[0m  [1m[34mSELECT "combos".* FROM "combos" /* loading for inspect */ LIMIT ?[0m  [["LIMIT", 11]]
  [1m[36mCombo Load (0.0ms)[0m  [1m[34mSELECT "combos".* FROM "combos" /* loading for inspect */ LIMIT ?[0m  [["LIMIT", 11]]
  [1m[36mCombo Load (0.0ms)[0m  [1m[34mSELECT "combos".* FROM "combos" /* loading for inspect */ LIMIT ?[0m  [["LIMIT", 11]]
  [1m[36mCombo Load (0.5ms)[0m  [1m[34mSELECT "combos".* FROM "combos" /* loading for inspect */ LIMIT ?[0m  [["LIMIT", 11]]
  [1m[36mCombo Load (0.1ms)[0m  [1m[34mSELECT "combos".* FROM "combos" /* loading for inspect */ LIMIT ?[0m  [["LIMIT", 11]]
  [1m[36mCombo Load (0.1ms)[0m  [1m[34mSELECT "combos".* FROM "combos" /* loading for inspect */ LIMIT ?[0m  [["LIMIT", 11]]
  [1m[36mCombo Load (0.6ms)[0m  [1m[34mSELECT "combos".* FROM "combos" /* loading for inspect */ LIMIT ?[0m  [["LIMIT", 11]]
  [1m[36mCombo Load (0.1ms)[0m  [1m[34mSELECT "combos".* FROM "combos" /* loading for inspect */ LIMIT ?[0m  [["LIMIT", 11]]
  [1m[36mCombo Load (0.1ms)[0m  [1m[34mSELECT "combos".* FROM "combos" /* loading for inspect */ LIMIT ?[0m  [["LIMIT", 11]]
  [1m[36mCombo Load (0.5ms)[0m  [1m[34mSELECT "combos".* FROM "combos"[0m
  [1m[36mProductCombo Load (0.3ms)[0m  [1m[34mSELECT "product_combos".* FROM "product_combos" WHERE "product_combos"."combo_id" IN (?, ?)[0m  [["combo_id", 1], ["combo_id", 2]]
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" IN (?, ?, ?)[0m  [["id", 3], ["id", 5], ["id", 4]]
  [1m[36mCombo Load (1.2ms)[0m  [1m[34mSELECT "combos".* FROM "combos" WHERE (storage_amount > 0) AND (sum(product.id) = sum(product_combo.id))[0m
  [1m[36mCombo Load (0.7ms)[0m  [1m[34mSELECT "combos".* FROM "combos" INNER JOIN "product_combos" ON "product_combos"."combo_id" = "combos"."id" INNER JOIN "products" ON "products"."id" = "product_combos"."product_id" WHERE (storage_amount > 0) AND (sum(product.id) = sum(product_combo.id))[0m
  [1m[36mCombo Load (0.3ms)[0m  [1m[34mSELECT "combos".* FROM "combos" INNER JOIN "product_combos" ON "product_combos"."combo_id" = "combos"."id" INNER JOIN "products" ON "products"."id" = "product_combos"."product_id" WHERE (storage_amount > 0)[0m
  [1m[36mCombo Load (1.1ms)[0m  [1m[34mSELECT "combos".* FROM "combos" WHERE (storage_amount > 0)[0m
  [1m[36mCombo Load (0.4ms)[0m  [1m[34mSELECT "combos".* FROM "combos" INNER JOIN "product_combos" ON "product_combos"."combo_id" = "combos"."id" INNER JOIN "products" ON "products"."id" = "product_combos"."product_id" WHERE (storage_amount > 0)[0m
  [1m[36mCombo Load (0.5ms)[0m  [1m[34mSELECT "combos".* FROM "combos" INNER JOIN "product_combos" ON "product_combos"."combo_id" = "combos"."id" INNER JOIN "products" ON "products"."id" = "product_combos"."product_id" WHERE (storage_amount > 0) AND (Count(product.id) > 1)[0m
  [1m[36mCombo Load (0.6ms)[0m  [1m[34mSELECT "combos".* FROM "combos" INNER JOIN "product_combos" ON "product_combos"."combo_id" = "combos"."id" INNER JOIN "products" ON "products"."id" = "product_combos"."product_id" WHERE (product.storage_amount > 0) AND (Count(product.id) > 1)[0m
  [1m[36mCombo Load (0.4ms)[0m  [1m[34mSELECT "combos".* FROM "combos" INNER JOIN "product_combos" ON "product_combos"."combo_id" = "combos"."id" INNER JOIN "products" ON "products"."id" = "product_combos"."product_id" WHERE (product.storage_amount > 0)[0m
  [1m[36mCombo Load (1.1ms)[0m  [1m[34mSELECT "combos".* FROM "combos" INNER JOIN "product_combos" ON "product_combos"."combo_id" = "combos"."id" INNER JOIN "products" ON "products"."id" = "product_combos"."product_id" WHERE (storage_amount > 0)[0m
  [1m[36mCombo Load (4.7ms)[0m  [1m[34mSELECT "combos".* FROM "combos" INNER JOIN "product_combos" ON "product_combos"."combo_id" = "combos"."id" INNER JOIN "products" ON "products"."id" = "product_combos"."product_id" WHERE (storage_amount > 0) AND (count(product_id) > 1)[0m
  [1m[36mCombo Load (0.2ms)[0m  [1m[34mSELECT "combos".* FROM "combos" INNER JOIN "product_combos" ON "product_combos"."combo_id" = "combos"."id" INNER JOIN "products" ON "products"."id" = "product_combos"."product_id" WHERE (storage_amount > 0) AND (count(product_id) > 1) /* loading for inspect */ LIMIT ?[0m  [["LIMIT", 11]]
  [1m[36mCombo Load (0.1ms)[0m  [1m[34mSELECT "combos".* FROM "combos" INNER JOIN "product_combos" ON "product_combos"."combo_id" = "combos"."id" INNER JOIN "products" ON "products"."id" = "product_combos"."product_id" WHERE (storage_amount > 0) AND (count(product_id) > 1) /* loading for inspect */ LIMIT ?[0m  [["LIMIT", 11]]
  [1m[36mCombo Load (0.2ms)[0m  [1m[34mSELECT "combos".* FROM "combos" INNER JOIN "product_combos" ON "product_combos"."combo_id" = "combos"."id" INNER JOIN "products" ON "products"."id" = "product_combos"."product_id" WHERE (storage_amount > 0) AND (count(product_id) > 1) /* loading for inspect */ LIMIT ?[0m  [["LIMIT", 11]]
  [1m[36mCombo Load (0.1ms)[0m  [1m[34mSELECT "combos".* FROM "combos" INNER JOIN "product_combos" ON "product_combos"."combo_id" = "combos"."id" INNER JOIN "products" ON "products"."id" = "product_combos"."product_id" WHERE (storage_amount > 0) AND (count(product_id) > 1) /* loading for inspect */ LIMIT ?[0m  [["LIMIT", 11]]
  [1m[36mCombo Load (1.0ms)[0m  [1m[34mSELECT "combos".* FROM "combos" INNER JOIN "product_combos" ON "product_combos"."combo_id" = "combos"."id" INNER JOIN "products" ON "products"."id" = "product_combos"."product_id" WHERE (storage_amount > 0) AND (count(product_id) > 1)[0m
  [1m[36mCombo Load (0.6ms)[0m  [1m[34mSELECT "combos".* FROM "combos" INNER JOIN "product_combos" ON "product_combos"."combo_id" = "combos"."id" INNER JOIN "products" ON "products"."id" = "product_combos"."product_id" WHERE (count(product_id) > 1)[0m
  [1m[36mCombo Load (0.4ms)[0m  [1m[34mSELECT "combos".* FROM "combos" INNER JOIN "product_combos" ON "product_combos"."combo_id" = "combos"."id" INNER JOIN "products" ON "products"."id" = "product_combos"."product_id" WHERE (sum(product_id) > 1)[0m
  [1m[36mCombo Load (0.8ms)[0m  [1m[34mSELECT "combos".* FROM "combos" INNER JOIN "product_combos" ON "product_combos"."combo_id" = "combos"."id" INNER JOIN "products" ON "products"."id" = "product_combos"."product_id" WHERE (sum(id) > 1)[0m
  [1m[36mCombo Load (1.3ms)[0m  [1m[34mSELECT "combos".* FROM "combos" INNER JOIN "product_combos" ON "product_combos"."combo_id" = "combos"."id" INNER JOIN "products" ON "products"."id" = "product_combos"."product_id" WHERE (count(id) > 1)[0m
  [1m[36mCombo Load (0.2ms)[0m  [1m[34mSELECT "combos".* FROM "combos" INNER JOIN "product_combos" ON "product_combos"."combo_id" = "combos"."id" INNER JOIN "products" ON "products"."id" = "product_combos"."product_id"[0m
  [1m[36mCombo Load (1.3ms)[0m  [1m[34mSELECT "combos".* FROM "combos" INNER JOIN "product_combos" ON "product_combos"."combo_id" = "combos"."id" INNER JOIN "products" ON "products"."id" = "product_combos"."product_id" GROUP BY "combos"."id"[0m
  [1m[36mCombo Load (0.9ms)[0m  [1m[34mSELECT "combos".* FROM "combos" INNER JOIN "product_combos" ON "product_combos"."combo_id" = "combos"."id" INNER JOIN "products" ON "products"."id" = "product_combos"."product_id" WHERE (storage_amount > 0) GROUP BY "combos"."id"[0m
  [1m[36mCombo Load (0.9ms)[0m  [1m[34mSELECT "combos".* FROM "combos" INNER JOIN "product_combos" ON "product_combos"."combo_id" = "combos"."id" INNER JOIN "products" ON "products"."id" = "product_combos"."product_id" WHERE (storage_amount > 0) AND (count(combo_id) > 0) GROUP BY "combos"."id"[0m
  [1m[36mCombo Load (1.2ms)[0m  [1m[34mSELECT "combos".* FROM "combos" INNER JOIN "product_combos" ON "product_combos"."combo_id" = "combos"."id" INNER JOIN "products" ON "products"."id" = "product_combos"."product_id" WHERE (storage_amount > 0) AND (sum(combo_id) > 0) GROUP BY "combos"."id"[0m
  [1m[36mCombo Load (2.6ms)[0m  [1m[34mSELECT "combos".* FROM "combos" INNER JOIN "product_combos" ON "product_combos"."combo_id" = "combos"."id" INNER JOIN "products" ON "products"."id" = "product_combos"."product_id" WHERE (storage_amount > 0) GROUP BY "combos"."id" HAVING (sum(combo_id) > 0)[0m
  [1m[36mCombo Load (1.0ms)[0m  [1m[34mSELECT "combos".* FROM "combos" INNER JOIN "product_combos" ON "product_combos"."combo_id" = "combos"."id" INNER JOIN "products" ON "products"."id" = "product_combos"."product_id" WHERE (storage_amount > 0) GROUP BY "combos"."id" HAVING (sum(product.id) = sum(product_combos.combo_id))[0m
  [1m[36mCombo Load (0.3ms)[0m  [1m[34mSELECT "combos".* FROM "combos" INNER JOIN "product_combos" ON "product_combos"."combo_id" = "combos"."id" INNER JOIN "products" ON "products"."id" = "product_combos"."product_id" WHERE (storage_amount > 0) GROUP BY "combos"."id" HAVING (sum(product.id) = 2)[0m
  [1m[36mCombo Load (0.5ms)[0m  [1m[34mSELECT "combos".* FROM "combos" INNER JOIN "product_combos" ON "product_combos"."combo_id" = "combos"."id" INNER JOIN "products" ON "products"."id" = "product_combos"."product_id" WHERE (storage_amount > 0) GROUP BY "combos"."id" HAVING (sum(product_id) = 2)[0m
  [1m[36mCombo Load (0.4ms)[0m  [1m[34mSELECT "combos".* FROM "combos" INNER JOIN "product_combos" ON "product_combos"."combo_id" = "combos"."id" INNER JOIN "products" ON "products"."id" = "product_combos"."product_id" WHERE (storage_amount > 0) GROUP BY "combos"."id" HAVING (sum(product_id) = 1)[0m
  [1m[36mCombo Load (0.8ms)[0m  [1m[34mSELECT "combos".* FROM "combos" INNER JOIN "product_combos" ON "product_combos"."combo_id" = "combos"."id" INNER JOIN "products" ON "products"."id" = "product_combos"."product_id" WHERE (storage_amount > 0) GROUP BY "combos"."id" HAVING (count(product_id) = 1)[0m
  [1m[36mCombo Load (0.3ms)[0m  [1m[34mSELECT "combos".* FROM "combos" INNER JOIN "product_combos" ON "product_combos"."combo_id" = "combos"."id" INNER JOIN "products" ON "products"."id" = "product_combos"."product_id" WHERE (storage_amount > 0) GROUP BY "combos"."id" HAVING (count(product_id) = 2)[0m
  [1m[36mCombo Load (0.4ms)[0m  [1m[34mSELECT "combos".* FROM "combos" INNER JOIN "product_combos" ON "product_combos"."combo_id" = "combos"."id" INNER JOIN "products" ON "products"."id" = "product_combos"."product_id" WHERE (storage_amount > 0) GROUP BY "combos"."id" HAVING (count(product_id) = count(combo_id))[0m
  [1m[36mCombo Load (1.0ms)[0m  [1m[34mSELECT "combos".* FROM "combos" INNER JOIN "product_combos" ON "product_combos"."combo_id" = "combos"."id" INNER JOIN "products" ON "products"."id" = "product_combos"."product_id" WHERE (storage_amount > 0) GROUP BY "combos"."id" HAVING (count(product_id) = (select count(combo_id) from product_combos where combo_id = id))[0m
  [1m[36mCombo Load (1.8ms)[0m  [1m[34mSELECT "combos".* FROM "combos" INNER JOIN "product_combos" ON "product_combos"."combo_id" = "combos"."id" INNER JOIN "products" ON "products"."id" = "product_combos"."product_id" WHERE (storage_amount > 0) GROUP BY "combos"."id" HAVING (count(product_id) = (select count(combo_id) from product_combos where combo_id = combo.id))[0m
  [1m[36mCombo Load (0.9ms)[0m  [1m[34mSELECT "combos".* FROM "combos" INNER JOIN "product_combos" ON "product_combos"."combo_id" = "combos"."id" INNER JOIN "products" ON "products"."id" = "product_combos"."product_id" WHERE (storage_amount > 0) GROUP BY "combos"."id" HAVING (count(product_id) = (select count(combo_id) from product_combos where combo_id = "combos"."id"))[0m
  [1m[36mProduct Load (0.8ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 1], ["OFFSET", 1]]
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" ORDER BY "products"."id" ASC LIMIT ? OFFSET ?[0m  [["LIMIT", 1], ["OFFSET", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mProduct Update (1.5ms)[0m  [1m[33mUPDATE "products" SET "storage_amount" = ? WHERE "products"."id" = ?[0m  [["storage_amount", 1], ["id", 4]]
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mCombo Load (13.1ms)[0m  [1m[34mSELECT "combos".* FROM "combos" INNER JOIN "product_combos" ON "product_combos"."combo_id" = "combos"."id" INNER JOIN "products" ON "products"."id" = "product_combos"."product_id" WHERE (storage_amount > 0) GROUP BY "combos"."id" HAVING (count(product_id) = (select count(combo_id) from product_combos where combo_id = "combos"."id"))[0m
Started GET "/combos" for 127.0.0.1 at 2022-10-22 12:00:41 -0500
  
ActionController::RoutingError (No route matches [GET] "/combos"):
  
Started GET "/combos" for 127.0.0.1 at 2022-10-22 12:01:37 -0500
Processing by CombosController#index as */*
  [1m[36mCombo Load (0.7ms)[0m  [1m[34mSELECT "combos".* FROM "combos" INNER JOIN "product_combos" ON "product_combos"."combo_id" = "combos"."id" INNER JOIN "products" ON "products"."id" = "product_combos"."product_id" WHERE (storage_amount > 0) GROUP BY "combos"."id" HAVING (count(product_id) = (select count(combo_id) from product_combos where combo_id = "combos"."id"))[0m
  ↳ app/controllers/combos_controller.rb:11:in `index'
  [1m[36mProduct Pluck (0.2ms)[0m  [1m[34mSELECT "products"."id" FROM "products" INNER JOIN "product_combos" ON "products"."id" = "product_combos"."product_id" WHERE "product_combos"."combo_id" = ?[0m  [["combo_id", 1]]
  ↳ app/controllers/combos_controller.rb:11:in `index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_combos" ON "products"."id" = "product_combos"."product_id" WHERE "product_combos"."combo_id" = ?[0m  [["combo_id", 1]]
  ↳ app/controllers/combos_controller.rb:11:in `index'
  [1m[36mCombo Pluck (0.1ms)[0m  [1m[34mSELECT "combos"."id" FROM "combos" INNER JOIN "product_combos" ON "combos"."id" = "product_combos"."combo_id" WHERE "product_combos"."product_id" = ?[0m  [["product_id", 3]]
  ↳ app/controllers/combos_controller.rb:11:in `index'
  [1m[36mCombo Pluck (0.1ms)[0m  [1m[34mSELECT "combos"."id" FROM "combos" INNER JOIN "product_combos" ON "combos"."id" = "product_combos"."combo_id" WHERE "product_combos"."product_id" = ?[0m  [["product_id", 5]]
  ↳ app/controllers/combos_controller.rb:11:in `index'
  [1m[36mProduct Pluck (0.0ms)[0m  [1m[34mSELECT "products"."id" FROM "products" INNER JOIN "product_combos" ON "products"."id" = "product_combos"."product_id" WHERE "product_combos"."combo_id" = ?[0m  [["combo_id", 2]]
  ↳ app/controllers/combos_controller.rb:11:in `index'
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_combos" ON "products"."id" = "product_combos"."product_id" WHERE "product_combos"."combo_id" = ?[0m  [["combo_id", 2]]
  ↳ app/controllers/combos_controller.rb:11:in `index'
  [1m[36mCombo Pluck (0.1ms)[0m  [1m[34mSELECT "combos"."id" FROM "combos" INNER JOIN "product_combos" ON "combos"."id" = "product_combos"."combo_id" WHERE "product_combos"."product_id" = ?[0m  [["product_id", 4]]
  ↳ app/controllers/combos_controller.rb:11:in `index'
Completed 200 OK in 111ms (Views: 1.1ms | ActiveRecord: 4.5ms | Allocations: 22263)


Started GET "/combos" for 127.0.0.1 at 2022-10-22 12:01:57 -0500
Processing by CombosController#index as */*
  [1m[36mCombo Load (0.3ms)[0m  [1m[34mSELECT "combos".* FROM "combos" INNER JOIN "product_combos" ON "product_combos"."combo_id" = "combos"."id" INNER JOIN "products" ON "products"."id" = "product_combos"."product_id" WHERE (storage_amount > 0) GROUP BY "combos"."id" HAVING (count(product_id) = (select count(combo_id) from product_combos where combo_id = "combos"."id"))[0m
  ↳ app/controllers/combos_controller.rb:11:in `index'
  [1m[36mProduct Pluck (0.1ms)[0m  [1m[34mSELECT "products"."id" FROM "products" INNER JOIN "product_combos" ON "products"."id" = "product_combos"."product_id" WHERE "product_combos"."combo_id" = ?[0m  [["combo_id", 1]]
  ↳ app/controllers/combos_controller.rb:11:in `index'
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_combos" ON "products"."id" = "product_combos"."product_id" WHERE "product_combos"."combo_id" = ?[0m  [["combo_id", 1]]
  ↳ app/controllers/combos_controller.rb:11:in `index'
  [1m[36mCombo Pluck (0.0ms)[0m  [1m[34mSELECT "combos"."id" FROM "combos" INNER JOIN "product_combos" ON "combos"."id" = "product_combos"."combo_id" WHERE "product_combos"."product_id" = ?[0m  [["product_id", 3]]
  ↳ app/controllers/combos_controller.rb:11:in `index'
  [1m[36mCombo Pluck (0.0ms)[0m  [1m[34mSELECT "combos"."id" FROM "combos" INNER JOIN "product_combos" ON "combos"."id" = "product_combos"."combo_id" WHERE "product_combos"."product_id" = ?[0m  [["product_id", 5]]
  ↳ app/controllers/combos_controller.rb:11:in `index'
  [1m[36mProduct Pluck (0.1ms)[0m  [1m[34mSELECT "products"."id" FROM "products" INNER JOIN "product_combos" ON "products"."id" = "product_combos"."product_id" WHERE "product_combos"."combo_id" = ?[0m  [["combo_id", 2]]
  ↳ app/controllers/combos_controller.rb:11:in `index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_combos" ON "products"."id" = "product_combos"."product_id" WHERE "product_combos"."combo_id" = ?[0m  [["combo_id", 2]]
  ↳ app/controllers/combos_controller.rb:11:in `index'
  [1m[36mCombo Pluck (0.1ms)[0m  [1m[34mSELECT "combos"."id" FROM "combos" INNER JOIN "product_combos" ON "combos"."id" = "product_combos"."combo_id" WHERE "product_combos"."product_id" = ?[0m  [["product_id", 4]]
  ↳ app/controllers/combos_controller.rb:11:in `index'
Completed 200 OK in 15ms (Views: 0.5ms | ActiveRecord: 0.6ms | Allocations: 7236)


Started GET "/products" for 127.0.0.1 at 2022-10-22 12:03:55 -0500
Processing by ProductsController#index as */*
Completed 500 Internal Server Error in 7ms (Allocations: 3654)


  
SyntaxError (/Users/artemkuvychka/Documents/Work/assesment/cofee-shop/app/serializers/combo_serializer.rb:13: syntax error, unexpected end-of-input, expecting `end'):
  
app/serializers/combo_serializer.rb:13: syntax error, unexpected end-of-input, expecting `end'
app/serializers/combo_serializer.rb:13: syntax error, unexpected end-of-input, expecting `end'
app/serializers/combo_serializer.rb:13: syntax error, unexpected end-of-input, expecting `end'
app/controllers/products_controller.rb:6:in `new'
app/controllers/products_controller.rb:6:in `index'
Started GET "/products" for 127.0.0.1 at 2022-10-22 12:04:04 -0500
Processing by ProductsController#index as */*
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE (storage_amount > 0)[0m
  ↳ app/controllers/products_controller.rb:11:in `index'
  [1m[36mProductCombo Load (0.6ms)[0m  [1m[34mSELECT "product_combos".* FROM "product_combos" WHERE "product_combos"."product_id" IN (?, ?, ?)[0m  [["product_id", 3], ["product_id", 4], ["product_id", 5]]
  ↳ app/controllers/products_controller.rb:11:in `index'
  [1m[36mCombo Load (0.1ms)[0m  [1m[34mSELECT "combos".* FROM "combos" WHERE "combos"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  ↳ app/controllers/products_controller.rb:11:in `index'
Completed 500 Internal Server Error in 42ms (ActiveRecord: 2.6ms | Allocations: 19443)


  
NameError (undefined local variable or method `products' for ComboSerializer:Class):
  
app/serializers/combo_serializer.rb:11:in `block in <class:ComboSerializer>'
app/controllers/products_controller.rb:11:in `index'
Started GET "/products" for 127.0.0.1 at 2022-10-22 12:05:02 -0500
Processing by ProductsController#index as */*
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE (storage_amount > 0)[0m
  ↳ app/controllers/products_controller.rb:11:in `index'
  [1m[36mProductCombo Load (0.4ms)[0m  [1m[34mSELECT "product_combos".* FROM "product_combos" WHERE "product_combos"."product_id" IN (?, ?, ?)[0m  [["product_id", 3], ["product_id", 4], ["product_id", 5]]
  ↳ app/controllers/products_controller.rb:11:in `index'
  [1m[36mCombo Load (0.1ms)[0m  [1m[34mSELECT "combos".* FROM "combos" WHERE "combos"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  ↳ app/controllers/products_controller.rb:11:in `index'
Completed 500 Internal Server Error in 77ms (ActiveRecord: 2.1ms | Allocations: 19400)


  
NameError (undefined local variable or method `products' for ComboSerializer:Class):
  
app/serializers/combo_serializer.rb:11:in `block in <class:ComboSerializer>'
app/controllers/products_controller.rb:11:in `index'
Started GET "/products" for 127.0.0.1 at 2022-10-22 12:05:34 -0500
Processing by ProductsController#index as */*
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE (storage_amount > 0)[0m
  ↳ app/controllers/products_controller.rb:11:in `index'
  [1m[36mProductCombo Load (0.6ms)[0m  [1m[34mSELECT "product_combos".* FROM "product_combos" WHERE "product_combos"."product_id" IN (?, ?, ?)[0m  [["product_id", 3], ["product_id", 4], ["product_id", 5]]
  ↳ app/controllers/products_controller.rb:11:in `index'
  [1m[36mCombo Load (0.6ms)[0m  [1m[34mSELECT "combos".* FROM "combos" WHERE "combos"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  ↳ app/controllers/products_controller.rb:11:in `index'
  [1m[36mProduct Pluck (0.1ms)[0m  [1m[34mSELECT "products"."id" FROM "products" INNER JOIN "product_combos" ON "products"."id" = "product_combos"."product_id" WHERE "product_combos"."combo_id" = ?[0m  [["combo_id", 1]]
  ↳ app/controllers/products_controller.rb:11:in `index'
  [1m[36mProduct Pluck (0.2ms)[0m  [1m[34mSELECT "products"."id" FROM "products" INNER JOIN "product_combos" ON "products"."id" = "product_combos"."product_id" WHERE "product_combos"."combo_id" = ?[0m  [["combo_id", 2]]
  ↳ app/controllers/products_controller.rb:11:in `index'
Completed 200 OK in 86ms (Views: 1.2ms | ActiveRecord: 4.3ms | Allocations: 20950)


Started GET "/combos" for 127.0.0.1 at 2022-10-22 12:06:02 -0500
Processing by CombosController#index as */*
  [1m[36mCombo Load (1.0ms)[0m  [1m[34mSELECT "combos".* FROM "combos" INNER JOIN "product_combos" ON "product_combos"."combo_id" = "combos"."id" INNER JOIN "products" ON "products"."id" = "product_combos"."product_id" WHERE (storage_amount > 0) GROUP BY "combos"."id" HAVING (count(product_id) = (select count(combo_id) from product_combos where combo_id = "combos"."id"))[0m
  ↳ app/controllers/combos_controller.rb:11:in `index'
  [1m[36mProduct Pluck (0.2ms)[0m  [1m[34mSELECT "products"."id" FROM "products" INNER JOIN "product_combos" ON "products"."id" = "product_combos"."product_id" WHERE "product_combos"."combo_id" = ?[0m  [["combo_id", 1]]
  ↳ app/controllers/combos_controller.rb:11:in `index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_combos" ON "products"."id" = "product_combos"."product_id" WHERE "product_combos"."combo_id" = ?[0m  [["combo_id", 1]]
  ↳ app/controllers/combos_controller.rb:11:in `index'
  [1m[36mCombo Pluck (0.1ms)[0m  [1m[34mSELECT "combos"."id" FROM "combos" INNER JOIN "product_combos" ON "combos"."id" = "product_combos"."combo_id" WHERE "product_combos"."product_id" = ?[0m  [["product_id", 3]]
  ↳ app/controllers/combos_controller.rb:11:in `index'
  [1m[36mCombo Pluck (0.0ms)[0m  [1m[34mSELECT "combos"."id" FROM "combos" INNER JOIN "product_combos" ON "combos"."id" = "product_combos"."combo_id" WHERE "product_combos"."product_id" = ?[0m  [["product_id", 5]]
  ↳ app/controllers/combos_controller.rb:11:in `index'
  [1m[36mProduct Pluck (0.1ms)[0m  [1m[34mSELECT "products"."id" FROM "products" INNER JOIN "product_combos" ON "products"."id" = "product_combos"."product_id" WHERE "product_combos"."combo_id" = ?[0m  [["combo_id", 2]]
  ↳ app/controllers/combos_controller.rb:11:in `index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_combos" ON "products"."id" = "product_combos"."product_id" WHERE "product_combos"."combo_id" = ?[0m  [["combo_id", 2]]
  ↳ app/controllers/combos_controller.rb:11:in `index'
  [1m[36mCombo Pluck (0.1ms)[0m  [1m[34mSELECT "combos"."id" FROM "combos" INNER JOIN "product_combos" ON "combos"."id" = "product_combos"."combo_id" WHERE "product_combos"."product_id" = ?[0m  [["product_id", 4]]
  ↳ app/controllers/combos_controller.rb:11:in `index'
Completed 200 OK in 164ms (Views: 14.2ms | ActiveRecord: 1.7ms | Allocations: 8170)


Started GET "/combos" for 127.0.0.1 at 2022-10-22 12:06:24 -0500
Processing by CombosController#index as */*
  [1m[36mCombo Load (0.9ms)[0m  [1m[34mSELECT "combos".* FROM "combos" INNER JOIN "product_combos" ON "product_combos"."combo_id" = "combos"."id" INNER JOIN "products" ON "products"."id" = "product_combos"."product_id" WHERE (storage_amount > 0) GROUP BY "combos"."id" HAVING (count(product_id) = (select count(combo_id) from product_combos where combo_id = "combos"."id"))[0m
  ↳ app/controllers/combos_controller.rb:11:in `index'
  [1m[36mProductCombo Load (0.0ms)[0m  [1m[34mSELECT "product_combos".* FROM "product_combos" WHERE "product_combos"."combo_id" IN (?, ?)[0m  [["combo_id", 1], ["combo_id", 2]]
  ↳ app/controllers/combos_controller.rb:11:in `index'
  [1m[36mProduct Pluck (0.1ms)[0m  [1m[34mSELECT "products"."id" FROM "products" INNER JOIN "product_combos" ON "products"."id" = "product_combos"."product_id" WHERE "product_combos"."combo_id" = ?[0m  [["combo_id", 1]]
  ↳ app/controllers/combos_controller.rb:11:in `index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_combos" ON "products"."id" = "product_combos"."product_id" WHERE "product_combos"."combo_id" = ?[0m  [["combo_id", 1]]
  ↳ app/controllers/combos_controller.rb:11:in `index'
  [1m[36mCombo Pluck (0.1ms)[0m  [1m[34mSELECT "combos"."id" FROM "combos" INNER JOIN "product_combos" ON "combos"."id" = "product_combos"."combo_id" WHERE "product_combos"."product_id" = ?[0m  [["product_id", 3]]
  ↳ app/controllers/combos_controller.rb:11:in `index'
  [1m[36mCombo Pluck (0.0ms)[0m  [1m[34mSELECT "combos"."id" FROM "combos" INNER JOIN "product_combos" ON "combos"."id" = "product_combos"."combo_id" WHERE "product_combos"."product_id" = ?[0m  [["product_id", 5]]
  ↳ app/controllers/combos_controller.rb:11:in `index'
  [1m[36mProduct Pluck (0.1ms)[0m  [1m[34mSELECT "products"."id" FROM "products" INNER JOIN "product_combos" ON "products"."id" = "product_combos"."product_id" WHERE "product_combos"."combo_id" = ?[0m  [["combo_id", 2]]
  ↳ app/controllers/combos_controller.rb:11:in `index'
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_combos" ON "products"."id" = "product_combos"."product_id" WHERE "product_combos"."combo_id" = ?[0m  [["combo_id", 2]]
  ↳ app/controllers/combos_controller.rb:11:in `index'
  [1m[36mCombo Pluck (0.0ms)[0m  [1m[34mSELECT "combos"."id" FROM "combos" INNER JOIN "product_combos" ON "combos"."id" = "product_combos"."combo_id" WHERE "product_combos"."product_id" = ?[0m  [["product_id", 4]]
  ↳ app/controllers/combos_controller.rb:11:in `index'
Completed 200 OK in 32ms (Views: 0.3ms | ActiveRecord: 2.8ms | Allocations: 24890)


  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddActiveToCombos (20221022170841)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "combos" ADD "active" boolean DEFAULT 1[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20221022170841"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/combos" for 127.0.0.1 at 2022-10-22 12:09:58 -0500
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by CombosController#index as */*
  [1m[36mCombo Load (0.2ms)[0m  [1m[34mSELECT "combos".* FROM "combos" WHERE "combos"."active" = ?[0m  [["active", 1]]
  ↳ app/controllers/combos_controller.rb:11:in `index'
  [1m[36mProduct Pluck (0.3ms)[0m  [1m[34mSELECT "products"."id" FROM "products" INNER JOIN "product_combos" ON "products"."id" = "product_combos"."product_id" WHERE "product_combos"."combo_id" = ?[0m  [["combo_id", 1]]
  ↳ app/controllers/combos_controller.rb:11:in `index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_combos" ON "products"."id" = "product_combos"."product_id" WHERE "product_combos"."combo_id" = ?[0m  [["combo_id", 1]]
  ↳ app/controllers/combos_controller.rb:11:in `index'
  [1m[36mCombo Pluck (0.2ms)[0m  [1m[34mSELECT "combos"."id" FROM "combos" INNER JOIN "product_combos" ON "combos"."id" = "product_combos"."combo_id" WHERE "product_combos"."product_id" = ?[0m  [["product_id", 3]]
  ↳ app/controllers/combos_controller.rb:11:in `index'
  [1m[36mCombo Pluck (0.1ms)[0m  [1m[34mSELECT "combos"."id" FROM "combos" INNER JOIN "product_combos" ON "combos"."id" = "product_combos"."combo_id" WHERE "product_combos"."product_id" = ?[0m  [["product_id", 5]]
  ↳ app/controllers/combos_controller.rb:11:in `index'
  [1m[36mProduct Pluck (0.1ms)[0m  [1m[34mSELECT "products"."id" FROM "products" INNER JOIN "product_combos" ON "products"."id" = "product_combos"."product_id" WHERE "product_combos"."combo_id" = ?[0m  [["combo_id", 2]]
  ↳ app/controllers/combos_controller.rb:11:in `index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_combos" ON "products"."id" = "product_combos"."product_id" WHERE "product_combos"."combo_id" = ?[0m  [["combo_id", 2]]
  ↳ app/controllers/combos_controller.rb:11:in `index'
  [1m[36mCombo Pluck (0.1ms)[0m  [1m[34mSELECT "combos"."id" FROM "combos" INNER JOIN "product_combos" ON "combos"."id" = "product_combos"."combo_id" WHERE "product_combos"."product_id" = ?[0m  [["product_id", 4]]
  ↳ app/controllers/combos_controller.rb:11:in `index'
Completed 200 OK in 86ms (Views: 1.3ms | ActiveRecord: 2.8ms | Allocations: 33530)


Started GET "/combos" for 127.0.0.1 at 2022-10-22 12:10:09 -0500
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by CombosController#index as */*
  [1m[36mCombo Load (0.1ms)[0m  [1m[34mSELECT "combos".* FROM "combos" WHERE "combos"."active" = ?[0m  [["active", 1]]
  ↳ app/controllers/combos_controller.rb:11:in `index'
  [1m[36mProduct Pluck (0.1ms)[0m  [1m[34mSELECT "products"."id" FROM "products" INNER JOIN "product_combos" ON "products"."id" = "product_combos"."product_id" WHERE "product_combos"."combo_id" = ?[0m  [["combo_id", 1]]
  ↳ app/controllers/combos_controller.rb:11:in `index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_combos" ON "products"."id" = "product_combos"."product_id" WHERE "product_combos"."combo_id" = ?[0m  [["combo_id", 1]]
  ↳ app/controllers/combos_controller.rb:11:in `index'
  [1m[36mCombo Pluck (0.2ms)[0m  [1m[34mSELECT "combos"."id" FROM "combos" INNER JOIN "product_combos" ON "combos"."id" = "product_combos"."combo_id" WHERE "product_combos"."product_id" = ?[0m  [["product_id", 3]]
  ↳ app/controllers/combos_controller.rb:11:in `index'
  [1m[36mCombo Pluck (0.0ms)[0m  [1m[34mSELECT "combos"."id" FROM "combos" INNER JOIN "product_combos" ON "combos"."id" = "product_combos"."combo_id" WHERE "product_combos"."product_id" = ?[0m  [["product_id", 5]]
  ↳ app/controllers/combos_controller.rb:11:in `index'
  [1m[36mProduct Pluck (0.0ms)[0m  [1m[34mSELECT "products"."id" FROM "products" INNER JOIN "product_combos" ON "products"."id" = "product_combos"."product_id" WHERE "product_combos"."combo_id" = ?[0m  [["combo_id", 2]]
  ↳ app/controllers/combos_controller.rb:11:in `index'
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" INNER JOIN "product_combos" ON "products"."id" = "product_combos"."product_id" WHERE "product_combos"."combo_id" = ?[0m  [["combo_id", 2]]
  ↳ app/controllers/combos_controller.rb:11:in `index'
  [1m[36mCombo Pluck (0.0ms)[0m  [1m[34mSELECT "combos"."id" FROM "combos" INNER JOIN "product_combos" ON "combos"."id" = "product_combos"."combo_id" WHERE "product_combos"."product_id" = ?[0m  [["product_id", 4]]
  ↳ app/controllers/combos_controller.rb:11:in `index'
Completed 200 OK in 41ms (Views: 0.3ms | ActiveRecord: 1.0ms | Allocations: 57888)


Started GET "/combos" for 127.0.0.1 at 2022-10-22 12:10:34 -0500
Processing by CombosController#index as */*
  [1m[36mCombo Load (0.4ms)[0m  [1m[34mSELECT "combos".* FROM "combos" WHERE "combos"."active" = ?[0m  [["active", 1]]
  ↳ app/controllers/combos_controller.rb:11:in `index'
  [1m[36mProductCombo Load (0.5ms)[0m  [1m[34mSELECT "product_combos".* FROM "product_combos" WHERE "product_combos"."combo_id" IN (?, ?)[0m  [["combo_id", 1], ["combo_id", 2]]
  ↳ app/controllers/combos_controller.rb:11:in `index'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" IN (?, ?, ?)[0m  [["id", 3], ["id", 5], ["id", 4]]
  ↳ app/controllers/combos_controller.rb:11:in `index'
  [1m[36mCombo Pluck (0.4ms)[0m  [1m[34mSELECT "combos"."id" FROM "combos" INNER JOIN "product_combos" ON "combos"."id" = "product_combos"."combo_id" WHERE "product_combos"."product_id" = ?[0m  [["product_id", 3]]
  ↳ app/controllers/combos_controller.rb:11:in `index'
  [1m[36mCombo Pluck (0.1ms)[0m  [1m[34mSELECT "combos"."id" FROM "combos" INNER JOIN "product_combos" ON "combos"."id" = "product_combos"."combo_id" WHERE "product_combos"."product_id" = ?[0m  [["product_id", 5]]
  ↳ app/controllers/combos_controller.rb:11:in `index'
  [1m[36mCombo Pluck (0.0ms)[0m  [1m[34mSELECT "combos"."id" FROM "combos" INNER JOIN "product_combos" ON "combos"."id" = "product_combos"."combo_id" WHERE "product_combos"."product_id" = ?[0m  [["product_id", 4]]
  ↳ app/controllers/combos_controller.rb:11:in `index'
Completed 200 OK in 106ms (Views: 0.5ms | ActiveRecord: 6.0ms | Allocations: 36949)


Started GET "/combos" for 127.0.0.1 at 2022-10-22 12:11:10 -0500
Processing by CombosController#index as */*
  [1m[36mCombo Load (0.6ms)[0m  [1m[34mSELECT "combos".* FROM "combos" WHERE "combos"."active" = ?[0m  [["active", 1]]
  ↳ app/controllers/combos_controller.rb:11:in `index'
  [1m[36mProductCombo Load (0.6ms)[0m  [1m[34mSELECT "product_combos".* FROM "product_combos" WHERE "product_combos"."combo_id" IN (?, ?)[0m  [["combo_id", 1], ["combo_id", 2]]
  ↳ app/controllers/combos_controller.rb:11:in `index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" IN (?, ?, ?)[0m  [["id", 3], ["id", 5], ["id", 4]]
  ↳ app/controllers/combos_controller.rb:11:in `index'
  [1m[36mCombo Pluck (0.3ms)[0m  [1m[34mSELECT "combos"."id" FROM "combos" INNER JOIN "product_combos" ON "combos"."id" = "product_combos"."combo_id" WHERE "product_combos"."product_id" = ?[0m  [["product_id", 3]]
  ↳ app/controllers/combos_controller.rb:11:in `index'
  [1m[36mCombo Pluck (0.1ms)[0m  [1m[34mSELECT "combos"."id" FROM "combos" INNER JOIN "product_combos" ON "combos"."id" = "product_combos"."combo_id" WHERE "product_combos"."product_id" = ?[0m  [["product_id", 5]]
  ↳ app/controllers/combos_controller.rb:11:in `index'
  [1m[36mCombo Pluck (0.1ms)[0m  [1m[34mSELECT "combos"."id" FROM "combos" INNER JOIN "product_combos" ON "combos"."id" = "product_combos"."combo_id" WHERE "product_combos"."product_id" = ?[0m  [["product_id", 4]]
  ↳ app/controllers/combos_controller.rb:11:in `index'
Completed 200 OK in 168ms (Views: 3.1ms | ActiveRecord: 5.3ms | Allocations: 22106)


Started GET "/combos" for 127.0.0.1 at 2022-10-22 12:12:24 -0500
Processing by CombosController#index as */*
  [1m[36mCombo Load (0.6ms)[0m  [1m[34mSELECT "combos".* FROM "combos" WHERE "combos"."active" = ?[0m  [["active", 1]]
  ↳ app/controllers/combos_controller.rb:12:in `index'
  [1m[36mProductCombo Load (1.0ms)[0m  [1m[34mSELECT "product_combos".* FROM "product_combos" WHERE "product_combos"."combo_id" IN (?, ?)[0m  [["combo_id", 1], ["combo_id", 2]]
  ↳ app/controllers/combos_controller.rb:12:in `index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" IN (?, ?, ?)[0m  [["id", 3], ["id", 5], ["id", 4]]
  ↳ app/controllers/combos_controller.rb:12:in `index'
  [1m[36mCombo Pluck (0.1ms)[0m  [1m[34mSELECT "combos"."id" FROM "combos" INNER JOIN "product_combos" ON "combos"."id" = "product_combos"."combo_id" WHERE "product_combos"."product_id" = ?[0m  [["product_id", 3]]
  ↳ app/controllers/combos_controller.rb:12:in `index'
  [1m[36mCombo Pluck (0.1ms)[0m  [1m[34mSELECT "combos"."id" FROM "combos" INNER JOIN "product_combos" ON "combos"."id" = "product_combos"."combo_id" WHERE "product_combos"."product_id" = ?[0m  [["product_id", 5]]
  ↳ app/controllers/combos_controller.rb:12:in `index'
  [1m[36mCombo Pluck (0.1ms)[0m  [1m[34mSELECT "combos"."id" FROM "combos" INNER JOIN "product_combos" ON "combos"."id" = "product_combos"."combo_id" WHERE "product_combos"."product_id" = ?[0m  [["product_id", 4]]
  ↳ app/controllers/combos_controller.rb:12:in `index'
Completed 200 OK in 104ms (Views: 1.0ms | ActiveRecord: 7.2ms | Allocations: 22019)


Started GET "/combos" for 127.0.0.1 at 2022-10-22 12:13:20 -0500
Processing by CombosController#index as */*
Completed 500 Internal Server Error in 17ms (ActiveRecord: 0.3ms | Allocations: 4438)


  
NameError (ComboSerializer cannot resolve a serializer class for 'product'.  Attempted to find 'ProductSerializer'. Consider specifying the serializer directly through options[:serializer].):
  
app/controllers/combos_controller.rb:6:in `new'
app/controllers/combos_controller.rb:6:in `index'
Started GET "/combos" for 127.0.0.1 at 2022-10-22 12:17:05 -0500
Processing by CombosController#index as */*
  [1m[36mCombo Load (0.5ms)[0m  [1m[34mSELECT "combos".* FROM "combos" WHERE "combos"."active" = ?[0m  [["active", 1]]
  ↳ app/controllers/combos_controller.rb:12:in `index'
  [1m[36mProductCombo Load (0.4ms)[0m  [1m[34mSELECT "product_combos".* FROM "product_combos" WHERE "product_combos"."combo_id" IN (?, ?)[0m  [["combo_id", 1], ["combo_id", 2]]
  ↳ app/controllers/combos_controller.rb:12:in `index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" IN (?, ?, ?)[0m  [["id", 3], ["id", 5], ["id", 4]]
  ↳ app/controllers/combos_controller.rb:12:in `index'
Completed 200 OK in 66ms (Views: 12.4ms | ActiveRecord: 3.7ms | Allocations: 18442)


Started GET "/combos" for 127.0.0.1 at 2022-10-22 12:17:23 -0500
Processing by CombosController#index as */*
  [1m[36mCombo Load (0.4ms)[0m  [1m[34mSELECT "combos".* FROM "combos" WHERE "combos"."active" = ?[0m  [["active", 1]]
  ↳ app/controllers/combos_controller.rb:12:in `index'
  [1m[36mProductCombo Load (0.4ms)[0m  [1m[34mSELECT "product_combos".* FROM "product_combos" WHERE "product_combos"."combo_id" IN (?, ?)[0m  [["combo_id", 1], ["combo_id", 2]]
  ↳ app/controllers/combos_controller.rb:12:in `index'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" IN (?, ?, ?)[0m  [["id", 3], ["id", 5], ["id", 4]]
  ↳ app/controllers/combos_controller.rb:12:in `index'
Completed 200 OK in 33ms (Views: 0.3ms | ActiveRecord: 2.4ms | Allocations: 18393)


Started GET "/products" for 127.0.0.1 at 2022-10-22 12:17:41 -0500
Processing by ProductsController#index as */*
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE (storage_amount > 0)[0m
  ↳ app/controllers/products_controller.rb:11:in `index'
  [1m[36mProductCombo Load (0.4ms)[0m  [1m[34mSELECT "product_combos".* FROM "product_combos" WHERE "product_combos"."product_id" IN (?, ?, ?)[0m  [["product_id", 3], ["product_id", 4], ["product_id", 5]]
  ↳ app/controllers/products_controller.rb:11:in `index'
  [1m[36mCombo Load (0.1ms)[0m  [1m[34mSELECT "combos".* FROM "combos" WHERE "combos"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  ↳ app/controllers/products_controller.rb:11:in `index'
  [1m[36mProduct Pluck (0.1ms)[0m  [1m[34mSELECT "products"."id" FROM "products" INNER JOIN "product_combos" ON "products"."id" = "product_combos"."product_id" WHERE "product_combos"."combo_id" = ?[0m  [["combo_id", 1]]
  ↳ app/controllers/products_controller.rb:11:in `index'
  [1m[36mProduct Pluck (0.0ms)[0m  [1m[34mSELECT "products"."id" FROM "products" INNER JOIN "product_combos" ON "products"."id" = "product_combos"."product_id" WHERE "product_combos"."combo_id" = ?[0m  [["combo_id", 2]]
  ↳ app/controllers/products_controller.rb:11:in `index'
Completed 200 OK in 38ms (Views: 0.4ms | ActiveRecord: 4.5ms | Allocations: 21029)


Started GET "/products" for 127.0.0.1 at 2022-10-22 12:18:13 -0500
Processing by ProductsController#index as */*
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE (storage_amount > 0)[0m
  ↳ app/controllers/products_controller.rb:12:in `index'
  [1m[36mProductCombo Load (4.0ms)[0m  [1m[34mSELECT "product_combos".* FROM "product_combos" WHERE "product_combos"."product_id" IN (?, ?, ?)[0m  [["product_id", 3], ["product_id", 4], ["product_id", 5]]
  ↳ app/controllers/products_controller.rb:12:in `index'
  [1m[36mCombo Load (0.1ms)[0m  [1m[34mSELECT "combos".* FROM "combos" WHERE "combos"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  ↳ app/controllers/products_controller.rb:12:in `index'
Completed 200 OK in 104ms (Views: 0.5ms | ActiveRecord: 6.7ms | Allocations: 18311)


  [1m[36mOrder Count (2.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddDefaultToOrderStatus (20221022175524)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.4ms)[0m  [1m[35mCREATE TEMPORARY TABLE "aorders" ("id" integer NOT NULL PRIMARY KEY, "status" integer NOT NULL, "user_id" integer NOT NULL, "final_price" decimal DEFAULT 0.0)[0m
  [1m[35m (0.4ms)[0m  [1m[32mINSERT INTO "aorders" ("id","status","user_id","final_price")
                     SELECT "id","status","user_id","final_price" FROM "orders"[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE "orders"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "orders" ("id" integer NOT NULL PRIMARY KEY, "status" integer DEFAULT NULL NOT NULL, "user_id" integer NOT NULL, "final_price" decimal DEFAULT 0.0)[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("id","status","user_id","final_price")
                     SELECT "id","status","user_id","final_price" FROM "aorders"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "aorders"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20221022175524"]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mOrder Load (1.3ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddDefaultToOrderStatus (20221022175524)
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddDefaultToOrderStatus (20221022175524)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::SchemaMigration Delete All (0.2ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = ?[0m  [["version", "20221022175524"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddDefaultToOrderStatus (20221022175524)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TEMPORARY TABLE "aorders" ("id" integer NOT NULL PRIMARY KEY, "status" integer NOT NULL, "user_id" integer NOT NULL, "final_price" decimal DEFAULT 0.0)[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "aorders" ("id","status","user_id","final_price")
                     SELECT "id","status","user_id","final_price" FROM "orders"[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE "orders"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "orders" ("id" integer NOT NULL PRIMARY KEY, "status" integer DEFAULT 0 NOT NULL, "user_id" integer NOT NULL, "final_price" decimal DEFAULT 0.0)[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("id","status","user_id","final_price")
                     SELECT "id","status","user_id","final_price" FROM "aorders"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "aorders"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20221022175524"]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mCustomer Load (1.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers" ORDER BY "customers"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to ChangeUserToCustomerForOrder (20221022180257)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TEMPORARY TABLE "aorders" ("id" integer NOT NULL PRIMARY KEY, "status" integer DEFAULT 0 NOT NULL, "customer_id" integer NOT NULL, "final_price" decimal DEFAULT 0.0)[0m
  [1m[35m (0.3ms)[0m  [1m[32mINSERT INTO "aorders" ("id","status","customer_id","final_price")
                     SELECT "id","status","user_id","final_price" FROM "orders"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE "orders"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "orders" ("id" integer NOT NULL PRIMARY KEY, "status" integer DEFAULT 0 NOT NULL, "customer_id" integer NOT NULL, "final_price" decimal DEFAULT 0.0)[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("id","status","customer_id","final_price")
                     SELECT "id","status","customer_id","final_price" FROM "aorders"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "aorders"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20221022180257"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mCustomer Load (0.0ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrder Create (0.2ms)[0m  [1m[32mINSERT INTO "orders" ("status", "customer_id", "final_price") VALUES (?, ?, ?)[0m  [["status", 0], ["customer_id", 1], ["final_price", 0.0]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mOrder Count (1.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mOrder Destroy (0.4ms)[0m  [1m[31mDELETE FROM "orders" WHERE "orders"."id" = ?[0m  [["id", 1]]
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mOrder Count (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrder Create (0.7ms)[0m  [1m[32mINSERT INTO "orders" ("status", "customer_id", "final_price") VALUES (?, ?, ?)[0m  [["status", 0], ["customer_id", 1], ["final_price", 0.0]]
  [1m[36mTRANSACTION (2.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mCustomer Load (0.0ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrder Update (0.2ms)[0m  [1m[33mUPDATE "orders" SET "status" = ? WHERE "orders"."id" = ?[0m  [["status", 5], ["id", 1]]
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mOrder Load (1.6ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (1.1ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mOrder Destroy (0.3ms)[0m  [1m[31mDELETE FROM "orders" WHERE "orders"."id" = ?[0m  [["id", 1]]
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (5.7ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mCustomer Load (0.9ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrder Create (0.6ms)[0m  [1m[32mINSERT INTO "orders" ("status", "customer_id", "final_price") VALUES (?, ?, ?)[0m  [["status", 1], ["customer_id", 1], ["final_price", 0.0]]
  [1m[36mTRANSACTION (1.1ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mOrder Update (4.8ms)[0m  [1m[33mUPDATE "orders" SET "status" = ? WHERE "orders"."id" = ?[0m  [["status", 0], ["id", 1]]
  [1m[36mTRANSACTION (1.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mOrder Destroy (0.8ms)[0m  [1m[31mDELETE FROM "orders" WHERE "orders"."id" = ?[0m  [["id", 1]]
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mOrder Count (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
  [1m[36mOrder Load (1.1ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mCustomer Load (0.9ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrder Create (0.9ms)[0m  [1m[32mINSERT INTO "orders" ("status", "customer_id", "final_price") VALUES (?, ?, ?)[0m  [["status", 0], ["customer_id", 1], ["final_price", 0.0]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mOrder Update (0.6ms)[0m  [1m[33mUPDATE "orders" SET "status" = ? WHERE "orders"."id" = ?[0m  [["status", 5], ["id", 1]]
  [1m[36mTRANSACTION (1.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mOrder Load (1.3ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mOrderProduct Load (0.4ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrderProduct Load (0.2ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to ChangeUserToCustomerForOrder (20221022180257)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TEMPORARY TABLE "aorders" ("id" integer NOT NULL PRIMARY KEY, "status" integer DEFAULT 0 NOT NULL, "user_id" integer NOT NULL, "final_price" decimal DEFAULT 0.0)[0m
  [1m[35m (0.5ms)[0m  [1m[32mINSERT INTO "aorders" ("id","status","user_id","final_price")
                     SELECT "id","status","customer_id","final_price" FROM "orders"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE "orders"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "orders" ("id" integer NOT NULL PRIMARY KEY, "status" integer DEFAULT 0 NOT NULL, "user_id" integer NOT NULL, "final_price" decimal DEFAULT 0.0)[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("id","status","user_id","final_price")
                     SELECT "id","status","user_id","final_price" FROM "aorders"[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE "aorders"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mActiveRecord::SchemaMigration Delete All (0.1ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = ?[0m  [["version", "20221022180257"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddDefaultToOrderStatus (20221022175524)
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddDefaultToOrderStatus (20221022175524)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::SchemaMigration Delete All (0.2ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = ?[0m  [["version", "20221022175524"]]
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddActiveToCombos (20221022170841)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.5ms)[0m  [1m[35mCREATE TEMPORARY TABLE "acombos" ("id" integer NOT NULL PRIMARY KEY, "name" varchar DEFAULT NULL, "active" boolean DEFAULT 1)[0m
  [1m[35m (0.2ms)[0m  [1m[32mINSERT INTO "acombos" ("id","name","active")
                     SELECT "id","name","active" FROM "combos"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE "combos"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "combos" ("id" integer NOT NULL PRIMARY KEY, "name" varchar DEFAULT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "combos" ("id","name")
                     SELECT "id","name" FROM "acombos"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "acombos"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mActiveRecord::SchemaMigration Delete All (0.1ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = ?[0m  [["version", "20221022170841"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddOrderProducts (20221021230954)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE "order_products"[0m
  [1m[36mActiveRecord::SchemaMigration Delete All (0.1ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = ?[0m  [["version", "20221021230954"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddOrders (20221021230759)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE "orders"[0m
  [1m[36mActiveRecord::SchemaMigration Delete All (0.1ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = ?[0m  [["version", "20221021230759"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddCustomers (20221021230604)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE "customers"[0m
  [1m[36mActiveRecord::SchemaMigration Delete All (0.1ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = ?[0m  [["version", "20221021230604"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddProductCombos (20221021210701)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE "product_combos"[0m
  [1m[36mActiveRecord::SchemaMigration Delete All (0.1ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = ?[0m  [["version", "20221021210701"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddDiscounts (20221021210631)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (2.8ms)[0m  [1m[35mDROP TABLE "discounts"[0m
  [1m[36mActiveRecord::SchemaMigration Delete All (0.1ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = ?[0m  [["version", "20221021210631"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddCombos (20221021210352)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE "combos"[0m
  [1m[36mActiveRecord::SchemaMigration Delete All (0.1ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = ?[0m  [["version", "20221021210352"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddProducts (20221021182148)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE "products"[0m
  [1m[36mActiveRecord::SchemaMigration Delete All (0.3ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = ?[0m  [["version", "20221021182148"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddProducts (20221021182148)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal, "tax_rate" decimal, "storage_amount" integer DEFAULT 0)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20221021182148"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[36mcommit transaction[0m
Migrating to AddCombos (20221021210352)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "combos" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20221021210352"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
Migrating to AddDiscounts (20221021210631)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "discounts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "discount_type" integer NOT NULL, "amount" decimal NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20221021210631"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
Migrating to AddProductCombos (20221021210701)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "product_combos" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "product_id" integer NOT NULL, "combo_id" integer NOT NULL, "discount_id" integer)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20221021210701"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
Migrating to AddCustomers (20221021230604)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "customers" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "first_name" varchar NOT NULL, "last_name" varchar, "contact_type" integer, "contact" varchar)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20221021230604"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
Migrating to AddOrders (20221021230759)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "orders" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "state" integer NOT NULL, "user_id" integer NOT NULL, "final_price" decimal DEFAULT 0.0)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20221021230759"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
Migrating to AddOrderProducts (20221021230954)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "order_products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "order_id" integer NOT NULL, "product_id" integer NOT NULL, "amount" integer NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20221021230954"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
Migrating to AddActiveToCombos (20221022170841)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "combos" ADD "active" boolean DEFAULT 1[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20221022170841"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[36mcommit transaction[0m
Migrating to AddDefaultToOrderStatus (20221022175524)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TEMPORARY TABLE "aorders" ("id" integer NOT NULL PRIMARY KEY, "state" integer NOT NULL, "user_id" integer NOT NULL, "final_price" decimal DEFAULT 0.0)[0m
  [1m[35m (0.1ms)[0m  [1m[32mINSERT INTO "aorders" ("id","state","user_id","final_price")
                     SELECT "id","state","user_id","final_price" FROM "orders"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE "orders"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "orders" ("id" integer NOT NULL PRIMARY KEY, "state" integer DEFAULT 0 NOT NULL, "user_id" integer NOT NULL, "final_price" decimal DEFAULT 0.0)[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("id","state","user_id","final_price")
                     SELECT "id","state","user_id","final_price" FROM "aorders"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "aorders"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20221022175524"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
Migrating to ChangeUserToCustomerForOrder (20221022180257)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TEMPORARY TABLE "aorders" ("id" integer NOT NULL PRIMARY KEY, "state" integer DEFAULT 0 NOT NULL, "customer_id" integer NOT NULL, "final_price" decimal DEFAULT 0.0)[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "aorders" ("id","state","customer_id","final_price")
                     SELECT "id","state","user_id","final_price" FROM "orders"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE "orders"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "orders" ("id" integer NOT NULL PRIMARY KEY, "state" integer DEFAULT 0 NOT NULL, "customer_id" integer NOT NULL, "final_price" decimal DEFAULT 0.0)[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("id","state","customer_id","final_price")
                     SELECT "id","state","customer_id","final_price" FROM "aorders"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "aorders"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20221022180257"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mCustomer Count (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "customers"[0m
  [1m[36mOrder Load (0.1ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrder Count (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to ChangeUserToCustomerForOrder (20221022180257)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.3ms)[0m  [1m[35mCREATE TEMPORARY TABLE "aorders" ("id" integer NOT NULL PRIMARY KEY, "state" integer DEFAULT 0 NOT NULL, "user_id" integer NOT NULL, "final_price" decimal DEFAULT 0.0)[0m
  [1m[35m (0.4ms)[0m  [1m[32mINSERT INTO "aorders" ("id","state","user_id","final_price")
                     SELECT "id","state","customer_id","final_price" FROM "orders"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE "orders"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "orders" ("id" integer NOT NULL PRIMARY KEY, "state" integer DEFAULT 0 NOT NULL, "user_id" integer NOT NULL, "final_price" decimal DEFAULT 0.0)[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("id","state","user_id","final_price")
                     SELECT "id","state","user_id","final_price" FROM "aorders"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "aorders"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mActiveRecord::SchemaMigration Delete All (0.1ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = ?[0m  [["version", "20221022180257"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddDefaultToOrderStatus (20221022175524)
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddDefaultToOrderStatus (20221022175524)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mActiveRecord::SchemaMigration Delete All (0.2ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = ?[0m  [["version", "20221022175524"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddActiveToCombos (20221022170841)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TEMPORARY TABLE "acombos" ("id" integer NOT NULL PRIMARY KEY, "name" varchar DEFAULT NULL, "active" boolean DEFAULT 1)[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "acombos" ("id","name","active")
                     SELECT "id","name","active" FROM "combos"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE "combos"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "combos" ("id" integer NOT NULL PRIMARY KEY, "name" varchar DEFAULT NULL)[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "combos" ("id","name")
                     SELECT "id","name" FROM "acombos"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "acombos"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mActiveRecord::SchemaMigration Delete All (0.1ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = ?[0m  [["version", "20221022170841"]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddOrderProducts (20221021230954)
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE "order_products"[0m
  [1m[36mActiveRecord::SchemaMigration Delete All (0.1ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = ?[0m  [["version", "20221021230954"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddOrders (20221021230759)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE "orders"[0m
  [1m[36mActiveRecord::SchemaMigration Delete All (0.1ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = ?[0m  [["version", "20221021230759"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddCustomers (20221021230604)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE "customers"[0m
  [1m[36mActiveRecord::SchemaMigration Delete All (0.1ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = ?[0m  [["version", "20221021230604"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddProductCombos (20221021210701)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE "product_combos"[0m
  [1m[36mActiveRecord::SchemaMigration Delete All (0.1ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = ?[0m  [["version", "20221021210701"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddDiscounts (20221021210631)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE "discounts"[0m
  [1m[36mActiveRecord::SchemaMigration Delete All (0.1ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = ?[0m  [["version", "20221021210631"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddCombos (20221021210352)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE "combos"[0m
  [1m[36mActiveRecord::SchemaMigration Delete All (0.1ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = ?[0m  [["version", "20221021210352"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddProducts (20221021182148)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE "products"[0m
  [1m[36mActiveRecord::SchemaMigration Delete All (0.1ms)[0m  [1m[31mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = ?[0m  [["version", "20221021182148"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddProducts (20221021182148)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "price" decimal, "tax_rate" decimal, "storage_amount" integer DEFAULT 0)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20221021182148"]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
Migrating to AddCombos (20221021210352)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "combos" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20221021210352"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
Migrating to AddDiscounts (20221021210631)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "discounts" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "discount_type" integer NOT NULL, "amount" decimal NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20221021210631"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
Migrating to AddProductCombos (20221021210701)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "product_combos" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "product_id" integer NOT NULL, "combo_id" integer NOT NULL, "discount_id" integer)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20221021210701"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
Migrating to AddCustomers (20221021230604)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "customers" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "first_name" varchar NOT NULL, "last_name" varchar, "contact_type" integer, "contact" varchar)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20221021230604"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
Migrating to AddOrders (20221021230759)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TABLE "orders" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "status" integer NOT NULL, "user_id" integer NOT NULL, "final_price" decimal DEFAULT 0.0)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20221021230759"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
Migrating to AddOrderProducts (20221021230954)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.2ms)[0m  [1m[35mCREATE TABLE "order_products" ("id" integer PRIMARY KEY AUTOINCREMENT NOT NULL, "order_id" integer NOT NULL, "product_id" integer NOT NULL, "amount" integer NOT NULL)[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20221021230954"]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
Migrating to AddActiveToCombos (20221022170841)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "combos" ADD "active" boolean DEFAULT 1[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20221022170841"]]
  [1m[36mTRANSACTION (4.5ms)[0m  [1m[36mcommit transaction[0m
Migrating to AddDefaultToOrderStatus (20221022175524)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TEMPORARY TABLE "aorders" ("id" integer NOT NULL PRIMARY KEY, "status" integer NOT NULL, "user_id" integer NOT NULL, "final_price" decimal DEFAULT 0.0)[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "aorders" ("id","status","user_id","final_price")
                     SELECT "id","status","user_id","final_price" FROM "orders"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP TABLE "orders"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddDefaultToOrderStatus (20221022175524)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TEMPORARY TABLE "aorders" ("id" integer NOT NULL PRIMARY KEY, "status" integer NOT NULL, "user_id" integer NOT NULL, "final_price" decimal DEFAULT 0.0)[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "aorders" ("id","status","user_id","final_price")
                     SELECT "id","status","user_id","final_price" FROM "orders"[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP TABLE "orders"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "orders" ("id" integer NOT NULL PRIMARY KEY, "status" integer DEFAULT 0 NOT NULL, "user_id" integer NOT NULL, "final_price" decimal DEFAULT 0.0)[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("id","status","user_id","final_price")
                     SELECT "id","status","user_id","final_price" FROM "aorders"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "aorders"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20221022175524"]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
Migrating to ChangeUserToCustomerForOrder (20221022180257)
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = ON[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = OFF[0m
  [1m[35m (0.1ms)[0m  [1m[35mCREATE TEMPORARY TABLE "aorders" ("id" integer NOT NULL PRIMARY KEY, "status" integer DEFAULT 0 NOT NULL, "customer_id" integer NOT NULL, "final_price" decimal DEFAULT 0.0)[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "aorders" ("id","status","customer_id","final_price")
                     SELECT "id","status","user_id","final_price" FROM "orders"[0m
  [1m[35m (3.8ms)[0m  [1m[35mDROP TABLE "orders"[0m
  [1m[35m (0.0ms)[0m  [1m[35mCREATE TABLE "orders" ("id" integer NOT NULL PRIMARY KEY, "status" integer DEFAULT 0 NOT NULL, "customer_id" integer NOT NULL, "final_price" decimal DEFAULT 0.0)[0m
  [1m[35m (0.0ms)[0m  [1m[32mINSERT INTO "orders" ("id","status","customer_id","final_price")
                     SELECT "id","status","customer_id","final_price" FROM "aorders"[0m
  [1m[35m (0.0ms)[0m  [1m[35mDROP TABLE "aorders"[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA defer_foreign_keys = 0[0m
  [1m[35m (0.0ms)[0m  [1m[35mPRAGMA foreign_keys = 1[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20221022180257"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = ? LIMIT ?[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::SchemaMigration Pluck (0.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Espresso"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mProduct Create (0.2ms)[0m  [1m[32mINSERT INTO "products" ("name", "price", "tax_rate", "storage_amount") VALUES (?, ?, ?, ?)[0m  [["name", "Espresso"], ["price", 5.0], ["tax_rate", 0.08], ["storage_amount", 5]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Mocka"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "price", "tax_rate", "storage_amount") VALUES (?, ?, ?, ?)[0m  [["name", "Mocka"], ["price", 10.0], ["tax_rate", 0.08], ["storage_amount", 3]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Bagel"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mProduct Create (0.1ms)[0m  [1m[32mINSERT INTO "products" ("name", "price", "tax_rate", "storage_amount") VALUES (?, ?, ?, ?)[0m  [["name", "Bagel"], ["price", 7.0], ["tax_rate", 0.03], ["storage_amount", 2]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mDiscount Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "discounts" WHERE "discounts"."discount_type" = ? AND "discounts"."amount" = ? LIMIT ?[0m  [["discount_type", 1], ["amount", 10.0], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mDiscount Create (0.1ms)[0m  [1m[32mINSERT INTO "discounts" ("discount_type", "amount") VALUES (?, ?)[0m  [["discount_type", 1], ["amount", 10.0]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mDiscount Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "discounts" WHERE "discounts"."discount_type" = ? AND "discounts"."amount" = ? LIMIT ?[0m  [["discount_type", 0], ["amount", 7.0], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mDiscount Create (0.1ms)[0m  [1m[32mINSERT INTO "discounts" ("discount_type", "amount") VALUES (?, ?)[0m  [["discount_type", 0], ["amount", 7.0]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mCombo Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "combos" WHERE "combos"."name" = ? LIMIT ?[0m  [["name", "Espresso + Bagel"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mCombo Create (0.1ms)[0m  [1m[32mINSERT INTO "combos" ("name", "active") VALUES (?, ?)[0m  [["name", "Espresso + Bagel"], ["active", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."name" = ? ORDER BY "products"."id" ASC LIMIT ?[0m  [["name", "Espresso"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCombo Load (0.0ms)[0m  [1m[34mSELECT "combos".* FROM "combos" WHERE "combos"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."name" = ? ORDER BY "products"."id" ASC LIMIT ?[0m  [["name", "Bagel"], ["LIMIT", 1]]
  [1m[36mDiscount Load (0.0ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" WHERE "discounts"."discount_type" = ? AND "discounts"."amount" = ? ORDER BY "discounts"."id" ASC LIMIT ?[0m  [["discount_type", 1], ["amount", 10.0], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCombo Load (0.0ms)[0m  [1m[34mSELECT "combos".* FROM "combos" WHERE "combos"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mDiscount Load (0.0ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" WHERE "discounts"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mProductCombo Create (0.1ms)[0m  [1m[32mINSERT INTO "product_combos" ("product_id", "combo_id", "discount_id") VALUES (?, ?, ?)[0m  [["product_id", 3], ["combo_id", 1], ["discount_id", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mCombo Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "combos" WHERE "combos"."name" = ? LIMIT ?[0m  [["name", "Mocka + Bagel"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mCombo Create (0.1ms)[0m  [1m[32mINSERT INTO "combos" ("name", "active") VALUES (?, ?)[0m  [["name", "Mocka + Bagel"], ["active", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."name" = ? ORDER BY "products"."id" ASC LIMIT ?[0m  [["name", "Mocka"], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCombo Load (0.0ms)[0m  [1m[34mSELECT "combos".* FROM "combos" WHERE "combos"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."name" = ? ORDER BY "products"."id" ASC LIMIT ?[0m  [["name", "Bagel"], ["LIMIT", 1]]
  [1m[36mDiscount Load (0.0ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" WHERE "discounts"."discount_type" = ? AND "discounts"."amount" = ? ORDER BY "discounts"."id" ASC LIMIT ?[0m  [["discount_type", 0], ["amount", 7.0], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mCombo Load (0.0ms)[0m  [1m[34mSELECT "combos".* FROM "combos" WHERE "combos"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mDiscount Load (0.0ms)[0m  [1m[34mSELECT "discounts".* FROM "discounts" WHERE "discounts"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mProductCombo Create (0.2ms)[0m  [1m[32mINSERT INTO "product_combos" ("product_id", "combo_id", "discount_id") VALUES (?, ?, ?)[0m  [["product_id", 3], ["combo_id", 2], ["discount_id", 2]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mCustomer Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "customers"[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mCustomer Create (0.1ms)[0m  [1m[32mINSERT INTO "customers" ("first_name", "last_name", "contact_type", "contact") VALUES (?, ?, ?, ?)[0m  [["first_name", "F Name"], ["last_name", nil], ["contact_type", 1], ["contact", "email@email.email"]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Espresso"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Mocka"], ["LIMIT", 1]]
  [1m[36mProduct Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "products" WHERE "products"."name" = ? LIMIT ?[0m  [["name", "Bagel"], ["LIMIT", 1]]
  [1m[36mDiscount Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "discounts" WHERE "discounts"."discount_type" = ? AND "discounts"."amount" = ? LIMIT ?[0m  [["discount_type", 1], ["amount", 10.0], ["LIMIT", 1]]
  [1m[36mDiscount Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "discounts" WHERE "discounts"."discount_type" = ? AND "discounts"."amount" = ? LIMIT ?[0m  [["discount_type", 0], ["amount", 7.0], ["LIMIT", 1]]
  [1m[36mCombo Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "combos" WHERE "combos"."name" = ? LIMIT ?[0m  [["name", "Espresso + Bagel"], ["LIMIT", 1]]
  [1m[36mCombo Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "combos" WHERE "combos"."name" = ? LIMIT ?[0m  [["name", "Mocka + Bagel"], ["LIMIT", 1]]
  [1m[36mCustomer Count (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "customers"[0m
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers" ORDER BY "customers"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mCustomer Load (0.5ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrder Create (0.4ms)[0m  [1m[32mINSERT INTO "orders" ("status", "customer_id", "final_price") VALUES (?, ?, ?)[0m  [["status", 0], ["customer_id", 1], ["final_price", 0.0]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrderProduct Create (0.4ms)[0m  [1m[32mINSERT INTO "order_products" ("order_id", "product_id", "amount") VALUES (?, ?, ?)[0m  [["order_id", 1], ["product_id", 1], ["amount", nil]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrderProduct Create (0.3ms)[0m  [1m[32mINSERT INTO "order_products" ("order_id", "product_id", "amount") VALUES (?, ?, ?)[0m  [["order_id", 1], ["product_id", 1], ["amount", 1]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mOrderProduct Load (0.6ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" ORDER BY "order_products"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mOrderProduct Destroy (0.2ms)[0m  [1m[31mDELETE FROM "order_products" WHERE "order_products"."id" = ?[0m  [["id", 1]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrder Load (0.1ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrderProduct Create (0.4ms)[0m  [1m[32mINSERT INTO "order_products" ("order_id", "product_id", "amount") VALUES (?, ?, ?)[0m  [["order_id", 1], ["product_id", 1], ["amount", 1]]
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mOrderProduct Load (0.1ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."order_id" = ?[0m  [["order_id", 1]]
  [1m[36mOrderProduct Load (0.3ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" ORDER BY "order_products"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mOrderProduct Destroy (0.5ms)[0m  [1m[31mDELETE FROM "order_products" WHERE "order_products"."id" = ?[0m  [["id", 2]]
  [1m[36mTRANSACTION (1.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrderProduct Load (0.1ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."order_id" = ?[0m  [["order_id", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrder Load (1.6ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrderProduct Create (0.2ms)[0m  [1m[32mINSERT INTO "order_products" ("order_id", "product_id", "amount") VALUES (?, ?, ?)[0m  [["order_id", 1], ["product_id", 1], ["amount", 1]]
  [1m[36mOrderProduct Load (0.0ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."order_id" = ?[0m  [["order_id", 1]]
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mOrderProduct Load (0.4ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" ORDER BY "order_products"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mOrderProduct Destroy (0.2ms)[0m  [1m[31mDELETE FROM "order_products" WHERE "order_products"."id" = ?[0m  [["id", 3]]
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrderProduct Load (0.0ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."order_id" = ?[0m  [["order_id", 1]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrderProduct Create (0.2ms)[0m  [1m[32mINSERT INTO "order_products" ("order_id", "product_id", "amount") VALUES (?, ?, ?)[0m  [["order_id", 1], ["product_id", 1], ["amount", 1]]
  [1m[36mOrderProduct Load (0.0ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."order_id" = ?[0m  [["order_id", 1]]
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mOrderProduct Load (0.2ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" ORDER BY "order_products"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mOrderProduct Destroy (0.7ms)[0m  [1m[31mDELETE FROM "order_products" WHERE "order_products"."id" = ?[0m  [["id", 4]]
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrderProduct Load (0.0ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."order_id" = ?[0m  [["order_id", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mOrder Count (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
Started POST "/order/1/products?product_id=1" for 127.0.0.1 at 2022-10-22 18:16:55 -0500
  [1m[36mActiveRecord::SchemaMigration Pluck (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActionController::RoutingError (No route matches [POST] "/order/1/products"):
  
Started POST "/orders/1/products?product_id=1" for 127.0.0.1 at 2022-10-22 18:17:16 -0500
  
AbstractController::ActionNotFound (The action 'create' could not be found for ProductsController):
  
actionpack (7.0.4) lib/abstract_controller/base.rb:146:in `process'
actionview (7.0.4) lib/action_view/rendering.rb:39:in `process'
actionpack (7.0.4) lib/action_controller/metal.rb:188:in `dispatch'
actionpack (7.0.4) lib/action_controller/metal.rb:251:in `dispatch'
actionpack (7.0.4) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'
actionpack (7.0.4) lib/action_dispatch/routing/route_set.rb:32:in `serve'
actionpack (7.0.4) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (7.0.4) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (7.0.4) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (7.0.4) lib/action_dispatch/routing/route_set.rb:852:in `call'
rack (2.2.4) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.2.4) lib/rack/etag.rb:27:in `call'
rack (2.2.4) lib/rack/conditional_get.rb:40:in `call'
rack (2.2.4) lib/rack/head.rb:12:in `call'
actionpack (7.0.4) lib/action_dispatch/http/permissions_policy.rb:38:in `call'
actionpack (7.0.4) lib/action_dispatch/http/content_security_policy.rb:36:in `call'
rack (2.2.4) lib/rack/session/abstract/id.rb:266:in `context'
rack (2.2.4) lib/rack/session/abstract/id.rb:260:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/cookies.rb:696:in `call'
activerecord (7.0.4) lib/active_record/migration.rb:603:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (7.0.4) lib/active_support/callbacks.rb:99:in `run_callbacks'
actionpack (7.0.4) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/actionable_exceptions.rb:17:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/debug_exceptions.rb:28:in `call'
web-console (4.2.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.0) lib/web_console/middleware.rb:17:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/show_exceptions.rb:26:in `call'
railties (7.0.4) lib/rails/rack/logger.rb:40:in `call_app'
railties (7.0.4) lib/rails/rack/logger.rb:25:in `block in call'
activesupport (7.0.4) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (7.0.4) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (7.0.4) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (7.0.4) lib/rails/rack/logger.rb:25:in `call'
sprockets-rails (3.4.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/remote_ip.rb:93:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.4) lib/rack/method_override.rb:24:in `call'
rack (2.2.4) lib/rack/runtime.rb:22:in `call'
activesupport (7.0.4) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/server_timing.rb:61:in `block in call'
actionpack (7.0.4) lib/action_dispatch/middleware/server_timing.rb:26:in `collect_events'
actionpack (7.0.4) lib/action_dispatch/middleware/server_timing.rb:60:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/static.rb:23:in `call'
rack (2.2.4) lib/rack/sendfile.rb:110:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/host_authorization.rb:137:in `call'
railties (7.0.4) lib/rails/engine.rb:530:in `call'
puma (5.6.5) lib/puma/configuration.rb:252:in `call'
puma (5.6.5) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.5) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.5) lib/puma/request.rb:76:in `handle_request'
puma (5.6.5) lib/puma/server.rb:443:in `process_client'
puma (5.6.5) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started POST "/orders/1/products?product_id=1" for 127.0.0.1 at 2022-10-22 18:17:49 -0500
  
AbstractController::ActionNotFound (The action 'create' could not be found for ProductsController):
  
actionpack (7.0.4) lib/abstract_controller/base.rb:146:in `process'
actionview (7.0.4) lib/action_view/rendering.rb:39:in `process'
actionpack (7.0.4) lib/action_controller/metal.rb:188:in `dispatch'
actionpack (7.0.4) lib/action_controller/metal.rb:251:in `dispatch'
actionpack (7.0.4) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'
actionpack (7.0.4) lib/action_dispatch/routing/route_set.rb:32:in `serve'
actionpack (7.0.4) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (7.0.4) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (7.0.4) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (7.0.4) lib/action_dispatch/routing/route_set.rb:852:in `call'
rack (2.2.4) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.2.4) lib/rack/etag.rb:27:in `call'
rack (2.2.4) lib/rack/conditional_get.rb:40:in `call'
rack (2.2.4) lib/rack/head.rb:12:in `call'
actionpack (7.0.4) lib/action_dispatch/http/permissions_policy.rb:38:in `call'
actionpack (7.0.4) lib/action_dispatch/http/content_security_policy.rb:36:in `call'
rack (2.2.4) lib/rack/session/abstract/id.rb:266:in `context'
rack (2.2.4) lib/rack/session/abstract/id.rb:260:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/cookies.rb:696:in `call'
activerecord (7.0.4) lib/active_record/migration.rb:603:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (7.0.4) lib/active_support/callbacks.rb:99:in `run_callbacks'
actionpack (7.0.4) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/actionable_exceptions.rb:17:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/debug_exceptions.rb:28:in `call'
web-console (4.2.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.0) lib/web_console/middleware.rb:17:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/show_exceptions.rb:26:in `call'
railties (7.0.4) lib/rails/rack/logger.rb:40:in `call_app'
railties (7.0.4) lib/rails/rack/logger.rb:25:in `block in call'
activesupport (7.0.4) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (7.0.4) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (7.0.4) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (7.0.4) lib/rails/rack/logger.rb:25:in `call'
sprockets-rails (3.4.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/remote_ip.rb:93:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.4) lib/rack/method_override.rb:24:in `call'
rack (2.2.4) lib/rack/runtime.rb:22:in `call'
activesupport (7.0.4) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/server_timing.rb:61:in `block in call'
actionpack (7.0.4) lib/action_dispatch/middleware/server_timing.rb:26:in `collect_events'
actionpack (7.0.4) lib/action_dispatch/middleware/server_timing.rb:60:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/static.rb:23:in `call'
rack (2.2.4) lib/rack/sendfile.rb:110:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/host_authorization.rb:137:in `call'
railties (7.0.4) lib/rails/engine.rb:530:in `call'
puma (5.6.5) lib/puma/configuration.rb:252:in `call'
puma (5.6.5) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.5) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.5) lib/puma/request.rb:76:in `handle_request'
puma (5.6.5) lib/puma/server.rb:443:in `process_client'
puma (5.6.5) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started POST "/orders/1/products?product_id=1" for 127.0.0.1 at 2022-10-22 18:19:59 -0500
Processing by Orders::ProductsController#create as */*
  Parameters: {"product_id"=>"1", "order_id"=>"1"}
Can't verify CSRF token authenticity.
Completed 422 Unprocessable Entity in 1ms (Allocations: 543)


  
ActionController::InvalidAuthenticityToken (Can't verify CSRF token authenticity.):
  
actionpack (7.0.4) lib/action_controller/metal/request_forgery_protection.rb:251:in `handle_unverified_request'
actionpack (7.0.4) lib/action_controller/metal/request_forgery_protection.rb:284:in `handle_unverified_request'
actionpack (7.0.4) lib/action_controller/metal/request_forgery_protection.rb:273:in `verify_authenticity_token'
activesupport (7.0.4) lib/active_support/callbacks.rb:400:in `block in make_lambda'
activesupport (7.0.4) lib/active_support/callbacks.rb:199:in `block (2 levels) in halting'
actionpack (7.0.4) lib/abstract_controller/callbacks.rb:34:in `block (2 levels) in <module:Callbacks>'
activesupport (7.0.4) lib/active_support/callbacks.rb:200:in `block in halting'
activesupport (7.0.4) lib/active_support/callbacks.rb:595:in `block in invoke_before'
activesupport (7.0.4) lib/active_support/callbacks.rb:595:in `each'
activesupport (7.0.4) lib/active_support/callbacks.rb:595:in `invoke_before'
activesupport (7.0.4) lib/active_support/callbacks.rb:116:in `block in run_callbacks'
activesupport (7.0.4) lib/active_support/callbacks.rb:138:in `run_callbacks'
actionpack (7.0.4) lib/abstract_controller/callbacks.rb:233:in `process_action'
actionpack (7.0.4) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (7.0.4) lib/action_controller/metal/instrumentation.rb:67:in `block in process_action'
activesupport (7.0.4) lib/active_support/notifications.rb:206:in `block in instrument'
activesupport (7.0.4) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (7.0.4) lib/active_support/notifications.rb:206:in `instrument'
actionpack (7.0.4) lib/action_controller/metal/instrumentation.rb:66:in `process_action'
actionpack (7.0.4) lib/action_controller/metal/params_wrapper.rb:259:in `process_action'
activerecord (7.0.4) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (7.0.4) lib/abstract_controller/base.rb:151:in `process'
actionview (7.0.4) lib/action_view/rendering.rb:39:in `process'
actionpack (7.0.4) lib/action_controller/metal.rb:188:in `dispatch'
actionpack (7.0.4) lib/action_controller/metal.rb:251:in `dispatch'
actionpack (7.0.4) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'
actionpack (7.0.4) lib/action_dispatch/routing/route_set.rb:32:in `serve'
actionpack (7.0.4) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (7.0.4) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (7.0.4) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (7.0.4) lib/action_dispatch/routing/route_set.rb:852:in `call'
rack (2.2.4) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.2.4) lib/rack/etag.rb:27:in `call'
rack (2.2.4) lib/rack/conditional_get.rb:40:in `call'
rack (2.2.4) lib/rack/head.rb:12:in `call'
actionpack (7.0.4) lib/action_dispatch/http/permissions_policy.rb:38:in `call'
actionpack (7.0.4) lib/action_dispatch/http/content_security_policy.rb:36:in `call'
rack (2.2.4) lib/rack/session/abstract/id.rb:266:in `context'
rack (2.2.4) lib/rack/session/abstract/id.rb:260:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/cookies.rb:696:in `call'
activerecord (7.0.4) lib/active_record/migration.rb:603:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (7.0.4) lib/active_support/callbacks.rb:99:in `run_callbacks'
actionpack (7.0.4) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/actionable_exceptions.rb:17:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/debug_exceptions.rb:28:in `call'
web-console (4.2.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.0) lib/web_console/middleware.rb:17:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/show_exceptions.rb:26:in `call'
railties (7.0.4) lib/rails/rack/logger.rb:40:in `call_app'
railties (7.0.4) lib/rails/rack/logger.rb:25:in `block in call'
activesupport (7.0.4) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (7.0.4) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (7.0.4) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (7.0.4) lib/rails/rack/logger.rb:25:in `call'
sprockets-rails (3.4.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/remote_ip.rb:93:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.4) lib/rack/method_override.rb:24:in `call'
rack (2.2.4) lib/rack/runtime.rb:22:in `call'
activesupport (7.0.4) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/server_timing.rb:61:in `block in call'
actionpack (7.0.4) lib/action_dispatch/middleware/server_timing.rb:26:in `collect_events'
actionpack (7.0.4) lib/action_dispatch/middleware/server_timing.rb:60:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/static.rb:23:in `call'
rack (2.2.4) lib/rack/sendfile.rb:110:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/host_authorization.rb:137:in `call'
railties (7.0.4) lib/rails/engine.rb:530:in `call'
puma (5.6.5) lib/puma/configuration.rb:252:in `call'
puma (5.6.5) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.5) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.5) lib/puma/request.rb:76:in `handle_request'
puma (5.6.5) lib/puma/server.rb:443:in `process_client'
puma (5.6.5) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started POST "/orders/1/products?product_id=1" for 127.0.0.1 at 2022-10-22 18:20:13 -0500
  [1m[36mActiveRecord::SchemaMigration Pluck (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Orders::ProductsController#create as */*
  Parameters: {"product_id"=>"1", "order_id"=>"1"}
Can't verify CSRF token authenticity.
Completed 422 Unprocessable Entity in 0ms (ActiveRecord: 0.0ms | Allocations: 560)


  
ActionController::InvalidAuthenticityToken (Can't verify CSRF token authenticity.):
  
actionpack (7.0.4) lib/action_controller/metal/request_forgery_protection.rb:251:in `handle_unverified_request'
actionpack (7.0.4) lib/action_controller/metal/request_forgery_protection.rb:284:in `handle_unverified_request'
actionpack (7.0.4) lib/action_controller/metal/request_forgery_protection.rb:273:in `verify_authenticity_token'
activesupport (7.0.4) lib/active_support/callbacks.rb:400:in `block in make_lambda'
activesupport (7.0.4) lib/active_support/callbacks.rb:199:in `block (2 levels) in halting'
actionpack (7.0.4) lib/abstract_controller/callbacks.rb:34:in `block (2 levels) in <module:Callbacks>'
activesupport (7.0.4) lib/active_support/callbacks.rb:200:in `block in halting'
activesupport (7.0.4) lib/active_support/callbacks.rb:595:in `block in invoke_before'
activesupport (7.0.4) lib/active_support/callbacks.rb:595:in `each'
activesupport (7.0.4) lib/active_support/callbacks.rb:595:in `invoke_before'
activesupport (7.0.4) lib/active_support/callbacks.rb:116:in `block in run_callbacks'
activesupport (7.0.4) lib/active_support/callbacks.rb:138:in `run_callbacks'
actionpack (7.0.4) lib/abstract_controller/callbacks.rb:233:in `process_action'
actionpack (7.0.4) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (7.0.4) lib/action_controller/metal/instrumentation.rb:67:in `block in process_action'
activesupport (7.0.4) lib/active_support/notifications.rb:206:in `block in instrument'
activesupport (7.0.4) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (7.0.4) lib/active_support/notifications.rb:206:in `instrument'
actionpack (7.0.4) lib/action_controller/metal/instrumentation.rb:66:in `process_action'
actionpack (7.0.4) lib/action_controller/metal/params_wrapper.rb:259:in `process_action'
activerecord (7.0.4) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (7.0.4) lib/abstract_controller/base.rb:151:in `process'
actionview (7.0.4) lib/action_view/rendering.rb:39:in `process'
actionpack (7.0.4) lib/action_controller/metal.rb:188:in `dispatch'
actionpack (7.0.4) lib/action_controller/metal.rb:251:in `dispatch'
actionpack (7.0.4) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'
actionpack (7.0.4) lib/action_dispatch/routing/route_set.rb:32:in `serve'
actionpack (7.0.4) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (7.0.4) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (7.0.4) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (7.0.4) lib/action_dispatch/routing/route_set.rb:852:in `call'
rack (2.2.4) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.2.4) lib/rack/etag.rb:27:in `call'
rack (2.2.4) lib/rack/conditional_get.rb:40:in `call'
rack (2.2.4) lib/rack/head.rb:12:in `call'
actionpack (7.0.4) lib/action_dispatch/http/permissions_policy.rb:38:in `call'
actionpack (7.0.4) lib/action_dispatch/http/content_security_policy.rb:36:in `call'
rack (2.2.4) lib/rack/session/abstract/id.rb:266:in `context'
rack (2.2.4) lib/rack/session/abstract/id.rb:260:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/cookies.rb:696:in `call'
activerecord (7.0.4) lib/active_record/migration.rb:603:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (7.0.4) lib/active_support/callbacks.rb:99:in `run_callbacks'
actionpack (7.0.4) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/actionable_exceptions.rb:17:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/debug_exceptions.rb:28:in `call'
web-console (4.2.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.0) lib/web_console/middleware.rb:17:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/show_exceptions.rb:26:in `call'
railties (7.0.4) lib/rails/rack/logger.rb:40:in `call_app'
railties (7.0.4) lib/rails/rack/logger.rb:25:in `block in call'
activesupport (7.0.4) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (7.0.4) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (7.0.4) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (7.0.4) lib/rails/rack/logger.rb:25:in `call'
sprockets-rails (3.4.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/remote_ip.rb:93:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.4) lib/rack/method_override.rb:24:in `call'
rack (2.2.4) lib/rack/runtime.rb:22:in `call'
activesupport (7.0.4) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/server_timing.rb:61:in `block in call'
actionpack (7.0.4) lib/action_dispatch/middleware/server_timing.rb:26:in `collect_events'
actionpack (7.0.4) lib/action_dispatch/middleware/server_timing.rb:60:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/static.rb:23:in `call'
rack (2.2.4) lib/rack/sendfile.rb:110:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/host_authorization.rb:137:in `call'
railties (7.0.4) lib/rails/engine.rb:530:in `call'
puma (5.6.5) lib/puma/configuration.rb:252:in `call'
puma (5.6.5) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.5) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.5) lib/puma/request.rb:76:in `handle_request'
puma (5.6.5) lib/puma/server.rb:443:in `process_client'
puma (5.6.5) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started GET "/products" for 127.0.0.1 at 2022-10-22 18:20:45 -0500
Processing by ProductsController#index as */*
  [1m[36mProduct Load (0.6ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE (storage_amount > 0)[0m
  ↳ app/controllers/products_controller.rb:12:in `index'
  [1m[36mProductCombo Load (0.6ms)[0m  [1m[34mSELECT "product_combos".* FROM "product_combos" WHERE "product_combos"."product_id" IN (?, ?, ?)[0m  [["product_id", 1], ["product_id", 2], ["product_id", 3]]
  ↳ app/controllers/products_controller.rb:12:in `index'
  [1m[36mCombo Load (0.1ms)[0m  [1m[34mSELECT "combos".* FROM "combos" WHERE "combos"."id" IN (?, ?)[0m  [["id", 1], ["id", 2]]
  ↳ app/controllers/products_controller.rb:12:in `index'
Completed 200 OK in 56ms (Views: 0.9ms | ActiveRecord: 2.0ms | Allocations: 66331)


Started POST "/orders/1/products?product_id=1" for 127.0.0.1 at 2022-10-22 18:20:52 -0500
Processing by Orders::ProductsController#create as */*
  Parameters: {"product_id"=>"1", "order_id"=>"1"}
Can't verify CSRF token authenticity.
Completed 422 Unprocessable Entity in 2ms (ActiveRecord: 0.0ms | Allocations: 444)


  
ActionController::InvalidAuthenticityToken (Can't verify CSRF token authenticity.):
  
actionpack (7.0.4) lib/action_controller/metal/request_forgery_protection.rb:251:in `handle_unverified_request'
actionpack (7.0.4) lib/action_controller/metal/request_forgery_protection.rb:284:in `handle_unverified_request'
actionpack (7.0.4) lib/action_controller/metal/request_forgery_protection.rb:273:in `verify_authenticity_token'
activesupport (7.0.4) lib/active_support/callbacks.rb:400:in `block in make_lambda'
activesupport (7.0.4) lib/active_support/callbacks.rb:199:in `block (2 levels) in halting'
actionpack (7.0.4) lib/abstract_controller/callbacks.rb:34:in `block (2 levels) in <module:Callbacks>'
activesupport (7.0.4) lib/active_support/callbacks.rb:200:in `block in halting'
activesupport (7.0.4) lib/active_support/callbacks.rb:595:in `block in invoke_before'
activesupport (7.0.4) lib/active_support/callbacks.rb:595:in `each'
activesupport (7.0.4) lib/active_support/callbacks.rb:595:in `invoke_before'
activesupport (7.0.4) lib/active_support/callbacks.rb:116:in `block in run_callbacks'
activesupport (7.0.4) lib/active_support/callbacks.rb:138:in `run_callbacks'
actionpack (7.0.4) lib/abstract_controller/callbacks.rb:233:in `process_action'
actionpack (7.0.4) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (7.0.4) lib/action_controller/metal/instrumentation.rb:67:in `block in process_action'
activesupport (7.0.4) lib/active_support/notifications.rb:206:in `block in instrument'
activesupport (7.0.4) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (7.0.4) lib/active_support/notifications.rb:206:in `instrument'
actionpack (7.0.4) lib/action_controller/metal/instrumentation.rb:66:in `process_action'
actionpack (7.0.4) lib/action_controller/metal/params_wrapper.rb:259:in `process_action'
activerecord (7.0.4) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (7.0.4) lib/abstract_controller/base.rb:151:in `process'
actionview (7.0.4) lib/action_view/rendering.rb:39:in `process'
actionpack (7.0.4) lib/action_controller/metal.rb:188:in `dispatch'
actionpack (7.0.4) lib/action_controller/metal.rb:251:in `dispatch'
actionpack (7.0.4) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'
actionpack (7.0.4) lib/action_dispatch/routing/route_set.rb:32:in `serve'
actionpack (7.0.4) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (7.0.4) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (7.0.4) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (7.0.4) lib/action_dispatch/routing/route_set.rb:852:in `call'
rack (2.2.4) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.2.4) lib/rack/etag.rb:27:in `call'
rack (2.2.4) lib/rack/conditional_get.rb:40:in `call'
rack (2.2.4) lib/rack/head.rb:12:in `call'
actionpack (7.0.4) lib/action_dispatch/http/permissions_policy.rb:38:in `call'
actionpack (7.0.4) lib/action_dispatch/http/content_security_policy.rb:36:in `call'
rack (2.2.4) lib/rack/session/abstract/id.rb:266:in `context'
rack (2.2.4) lib/rack/session/abstract/id.rb:260:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/cookies.rb:696:in `call'
activerecord (7.0.4) lib/active_record/migration.rb:603:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (7.0.4) lib/active_support/callbacks.rb:99:in `run_callbacks'
actionpack (7.0.4) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/actionable_exceptions.rb:17:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/debug_exceptions.rb:28:in `call'
web-console (4.2.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.0) lib/web_console/middleware.rb:17:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/show_exceptions.rb:26:in `call'
railties (7.0.4) lib/rails/rack/logger.rb:40:in `call_app'
railties (7.0.4) lib/rails/rack/logger.rb:25:in `block in call'
activesupport (7.0.4) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (7.0.4) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (7.0.4) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (7.0.4) lib/rails/rack/logger.rb:25:in `call'
sprockets-rails (3.4.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/remote_ip.rb:93:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.4) lib/rack/method_override.rb:24:in `call'
rack (2.2.4) lib/rack/runtime.rb:22:in `call'
activesupport (7.0.4) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/server_timing.rb:61:in `block in call'
actionpack (7.0.4) lib/action_dispatch/middleware/server_timing.rb:26:in `collect_events'
actionpack (7.0.4) lib/action_dispatch/middleware/server_timing.rb:60:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/static.rb:23:in `call'
rack (2.2.4) lib/rack/sendfile.rb:110:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/host_authorization.rb:137:in `call'
railties (7.0.4) lib/rails/engine.rb:530:in `call'
puma (5.6.5) lib/puma/configuration.rb:252:in `call'
puma (5.6.5) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.5) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.5) lib/puma/request.rb:76:in `handle_request'
puma (5.6.5) lib/puma/server.rb:443:in `process_client'
puma (5.6.5) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started POST "/orders/1/products?product_id=1" for 127.0.0.1 at 2022-10-22 18:21:26 -0500
  
ArgumentError (After process_action callback :any_authenticity_token_valid? has not been defined):
  
app/controllers/application_controller.rb:2:in `<class:ApplicationController>'
app/controllers/application_controller.rb:1:in `<main>'
app/controllers/orders/products_controller.rb:5:in `<module:Orders>'
app/controllers/orders/products_controller.rb:3:in `<main>'
Started POST "/orders/1/products?product_id=1" for 127.0.0.1 at 2022-10-22 18:21:49 -0500
Processing by Orders::ProductsController#create as */*
  Parameters: {"product_id"=>"1", "order_id"=>"1"}
Can't verify CSRF token authenticity.
Completed 422 Unprocessable Entity in 0ms (Allocations: 475)


  
ActionController::InvalidAuthenticityToken (Can't verify CSRF token authenticity.):
  
actionpack (7.0.4) lib/action_controller/metal/request_forgery_protection.rb:251:in `handle_unverified_request'
actionpack (7.0.4) lib/action_controller/metal/request_forgery_protection.rb:284:in `handle_unverified_request'
actionpack (7.0.4) lib/action_controller/metal/request_forgery_protection.rb:273:in `verify_authenticity_token'
activesupport (7.0.4) lib/active_support/callbacks.rb:400:in `block in make_lambda'
activesupport (7.0.4) lib/active_support/callbacks.rb:199:in `block (2 levels) in halting'
actionpack (7.0.4) lib/abstract_controller/callbacks.rb:34:in `block (2 levels) in <module:Callbacks>'
activesupport (7.0.4) lib/active_support/callbacks.rb:200:in `block in halting'
activesupport (7.0.4) lib/active_support/callbacks.rb:595:in `block in invoke_before'
activesupport (7.0.4) lib/active_support/callbacks.rb:595:in `each'
activesupport (7.0.4) lib/active_support/callbacks.rb:595:in `invoke_before'
activesupport (7.0.4) lib/active_support/callbacks.rb:116:in `block in run_callbacks'
activesupport (7.0.4) lib/active_support/callbacks.rb:138:in `run_callbacks'
actionpack (7.0.4) lib/abstract_controller/callbacks.rb:233:in `process_action'
actionpack (7.0.4) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (7.0.4) lib/action_controller/metal/instrumentation.rb:67:in `block in process_action'
activesupport (7.0.4) lib/active_support/notifications.rb:206:in `block in instrument'
activesupport (7.0.4) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (7.0.4) lib/active_support/notifications.rb:206:in `instrument'
actionpack (7.0.4) lib/action_controller/metal/instrumentation.rb:66:in `process_action'
actionpack (7.0.4) lib/action_controller/metal/params_wrapper.rb:259:in `process_action'
activerecord (7.0.4) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (7.0.4) lib/abstract_controller/base.rb:151:in `process'
actionview (7.0.4) lib/action_view/rendering.rb:39:in `process'
actionpack (7.0.4) lib/action_controller/metal.rb:188:in `dispatch'
actionpack (7.0.4) lib/action_controller/metal.rb:251:in `dispatch'
actionpack (7.0.4) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'
actionpack (7.0.4) lib/action_dispatch/routing/route_set.rb:32:in `serve'
actionpack (7.0.4) lib/action_dispatch/journey/router.rb:50:in `block in serve'
actionpack (7.0.4) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (7.0.4) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (7.0.4) lib/action_dispatch/routing/route_set.rb:852:in `call'
rack (2.2.4) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.2.4) lib/rack/etag.rb:27:in `call'
rack (2.2.4) lib/rack/conditional_get.rb:40:in `call'
rack (2.2.4) lib/rack/head.rb:12:in `call'
actionpack (7.0.4) lib/action_dispatch/http/permissions_policy.rb:38:in `call'
actionpack (7.0.4) lib/action_dispatch/http/content_security_policy.rb:36:in `call'
rack (2.2.4) lib/rack/session/abstract/id.rb:266:in `context'
rack (2.2.4) lib/rack/session/abstract/id.rb:260:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/cookies.rb:696:in `call'
activerecord (7.0.4) lib/active_record/migration.rb:603:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (7.0.4) lib/active_support/callbacks.rb:99:in `run_callbacks'
actionpack (7.0.4) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/actionable_exceptions.rb:17:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/debug_exceptions.rb:28:in `call'
web-console (4.2.0) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.0) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.0) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.0) lib/web_console/middleware.rb:17:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/show_exceptions.rb:26:in `call'
railties (7.0.4) lib/rails/rack/logger.rb:40:in `call_app'
railties (7.0.4) lib/rails/rack/logger.rb:25:in `block in call'
activesupport (7.0.4) lib/active_support/tagged_logging.rb:99:in `block in tagged'
activesupport (7.0.4) lib/active_support/tagged_logging.rb:37:in `tagged'
activesupport (7.0.4) lib/active_support/tagged_logging.rb:99:in `tagged'
railties (7.0.4) lib/rails/rack/logger.rb:25:in `call'
sprockets-rails (3.4.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/remote_ip.rb:93:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/request_id.rb:26:in `call'
rack (2.2.4) lib/rack/method_override.rb:24:in `call'
rack (2.2.4) lib/rack/runtime.rb:22:in `call'
activesupport (7.0.4) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/server_timing.rb:61:in `block in call'
actionpack (7.0.4) lib/action_dispatch/middleware/server_timing.rb:26:in `collect_events'
actionpack (7.0.4) lib/action_dispatch/middleware/server_timing.rb:60:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/static.rb:23:in `call'
rack (2.2.4) lib/rack/sendfile.rb:110:in `call'
actionpack (7.0.4) lib/action_dispatch/middleware/host_authorization.rb:137:in `call'
railties (7.0.4) lib/rails/engine.rb:530:in `call'
puma (5.6.5) lib/puma/configuration.rb:252:in `call'
puma (5.6.5) lib/puma/request.rb:77:in `block in handle_request'
puma (5.6.5) lib/puma/thread_pool.rb:340:in `with_force_shutdown'
puma (5.6.5) lib/puma/request.rb:76:in `handle_request'
puma (5.6.5) lib/puma/server.rb:443:in `process_client'
puma (5.6.5) lib/puma/thread_pool.rb:147:in `block in spawn_thread'
Started POST "/orders/1/products?product_id=1" for 127.0.0.1 at 2022-10-22 18:22:56 -0500
Processing by Orders::ProductsController#create as */*
  Parameters: {"product_id"=>"1", "order_id"=>"1"}
Can't verify CSRF token authenticity.
  [1m[36mOrderProduct Load (0.1ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."id" IS NULL LIMIT ?[0m  [["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:39:in `find_order_product'
Completed 500 Internal Server Error in 32ms (ActiveRecord: 1.0ms | Allocations: 18544)


  
ActiveModel::UnknownAttributeError (unknown attribute 'count' for OrderProduct.):
  
app/controllers/orders/products_controller.rb:12:in `create'
Started POST "/orders/1/products?product_id=1" for 127.0.0.1 at 2022-10-22 18:23:40 -0500
Processing by Orders::ProductsController#create as */*
  Parameters: {"product_id"=>"1", "order_id"=>"1"}
Can't verify CSRF token authenticity.
  [1m[36mOrderProduct Load (0.4ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:39:in `find_order_product'
Completed 500 Internal Server Error in 23ms (ActiveRecord: 1.9ms | Allocations: 6191)


  
ActiveModel::UnknownAttributeError (unknown attribute 'count' for OrderProduct.):
  
app/controllers/orders/products_controller.rb:12:in `create'
Started POST "/orders/1/products?product_id=1" for 127.0.0.1 at 2022-10-22 18:23:55 -0500
Processing by Orders::ProductsController#create as */*
  Parameters: {"product_id"=>"1", "order_id"=>"1"}
Can't verify CSRF token authenticity.
  [1m[36mOrderProduct Load (1.8ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:39:in `find_order_product'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/orders/products_controller.rb:12:in `create'
  [1m[36mProduct Load (1.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:12:in `create'
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:12:in `create'
  [1m[36mOrderProduct Create (1.1ms)[0m  [1m[32mINSERT INTO "order_products" ("order_id", "product_id", "amount") VALUES (?, ?, ?)[0m  [["order_id", 1], ["product_id", 1], ["amount", 1]]
  ↳ app/controllers/orders/products_controller.rb:12:in `create'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/orders/products_controller.rb:12:in `create'
  [1m[36mOrder Load (0.1ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:35:in `find_order'
Completed 500 Internal Server Error in 123ms (ActiveRecord: 7.4ms | Allocations: 37581)


  
NameError (OrderSerializer cannot resolve a serializer class for 'order_product'.  Attempted to find 'OrderProductSerializer'. Consider specifying the serializer directly through options[:serializer].):
  
app/controllers/orders/products_controller.rb:16:in `new'
app/controllers/orders/products_controller.rb:16:in `create'
Started POST "/orders/1/products?product_id=1" for 127.0.0.1 at 2022-10-22 18:24:18 -0500
Processing by Orders::ProductsController#create as */*
  Parameters: {"product_id"=>"1", "order_id"=>"1"}
Can't verify CSRF token authenticity.
  [1m[36mOrderProduct Load (0.2ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:39:in `find_order_product'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/orders/products_controller.rb:12:in `create'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:12:in `create'
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:12:in `create'
  [1m[36mOrderProduct Create (0.2ms)[0m  [1m[32mINSERT INTO "order_products" ("order_id", "product_id", "amount") VALUES (?, ?, ?)[0m  [["order_id", 1], ["product_id", 1], ["amount", 1]]
  ↳ app/controllers/orders/products_controller.rb:12:in `create'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/orders/products_controller.rb:12:in `create'
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:35:in `find_order'
Completed 500 Internal Server Error in 33ms (ActiveRecord: 2.6ms | Allocations: 23736)


  
NameError (OrderSerializer cannot resolve a serializer class for 'order_product'.  Attempted to find 'OrderProductSerializer'. Consider specifying the serializer directly through options[:serializer].):
  
app/controllers/orders/products_controller.rb:16:in `new'
app/controllers/orders/products_controller.rb:16:in `create'
  [1m[36mOrder Count (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "orders"[0m
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" ASC LIMIT ?[0m  [["LIMIT", 1]]
Started POST "/orders/1/products?product_id=1" for 127.0.0.1 at 2022-10-22 18:27:20 -0500
Processing by Orders::ProductsController#create as */*
  Parameters: {"product_id"=>"1", "order_id"=>"1"}
Can't verify CSRF token authenticity.
  [1m[36mOrderProduct Load (0.5ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:39:in `find_order_product'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/orders/products_controller.rb:12:in `create'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:12:in `create'
  [1m[36mOrder Load (0.1ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:12:in `create'
  [1m[36mOrderProduct Create (0.3ms)[0m  [1m[32mINSERT INTO "order_products" ("order_id", "product_id", "amount") VALUES (?, ?, ?)[0m  [["order_id", 1], ["product_id", 1], ["amount", 1]]
  ↳ app/controllers/orders/products_controller.rb:12:in `create'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/orders/products_controller.rb:12:in `create'
  [1m[36mOrder Load (0.1ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:35:in `find_order'
Completed 500 Internal Server Error in 90ms (ActiveRecord: 4.5ms | Allocations: 23750)


  
NameError (OrderSerializer cannot resolve a serializer class for 'order_product'.  Attempted to find 'OrderProductSerializer'. Consider specifying the serializer directly through options[:serializer].):
  
app/controllers/orders/products_controller.rb:16:in `new'
app/controllers/orders/products_controller.rb:16:in `create'
Started POST "/orders/1/products?product_id=1" for 127.0.0.1 at 2022-10-22 18:28:01 -0500
Processing by Orders::ProductsController#create as */*
  Parameters: {"product_id"=>"1", "order_id"=>"1"}
Can't verify CSRF token authenticity.
  [1m[36mOrderProduct Load (0.1ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:39:in `find_order_product'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/orders/products_controller.rb:12:in `create'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:12:in `create'
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:12:in `create'
  [1m[36mOrderProduct Create (0.4ms)[0m  [1m[32mINSERT INTO "order_products" ("order_id", "product_id", "amount") VALUES (?, ?, ?)[0m  [["order_id", 1], ["product_id", 1], ["amount", 1]]
  ↳ app/controllers/orders/products_controller.rb:12:in `create'
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/orders/products_controller.rb:12:in `create'
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:35:in `find_order'
Completed 500 Internal Server Error in 32ms (ActiveRecord: 4.0ms | Allocations: 23584)


  
NameError (uninitialized constant OrderSerializer::OrderProductSerializer):
  
app/serializers/order_serializer.rb:9:in `<class:OrderSerializer>'
app/serializers/order_serializer.rb:4:in `<main>'
app/controllers/orders/products_controller.rb:16:in `create'
Started POST "/orders/1/products?product_id=1" for 127.0.0.1 at 2022-10-22 18:28:57 -0500
Processing by Orders::ProductsController#create as */*
  Parameters: {"product_id"=>"1", "order_id"=>"1"}
Can't verify CSRF token authenticity.
  [1m[36mOrderProduct Load (1.7ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:39:in `find_order_product'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/orders/products_controller.rb:12:in `create'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:12:in `create'
  [1m[36mOrder Load (0.9ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:12:in `create'
  [1m[36mOrderProduct Create (0.3ms)[0m  [1m[32mINSERT INTO "order_products" ("order_id", "product_id", "amount") VALUES (?, ?, ?)[0m  [["order_id", 1], ["product_id", 1], ["amount", 1]]
  ↳ app/controllers/orders/products_controller.rb:12:in `create'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/orders/products_controller.rb:12:in `create'
  [1m[36mOrder Load (0.1ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:35:in `find_order'
  [1m[36mOrderProduct Pluck (0.3ms)[0m  [1m[34mSELECT "order_products"."id" FROM "order_products" WHERE "order_products"."order_id" = ?[0m  [["order_id", 1]]
  ↳ app/controllers/orders/products_controller.rb:19:in `create'
  [1m[36mOrderProduct Load (0.1ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."order_id" = ?[0m  [["order_id", 1]]
  ↳ app/controllers/orders/products_controller.rb:19:in `create'
Completed 200 OK in 136ms (Views: 0.3ms | ActiveRecord: 6.5ms | Allocations: 26178)


  [1m[36mOrderProduct Load (1.1ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products"[0m
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mOrderProduct Destroy (0.4ms)[0m  [1m[31mDELETE FROM "order_products" WHERE "order_products"."id" = ?[0m  [["id", 5]]
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mOrderProduct Destroy (0.1ms)[0m  [1m[31mDELETE FROM "order_products" WHERE "order_products"."id" = ?[0m  [["id", 6]]
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (2.6ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mOrderProduct Destroy (0.4ms)[0m  [1m[31mDELETE FROM "order_products" WHERE "order_products"."id" = ?[0m  [["id", 7]]
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mOrderProduct Destroy (0.1ms)[0m  [1m[31mDELETE FROM "order_products" WHERE "order_products"."id" = ?[0m  [["id", 8]]
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mOrderProduct Destroy (0.1ms)[0m  [1m[31mDELETE FROM "order_products" WHERE "order_products"."id" = ?[0m  [["id", 9]]
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[36mcommit transaction[0m
Started POST "/orders/1/products?product_id=1" for 127.0.0.1 at 2022-10-22 18:31:10 -0500
Processing by Orders::ProductsController#create as */*
  Parameters: {"product_id"=>"1", "order_id"=>"1"}
Can't verify CSRF token authenticity.
  [1m[36mOrderProduct Load (0.0ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."product_id" = ? AND "order_products"."order_id" = ? LIMIT ?[0m  [["product_id", 1], ["order_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:39:in `find_order_product'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/orders/products_controller.rb:12:in `create'
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:12:in `create'
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:12:in `create'
  [1m[36mOrderProduct Create (4.5ms)[0m  [1m[32mINSERT INTO "order_products" ("order_id", "product_id", "amount") VALUES (?, ?, ?)[0m  [["order_id", 1], ["product_id", 1], ["amount", 1]]
  ↳ app/controllers/orders/products_controller.rb:12:in `create'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/orders/products_controller.rb:12:in `create'
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:35:in `find_order'
  [1m[36mOrderProduct Pluck (0.1ms)[0m  [1m[34mSELECT "order_products"."id" FROM "order_products" WHERE "order_products"."order_id" = ?[0m  [["order_id", 1]]
  ↳ app/controllers/orders/products_controller.rb:19:in `create'
  [1m[36mOrderProduct Load (0.0ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."order_id" = ?[0m  [["order_id", 1]]
  ↳ app/controllers/orders/products_controller.rb:19:in `create'
Completed 200 OK in 31ms (Views: 0.2ms | ActiveRecord: 6.3ms | Allocations: 25771)


Started POST "/orders/1/products?product_id=1" for 127.0.0.1 at 2022-10-22 18:36:05 -0500
Processing by Orders::ProductsController#create as */*
  Parameters: {"product_id"=>"1", "order_id"=>"1"}
Can't verify CSRF token authenticity.
  [1m[36mOrderProduct Load (1.1ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."product_id" = ? AND "order_products"."order_id" = ? LIMIT ?[0m  [["product_id", 1], ["order_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:39:in `find_order_product'
Completed 500 Internal Server Error in 26ms (ActiveRecord: 1.1ms | Allocations: 1153)


  
ActiveModel::UnknownAttributeError (unknown attribute 'count' for OrderProduct.):
  
app/controllers/orders/products_controller.rb:10:in `create'
Started POST "/orders/1/products?product_id=1" for 127.0.0.1 at 2022-10-22 18:36:32 -0500
Processing by Orders::ProductsController#create as */*
  Parameters: {"product_id"=>"1", "order_id"=>"1"}
Can't verify CSRF token authenticity.
  [1m[36mOrderProduct Load (0.1ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."product_id" = ? AND "order_products"."order_id" = ? LIMIT ?[0m  [["product_id", 1], ["order_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:39:in `find_order_product'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/orders/products_controller.rb:10:in `create'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:10:in `create'
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:10:in `create'
  [1m[36mOrderProduct Update (1.2ms)[0m  [1m[33mUPDATE "order_products" SET "amount" = ? WHERE "order_products"."id" = ?[0m  [["amount", 2], ["id", 10]]
  ↳ app/controllers/orders/products_controller.rb:10:in `create'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/orders/products_controller.rb:10:in `create'
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:35:in `find_order'
  [1m[36mOrderProduct Pluck (0.2ms)[0m  [1m[34mSELECT "order_products"."id" FROM "order_products" WHERE "order_products"."order_id" = ?[0m  [["order_id", 1]]
  ↳ app/controllers/orders/products_controller.rb:19:in `create'
  [1m[36mOrderProduct Load (0.1ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."order_id" = ?[0m  [["order_id", 1]]
  ↳ app/controllers/orders/products_controller.rb:19:in `create'
Completed 200 OK in 199ms (Views: 0.4ms | ActiveRecord: 4.8ms | Allocations: 26045)


Started POST "/orders/1/products?product_id=1" for 127.0.0.1 at 2022-10-22 18:39:26 -0500
Processing by Orders::ProductsController#create as */*
  Parameters: {"product_id"=>"1", "order_id"=>"1"}
Can't verify CSRF token authenticity.
  [1m[36mOrderProduct Load (1.0ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."product_id" = ? AND "order_products"."order_id" = ? LIMIT ?[0m  [["product_id", 1], ["order_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:39:in `find_order_product'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/orders/products_controller.rb:10:in `create'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:10:in `create'
  [1m[36mOrder Load (0.1ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:10:in `create'
  [1m[36mOrderProduct Update (1.1ms)[0m  [1m[33mUPDATE "order_products" SET "amount" = ? WHERE "order_products"."id" = ?[0m  [["amount", 3], ["id", 10]]
  ↳ app/controllers/orders/products_controller.rb:10:in `create'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/orders/products_controller.rb:10:in `create'
  [1m[36mOrder Load (0.1ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:35:in `find_order'
  [1m[36mOrderProduct Pluck (0.1ms)[0m  [1m[34mSELECT "order_products"."id" FROM "order_products" WHERE "order_products"."order_id" = ?[0m  [["order_id", 1]]
  ↳ app/controllers/orders/products_controller.rb:19:in `create'
  [1m[36mOrderProduct Load (0.1ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."order_id" = ?[0m  [["order_id", 1]]
  ↳ app/controllers/orders/products_controller.rb:19:in `create'
Completed 200 OK in 84ms (Views: 0.3ms | ActiveRecord: 3.9ms | Allocations: 5716)


Started DELETE "/orders/1/products/1" for 127.0.0.1 at 2022-10-22 18:47:53 -0500
Processing by Orders::ProductsController#destroy as */*
  Parameters: {"order_id"=>"1", "id"=>"1"}
Can't verify CSRF token authenticity.
  [1m[36mOrderProduct Load (0.1ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."product_id" IS NULL AND "order_products"."order_id" = ? LIMIT ?[0m  [["order_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:45:in `find_order_product'
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:41:in `find_order'
  [1m[36mOrderProduct Pluck (0.2ms)[0m  [1m[34mSELECT "order_products"."id" FROM "order_products" WHERE "order_products"."order_id" = ?[0m  [["order_id", 1]]
  ↳ app/controllers/orders/products_controller.rb:35:in `destroy'
  [1m[36mOrderProduct Load (0.0ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."order_id" = ?[0m  [["order_id", 1]]
  ↳ app/controllers/orders/products_controller.rb:35:in `destroy'
Completed 200 OK in 32ms (Views: 0.2ms | ActiveRecord: 1.5ms | Allocations: 15376)


Started DELETE "/orders/1/products/1" for 127.0.0.1 at 2022-10-22 18:47:56 -0500
Processing by Orders::ProductsController#destroy as */*
  Parameters: {"order_id"=>"1", "id"=>"1"}
Can't verify CSRF token authenticity.
  [1m[36mOrderProduct Load (0.1ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."product_id" IS NULL AND "order_products"."order_id" = ? LIMIT ?[0m  [["order_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:45:in `find_order_product'
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:41:in `find_order'
  [1m[36mOrderProduct Pluck (0.1ms)[0m  [1m[34mSELECT "order_products"."id" FROM "order_products" WHERE "order_products"."order_id" = ?[0m  [["order_id", 1]]
  ↳ app/controllers/orders/products_controller.rb:35:in `destroy'
  [1m[36mOrderProduct Load (0.2ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."order_id" = ?[0m  [["order_id", 1]]
  ↳ app/controllers/orders/products_controller.rb:35:in `destroy'
Completed 200 OK in 11ms (Views: 0.3ms | ActiveRecord: 0.6ms | Allocations: 2580)


Started DELETE "/orders/1/products/1" for 127.0.0.1 at 2022-10-22 18:48:01 -0500
Processing by Orders::ProductsController#destroy as */*
  Parameters: {"order_id"=>"1", "id"=>"1"}
Can't verify CSRF token authenticity.
  [1m[36mOrderProduct Load (0.2ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."product_id" IS NULL AND "order_products"."order_id" = ? LIMIT ?[0m  [["order_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:45:in `find_order_product'
  [1m[36mOrder Load (0.1ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:41:in `find_order'
  [1m[36mOrderProduct Pluck (0.1ms)[0m  [1m[34mSELECT "order_products"."id" FROM "order_products" WHERE "order_products"."order_id" = ?[0m  [["order_id", 1]]
  ↳ app/controllers/orders/products_controller.rb:35:in `destroy'
  [1m[36mOrderProduct Load (0.1ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."order_id" = ?[0m  [["order_id", 1]]
  ↳ app/controllers/orders/products_controller.rb:35:in `destroy'
Completed 200 OK in 9ms (Views: 0.3ms | ActiveRecord: 0.5ms | Allocations: 2580)


  [1m[36mOrderProduct Load (1.0ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" ORDER BY "order_products"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
Started DELETE "/orders/1/products/1" for 127.0.0.1 at 2022-10-22 18:48:52 -0500
Processing by Orders::ProductsController#destroy as */*
  Parameters: {"order_id"=>"1", "id"=>"1"}
Can't verify CSRF token authenticity.
  [1m[36mOrderProduct Load (0.2ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."product_id" IS NULL AND "order_products"."order_id" = ? LIMIT ?[0m  [["order_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:45:in `find_order_product'
  [1m[36mOrder Load (0.1ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:41:in `find_order'
  [1m[36mOrderProduct Pluck (0.0ms)[0m  [1m[34mSELECT "order_products"."id" FROM "order_products" WHERE "order_products"."order_id" = ?[0m  [["order_id", 1]]
  ↳ app/controllers/orders/products_controller.rb:35:in `destroy'
  [1m[36mOrderProduct Load (0.0ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."order_id" = ?[0m  [["order_id", 1]]
  ↳ app/controllers/orders/products_controller.rb:35:in `destroy'
Completed 200 OK in 10ms (Views: 0.6ms | ActiveRecord: 0.3ms | Allocations: 2580)


Started DELETE "/orders/1/products/1" for 127.0.0.1 at 2022-10-22 18:50:15 -0500
Processing by Orders::ProductsController#destroy as */*
  Parameters: {"order_id"=>"1", "id"=>"1"}
Can't verify CSRF token authenticity.
  [1m[36mOrderProduct Load (0.1ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."product_id" IS NULL AND "order_products"."order_id" = ? LIMIT ?[0m  [["order_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:45:in `find_order_product'
  [1m[36mOrder Load (0.8ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:41:in `find_order'
  [1m[36mOrderProduct Pluck (0.2ms)[0m  [1m[34mSELECT "order_products"."id" FROM "order_products" WHERE "order_products"."order_id" = ?[0m  [["order_id", 1]]
  ↳ app/controllers/orders/products_controller.rb:35:in `destroy'
  [1m[36mOrderProduct Load (0.1ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."order_id" = ?[0m  [["order_id", 1]]
  ↳ app/controllers/orders/products_controller.rb:35:in `destroy'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/serializers/order_product_serializer.rb:10:in `block in <class:OrderProductSerializer>'
Completed 200 OK in 116ms (Views: 0.5ms | ActiveRecord: 2.6ms | Allocations: 21471)


Started POST "/orders/1/products?id=1" for 127.0.0.1 at 2022-10-22 18:51:37 -0500
Processing by Orders::ProductsController#create as */*
  Parameters: {"id"=>"1", "order_id"=>"1"}
Can't verify CSRF token authenticity.
  [1m[36mOrderProduct Load (0.8ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."product_id" = ? AND "order_products"."order_id" = ? LIMIT ?[0m  [["product_id", 1], ["order_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:45:in `find_order_product'
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/orders/products_controller.rb:10:in `create'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:10:in `create'
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:10:in `create'
  [1m[36mOrderProduct Update (0.3ms)[0m  [1m[33mUPDATE "order_products" SET "amount" = ? WHERE "order_products"."id" = ?[0m  [["amount", 4], ["id", 10]]
  ↳ app/controllers/orders/products_controller.rb:10:in `create'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/orders/products_controller.rb:10:in `create'
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:41:in `find_order'
  [1m[36mOrderProduct Pluck (0.1ms)[0m  [1m[34mSELECT "order_products"."id" FROM "order_products" WHERE "order_products"."order_id" = ?[0m  [["order_id", 1]]
  ↳ app/controllers/orders/products_controller.rb:19:in `create'
  [1m[36mOrderProduct Load (0.0ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."order_id" = ?[0m  [["order_id", 1]]
  ↳ app/controllers/orders/products_controller.rb:19:in `create'
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/serializers/order_product_serializer.rb:10:in `block in <class:OrderProductSerializer>'
Completed 200 OK in 47ms (Views: 0.4ms | ActiveRecord: 5.1ms | Allocations: 26513)


Started POST "/orders/1/products?id=1" for 127.0.0.1 at 2022-10-22 18:52:41 -0500
Processing by Orders::ProductsController#create as */*
  Parameters: {"id"=>"1", "order_id"=>"1"}
Can't verify CSRF token authenticity.
  [1m[36mOrderProduct Load (0.7ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."product_id" = ? AND "order_products"."order_id" = ? LIMIT ?[0m  [["product_id", 1], ["order_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:45:in `find_order_product'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/orders/products_controller.rb:10:in `create'
  [1m[36mProduct Load (0.5ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:10:in `create'
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:10:in `create'
  [1m[36mOrderProduct Update (0.5ms)[0m  [1m[33mUPDATE "order_products" SET "amount" = ? WHERE "order_products"."id" = ?[0m  [["amount", 5], ["id", 10]]
  ↳ app/controllers/orders/products_controller.rb:10:in `create'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/orders/products_controller.rb:10:in `create'
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:41:in `find_order'
Completed 500 Internal Server Error in 126ms (ActiveRecord: 7.1ms | Allocations: 25299)


  
NoMethodError (undefined method `includes' for #<Order id: 1, status: "open", customer_id: 1, final_price: 0.0>):
  
app/controllers/orders/products_controller.rb:41:in `find_order'
app/controllers/orders/products_controller.rb:14:in `create'
Started POST "/orders/1/products?id=1" for 127.0.0.1 at 2022-10-22 18:52:55 -0500
Processing by Orders::ProductsController#create as */*
  Parameters: {"id"=>"1", "order_id"=>"1"}
Can't verify CSRF token authenticity.
  [1m[36mOrderProduct Load (0.3ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."product_id" = ? AND "order_products"."order_id" = ? LIMIT ?[0m  [["product_id", 1], ["order_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:45:in `find_order_product'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/orders/products_controller.rb:10:in `create'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:10:in `create'
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:10:in `create'
  [1m[36mOrderProduct Update (0.4ms)[0m  [1m[33mUPDATE "order_products" SET "amount" = ? WHERE "order_products"."id" = ?[0m  [["amount", 6], ["id", 10]]
  ↳ app/controllers/orders/products_controller.rb:10:in `create'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/orders/products_controller.rb:10:in `create'
  [1m[36mOrder Load (0.1ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:41:in `find_order'
  [1m[36mOrderProduct Load (0.2ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."order_id" = ?[0m  [["order_id", 1]]
  ↳ app/controllers/orders/products_controller.rb:41:in `find_order'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/orders/products_controller.rb:41:in `find_order'
Completed 200 OK in 57ms (Views: 0.4ms | ActiveRecord: 5.3ms | Allocations: 26572)


Started POST "/orders/1/products?id=1" for 127.0.0.1 at 2022-10-22 18:53:45 -0500
Processing by Orders::ProductsController#create as */*
  Parameters: {"id"=>"1", "order_id"=>"1"}
Can't verify CSRF token authenticity.
  [1m[36mOrderProduct Load (0.1ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."product_id" = ? AND "order_products"."order_id" = ? LIMIT ?[0m  [["product_id", 1], ["order_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:45:in `find_order_product'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/orders/products_controller.rb:10:in `create'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:10:in `create'
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:10:in `create'
  [1m[36mOrderProduct Update (0.2ms)[0m  [1m[33mUPDATE "order_products" SET "amount" = ? WHERE "order_products"."id" = ?[0m  [["amount", 7], ["id", 10]]
  ↳ app/controllers/orders/products_controller.rb:10:in `create'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/orders/products_controller.rb:10:in `create'
  [1m[36mOrder Load (0.1ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:41:in `find_order'
  [1m[36mOrderProduct Load (0.1ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."order_id" = ?[0m  [["order_id", 1]]
  ↳ app/controllers/orders/products_controller.rb:41:in `find_order'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/orders/products_controller.rb:41:in `find_order'
Completed 200 OK in 73ms (Views: 0.3ms | ActiveRecord: 3.3ms | Allocations: 26804)


Started POST "/orders/1/products?id=1" for 127.0.0.1 at 2022-10-22 18:54:49 -0500
Processing by Orders::ProductsController#create as */*
  Parameters: {"id"=>"1", "order_id"=>"1"}
Can't verify CSRF token authenticity.
  [1m[36mOrderProduct Load (0.3ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."product_id" = ? AND "order_products"."order_id" = ? LIMIT ?[0m  [["product_id", 1], ["order_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:45:in `find_order_product'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/orders/products_controller.rb:10:in `create'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:10:in `create'
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:10:in `create'
  [1m[36mOrderProduct Update (0.3ms)[0m  [1m[33mUPDATE "order_products" SET "amount" = ? WHERE "order_products"."id" = ?[0m  [["amount", 8], ["id", 10]]
  ↳ app/controllers/orders/products_controller.rb:10:in `create'
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/orders/products_controller.rb:10:in `create'
  [1m[36mOrder Load (0.1ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:41:in `find_order'
  [1m[36mOrderProduct Load (0.2ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."order_id" = ?[0m  [["order_id", 1]]
  ↳ app/controllers/orders/products_controller.rb:41:in `find_order'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ?[0m  [["id", 1]]
  ↳ app/controllers/orders/products_controller.rb:41:in `find_order'
Completed 200 OK in 156ms (Views: 1.0ms | ActiveRecord: 4.6ms | Allocations: 26770)


Started DELETE "/orders/1/products/1" for 127.0.0.1 at 2022-10-22 18:57:01 -0500
Processing by Orders::ProductsController#destroy as */*
  Parameters: {"order_id"=>"1", "id"=>"1"}
Can't verify CSRF token authenticity.
  [1m[36mOrderProduct Load (0.1ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."product_id" = ? AND "order_products"."order_id" = ? LIMIT ?[0m  [["product_id", 1], ["order_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:45:in `find_order_product'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/orders/products_controller.rb:25:in `destroy'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:25:in `destroy'
  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:25:in `destroy'
  [1m[36mOrderProduct Update (0.6ms)[0m  [1m[33mUPDATE "order_products" SET "amount" = ? WHERE "order_products"."id" = ?[0m  [["amount", 7], ["id", 10]]
  ↳ app/controllers/orders/products_controller.rb:25:in `destroy'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/orders/products_controller.rb:25:in `destroy'
  [1m[36mOrder Load (0.1ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:41:in `find_order'
  [1m[36mOrderProduct Pluck (0.2ms)[0m  [1m[34mSELECT "order_products"."id" FROM "order_products" WHERE "order_products"."order_id" = ?[0m  [["order_id", 1]]
  ↳ app/controllers/orders/products_controller.rb:35:in `destroy'
  [1m[36mOrderProduct Load (0.0ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."order_id" = ?[0m  [["order_id", 1]]
  ↳ app/controllers/orders/products_controller.rb:35:in `destroy'
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/serializers/order_product_serializer.rb:10:in `block in <class:OrderProductSerializer>'
Completed 200 OK in 44ms (Views: 0.2ms | ActiveRecord: 4.6ms | Allocations: 26515)


Started DELETE "/orders/1/products/1" for 127.0.0.1 at 2022-10-22 18:57:04 -0500
Processing by Orders::ProductsController#destroy as */*
  Parameters: {"order_id"=>"1", "id"=>"1"}
Can't verify CSRF token authenticity.
  [1m[36mOrderProduct Load (0.2ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."product_id" = ? AND "order_products"."order_id" = ? LIMIT ?[0m  [["product_id", 1], ["order_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:45:in `find_order_product'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/orders/products_controller.rb:25:in `destroy'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:25:in `destroy'
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:25:in `destroy'
  [1m[36mOrderProduct Update (0.5ms)[0m  [1m[33mUPDATE "order_products" SET "amount" = ? WHERE "order_products"."id" = ?[0m  [["amount", 6], ["id", 10]]
  ↳ app/controllers/orders/products_controller.rb:25:in `destroy'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/orders/products_controller.rb:25:in `destroy'
  [1m[36mOrder Load (0.1ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:41:in `find_order'
  [1m[36mOrderProduct Pluck (0.1ms)[0m  [1m[34mSELECT "order_products"."id" FROM "order_products" WHERE "order_products"."order_id" = ?[0m  [["order_id", 1]]
  ↳ app/controllers/orders/products_controller.rb:35:in `destroy'
  [1m[36mOrderProduct Load (0.0ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."order_id" = ?[0m  [["order_id", 1]]
  ↳ app/controllers/orders/products_controller.rb:35:in `destroy'
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/serializers/order_product_serializer.rb:10:in `block in <class:OrderProductSerializer>'
Completed 200 OK in 18ms (Views: 0.2ms | ActiveRecord: 2.2ms | Allocations: 6307)


Started DELETE "/orders/1/products/1" for 127.0.0.1 at 2022-10-22 18:57:06 -0500
Processing by Orders::ProductsController#destroy as */*
  Parameters: {"order_id"=>"1", "id"=>"1"}
Can't verify CSRF token authenticity.
  [1m[36mOrderProduct Load (0.1ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."product_id" = ? AND "order_products"."order_id" = ? LIMIT ?[0m  [["product_id", 1], ["order_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:45:in `find_order_product'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/orders/products_controller.rb:25:in `destroy'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:25:in `destroy'
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:25:in `destroy'
  [1m[36mOrderProduct Update (0.9ms)[0m  [1m[33mUPDATE "order_products" SET "amount" = ? WHERE "order_products"."id" = ?[0m  [["amount", 5], ["id", 10]]
  ↳ app/controllers/orders/products_controller.rb:25:in `destroy'
  [1m[36mTRANSACTION (7.7ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/orders/products_controller.rb:25:in `destroy'
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:41:in `find_order'
  [1m[36mOrderProduct Pluck (0.1ms)[0m  [1m[34mSELECT "order_products"."id" FROM "order_products" WHERE "order_products"."order_id" = ?[0m  [["order_id", 1]]
  ↳ app/controllers/orders/products_controller.rb:35:in `destroy'
  [1m[36mOrderProduct Load (0.1ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."order_id" = ?[0m  [["order_id", 1]]
  ↳ app/controllers/orders/products_controller.rb:35:in `destroy'
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/serializers/order_product_serializer.rb:10:in `block in <class:OrderProductSerializer>'
Completed 200 OK in 27ms (Views: 0.2ms | ActiveRecord: 9.9ms | Allocations: 6307)


Started DELETE "/orders/1/products/1" for 127.0.0.1 at 2022-10-22 18:57:08 -0500
Processing by Orders::ProductsController#destroy as */*
  Parameters: {"order_id"=>"1", "id"=>"1"}
Can't verify CSRF token authenticity.
  [1m[36mOrderProduct Load (0.2ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."product_id" = ? AND "order_products"."order_id" = ? LIMIT ?[0m  [["product_id", 1], ["order_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:45:in `find_order_product'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/orders/products_controller.rb:25:in `destroy'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:25:in `destroy'
  [1m[36mOrder Load (0.1ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:25:in `destroy'
  [1m[36mOrderProduct Update (0.7ms)[0m  [1m[33mUPDATE "order_products" SET "amount" = ? WHERE "order_products"."id" = ?[0m  [["amount", 4], ["id", 10]]
  ↳ app/controllers/orders/products_controller.rb:25:in `destroy'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/orders/products_controller.rb:25:in `destroy'
  [1m[36mOrder Load (0.1ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:41:in `find_order'
  [1m[36mOrderProduct Pluck (0.0ms)[0m  [1m[34mSELECT "order_products"."id" FROM "order_products" WHERE "order_products"."order_id" = ?[0m  [["order_id", 1]]
  ↳ app/controllers/orders/products_controller.rb:35:in `destroy'
  [1m[36mOrderProduct Load (0.0ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."order_id" = ?[0m  [["order_id", 1]]
  ↳ app/controllers/orders/products_controller.rb:35:in `destroy'
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/serializers/order_product_serializer.rb:10:in `block in <class:OrderProductSerializer>'
Completed 200 OK in 24ms (Views: 0.5ms | ActiveRecord: 2.6ms | Allocations: 6306)


Started DELETE "/orders/1/products/1" for 127.0.0.1 at 2022-10-22 18:57:10 -0500
Processing by Orders::ProductsController#destroy as */*
  Parameters: {"order_id"=>"1", "id"=>"1"}
Can't verify CSRF token authenticity.
  [1m[36mOrderProduct Load (0.2ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."product_id" = ? AND "order_products"."order_id" = ? LIMIT ?[0m  [["product_id", 1], ["order_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:45:in `find_order_product'
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/orders/products_controller.rb:25:in `destroy'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:25:in `destroy'
  [1m[36mOrder Load (0.1ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:25:in `destroy'
  [1m[36mOrderProduct Update (0.6ms)[0m  [1m[33mUPDATE "order_products" SET "amount" = ? WHERE "order_products"."id" = ?[0m  [["amount", 3], ["id", 10]]
  ↳ app/controllers/orders/products_controller.rb:25:in `destroy'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/orders/products_controller.rb:25:in `destroy'
  [1m[36mOrder Load (0.1ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:41:in `find_order'
  [1m[36mOrderProduct Pluck (0.0ms)[0m  [1m[34mSELECT "order_products"."id" FROM "order_products" WHERE "order_products"."order_id" = ?[0m  [["order_id", 1]]
  ↳ app/controllers/orders/products_controller.rb:35:in `destroy'
  [1m[36mOrderProduct Load (0.0ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."order_id" = ?[0m  [["order_id", 1]]
  ↳ app/controllers/orders/products_controller.rb:35:in `destroy'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/serializers/order_product_serializer.rb:10:in `block in <class:OrderProductSerializer>'
Completed 200 OK in 24ms (Views: 0.2ms | ActiveRecord: 3.5ms | Allocations: 6306)


Started DELETE "/orders/1/products/1" for 127.0.0.1 at 2022-10-22 18:57:12 -0500
Processing by Orders::ProductsController#destroy as */*
  Parameters: {"order_id"=>"1", "id"=>"1"}
Can't verify CSRF token authenticity.
  [1m[36mOrderProduct Load (0.3ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."product_id" = ? AND "order_products"."order_id" = ? LIMIT ?[0m  [["product_id", 1], ["order_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:45:in `find_order_product'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/orders/products_controller.rb:25:in `destroy'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:25:in `destroy'
  [1m[36mOrder Load (0.1ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:25:in `destroy'
  [1m[36mOrderProduct Update (0.6ms)[0m  [1m[33mUPDATE "order_products" SET "amount" = ? WHERE "order_products"."id" = ?[0m  [["amount", 2], ["id", 10]]
  ↳ app/controllers/orders/products_controller.rb:25:in `destroy'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/orders/products_controller.rb:25:in `destroy'
  [1m[36mOrder Load (0.1ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:41:in `find_order'
  [1m[36mOrderProduct Pluck (0.0ms)[0m  [1m[34mSELECT "order_products"."id" FROM "order_products" WHERE "order_products"."order_id" = ?[0m  [["order_id", 1]]
  ↳ app/controllers/orders/products_controller.rb:35:in `destroy'
  [1m[36mOrderProduct Load (0.0ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."order_id" = ?[0m  [["order_id", 1]]
  ↳ app/controllers/orders/products_controller.rb:35:in `destroy'
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/serializers/order_product_serializer.rb:10:in `block in <class:OrderProductSerializer>'
Completed 200 OK in 22ms (Views: 0.2ms | ActiveRecord: 1.9ms | Allocations: 6307)


Started DELETE "/orders/1/products/1" for 127.0.0.1 at 2022-10-22 18:57:13 -0500
Processing by Orders::ProductsController#destroy as */*
  Parameters: {"order_id"=>"1", "id"=>"1"}
Can't verify CSRF token authenticity.
  [1m[36mOrderProduct Load (0.1ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."product_id" = ? AND "order_products"."order_id" = ? LIMIT ?[0m  [["product_id", 1], ["order_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:45:in `find_order_product'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/orders/products_controller.rb:25:in `destroy'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:25:in `destroy'
  [1m[36mOrder Load (0.1ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:25:in `destroy'
  [1m[36mOrderProduct Update (0.5ms)[0m  [1m[33mUPDATE "order_products" SET "amount" = ? WHERE "order_products"."id" = ?[0m  [["amount", 1], ["id", 10]]
  ↳ app/controllers/orders/products_controller.rb:25:in `destroy'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/orders/products_controller.rb:25:in `destroy'
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:41:in `find_order'
  [1m[36mOrderProduct Pluck (0.1ms)[0m  [1m[34mSELECT "order_products"."id" FROM "order_products" WHERE "order_products"."order_id" = ?[0m  [["order_id", 1]]
  ↳ app/controllers/orders/products_controller.rb:35:in `destroy'
  [1m[36mOrderProduct Load (0.1ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."order_id" = ?[0m  [["order_id", 1]]
  ↳ app/controllers/orders/products_controller.rb:35:in `destroy'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/serializers/order_product_serializer.rb:10:in `block in <class:OrderProductSerializer>'
Completed 200 OK in 18ms (Views: 0.2ms | ActiveRecord: 2.2ms | Allocations: 6306)


Started DELETE "/orders/1/products/1" for 127.0.0.1 at 2022-10-22 18:57:15 -0500
Processing by Orders::ProductsController#destroy as */*
  Parameters: {"order_id"=>"1", "id"=>"1"}
Can't verify CSRF token authenticity.
  [1m[36mOrderProduct Load (0.2ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."product_id" = ? AND "order_products"."order_id" = ? LIMIT ?[0m  [["product_id", 1], ["order_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:45:in `find_order_product'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/orders/products_controller.rb:27:in `destroy'
  [1m[36mOrderProduct Destroy (0.5ms)[0m  [1m[31mDELETE FROM "order_products" WHERE "order_products"."id" = ?[0m  [["id", 10]]
  ↳ app/controllers/orders/products_controller.rb:27:in `destroy'
  [1m[36mOrder Load (0.1ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/order_product.rb:14:in `update_order'
  [1m[36mTRANSACTION (5.5ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/orders/products_controller.rb:27:in `destroy'
  [1m[36mOrder Load (0.1ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:41:in `find_order'
  [1m[36mOrderProduct Pluck (0.1ms)[0m  [1m[34mSELECT "order_products"."id" FROM "order_products" WHERE "order_products"."order_id" = ?[0m  [["order_id", 1]]
  ↳ app/controllers/orders/products_controller.rb:35:in `destroy'
  [1m[36mOrderProduct Load (0.0ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."order_id" = ?[0m  [["order_id", 1]]
  ↳ app/controllers/orders/products_controller.rb:35:in `destroy'
Completed 200 OK in 23ms (Views: 0.4ms | ActiveRecord: 6.7ms | Allocations: 4375)


Started POST "/orders" for 127.0.0.1 at 2022-10-22 19:15:22 -0500
  
ActionController::RoutingError (No route matches [POST] "/orders"):
  
Started POST "/orders/new" for 127.0.0.1 at 2022-10-22 19:16:06 -0500
  
ActionController::RoutingError (No route matches [POST] "/orders/new"):
  
Started GET "/orders/new" for 127.0.0.1 at 2022-10-22 19:16:21 -0500
Processing by OrdersController#new as */*
Completed 200 OK in 40ms (Views: 0.8ms | ActiveRecord: 0.3ms | Allocations: 13969)


Started GET "/orders/new" for 127.0.0.1 at 2022-10-22 19:17:06 -0500
Processing by OrdersController#new as */*
Completed 500 Internal Server Error in 60ms (ActiveRecord: 3.5ms | Allocations: 10975)


  
NoMethodError (undefined method `reload' for false:FalseClass):
  
app/controllers/orders_controller.rb:8:in `new'
Started GET "/orders/new" for 127.0.0.1 at 2022-10-22 19:17:24 -0500
Processing by OrdersController#new as */*
Completed 404 Not Found in 39ms (ActiveRecord: 1.3ms | Allocations: 10773)


  
ActiveRecord::RecordNotFound (Couldn't find Order without an ID):
  
app/controllers/orders_controller.rb:9:in `new'
Started GET "/orders/new" for 127.0.0.1 at 2022-10-22 19:17:53 -0500
Processing by OrdersController#new as */*
Completed 404 Not Found in 15ms (ActiveRecord: 1.1ms | Allocations: 11173)


  
ActiveRecord::RecordNotFound (Couldn't find Order without an ID):
  
app/controllers/orders_controller.rb:9:in `new'
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT "orders".* FROM "orders"[0m
Started GET "/orders/new?customer_id=1" for 127.0.0.1 at 2022-10-22 19:18:43 -0500
Processing by OrdersController#new as */*
  Parameters: {"customer_id"=>"1"}
Completed 500 Internal Server Error in 10ms (ActiveRecord: 0.4ms | Allocations: 7696)


  
ArgumentError (When assigning attributes, you must pass a hash as an argument, String passed.):
  
app/controllers/orders_controller.rb:7:in `new'
Started GET "/orders/new?customer_id=1" for 127.0.0.1 at 2022-10-22 19:19:04 -0500
Processing by OrdersController#new as */*
  Parameters: {"customer_id"=>"1"}
Completed 500 Internal Server Error in 8ms (ActiveRecord: 0.4ms | Allocations: 7640)


  
ArgumentError (When assigning attributes, you must pass a hash as an argument, String passed.):
  
app/controllers/orders_controller.rb:7:in `new'
Started GET "/orders/new?customer_id=1" for 127.0.0.1 at 2022-10-22 19:19:38 -0500
Processing by OrdersController#new as */*
  Parameters: {"customer_id"=>"1"}
Completed 500 Internal Server Error in 23ms (ActiveRecord: 1.0ms | Allocations: 7640)


  
ArgumentError (When assigning attributes, you must pass a hash as an argument, String passed.):
  
app/controllers/orders_controller.rb:7:in `new'
Started GET "/orders/new?customer_id=1" for 127.0.0.1 at 2022-10-22 19:21:35 -0500
Processing by OrdersController#new as */*
  Parameters: {"customer_id"=>"1"}
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/orders_controller.rb:7:in `new'
  [1m[36mCustomer Load (0.5ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders_controller.rb:7:in `new'
  [1m[36mOrder Create (0.3ms)[0m  [1m[32mINSERT INTO "orders" ("status", "customer_id", "final_price") VALUES (?, ?, ?)[0m  [["status", 0], ["customer_id", 1], ["final_price", 0.0]]
  ↳ app/controllers/orders_controller.rb:7:in `new'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/orders_controller.rb:7:in `new'
  [1m[36mOrderProduct Pluck (0.1ms)[0m  [1m[34mSELECT "order_products"."id" FROM "order_products" WHERE "order_products"."order_id" = ?[0m  [["order_id", 2]]
  ↳ app/controllers/orders_controller.rb:10:in `new'
Completed 200 OK in 49ms (Views: 0.8ms | ActiveRecord: 3.1ms | Allocations: 32313)


Started DELETE "/orders/1" for 127.0.0.1 at 2022-10-22 19:22:56 -0500
Processing by OrdersController#destroy as */*
  Parameters: {"id"=>"1"}
Can't verify CSRF token authenticity.
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders_controller.rb:21:in `find_order'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/orders_controller.rb:13:in `destroy'
  [1m[36mCustomer Load (0.0ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders_controller.rb:13:in `destroy'
  [1m[36mOrder Update (6.1ms)[0m  [1m[33mUPDATE "orders" SET "status" = ? WHERE "orders"."id" = ?[0m  [["status", 5], ["id", 1]]
  ↳ app/controllers/orders_controller.rb:13:in `destroy'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/orders_controller.rb:13:in `destroy'
Completed 500 Internal Server Error in 31ms (ActiveRecord: 8.0ms | Allocations: 17743)


  
ActionView::MissingTemplate (Missing template orders/destroy, application/destroy with {:locale=>[:en], :formats=>[:html, :text, :js, :css, :ics, :csv, :vcf, :vtt, :png, :jpeg, :gif, :bmp, :tiff, :svg, :mpeg, :mp3, :ogg, :m4a, :webm, :mp4, :otf, :ttf, :woff, :woff2, :xml, :rss, :atom, :yaml, :multipart_form, :url_encoded_form, :json, :pdf, :zip, :gzip, :turbo_stream], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby, :jbuilder]}.

Searched in:
  * "/Users/artemkuvychka/Documents/Work/assesment/cofee-shop/app/views"
  * "/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/actiontext-7.0.4/app/views"
  * "/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/actionmailbox-7.0.4/app/views"

Did you mean?  rails/conductor/action_mailbox/inbound_emails/index
               layouts/rails/conductor
               rails/conductor/action_mailbox/inbound_emails/new
               rails/conductor/action_mailbox/inbound_emails/sources/new
               rails/conductor/action_mailbox/inbound_emails/show
               layouts/application):
  
app/controllers/orders_controller.rb:15:in `destroy'
Started DELETE "/orders/1" for 127.0.0.1 at 2022-10-22 19:23:44 -0500
Processing by OrdersController#destroy as */*
  Parameters: {"id"=>"1"}
Can't verify CSRF token authenticity.
  [1m[36mOrder Load (0.9ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders_controller.rb:21:in `find_order'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/orders_controller.rb:13:in `destroy'
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders_controller.rb:13:in `destroy'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  ↳ app/controllers/orders_controller.rb:13:in `destroy'
Completed 422 Unprocessable Entity in 45ms (ActiveRecord: 1.2ms | Allocations: 4259)


  
ActiveRecord::RecordInvalid (Validation failed: Status Unexpected transition):
  
app/controllers/orders_controller.rb:13:in `destroy'
Started DELETE "/orders/2" for 127.0.0.1 at 2022-10-22 19:26:38 -0500
Processing by OrdersController#destroy as */*
  Parameters: {"id"=>"2"}
Can't verify CSRF token authenticity.
  [1m[36mOrder Load (1.1ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/orders_controller.rb:21:in `find_order'
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/orders_controller.rb:13:in `destroy'
  [1m[36mCustomer Load (0.3ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders_controller.rb:13:in `destroy'
  [1m[36mOrder Update (1.5ms)[0m  [1m[33mUPDATE "orders" SET "status" = ? WHERE "orders"."id" = ?[0m  [["status", 5], ["id", 2]]
  ↳ app/controllers/orders_controller.rb:13:in `destroy'
  [1m[36mTRANSACTION (1.5ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/orders_controller.rb:13:in `destroy'
Completed 500 Internal Server Error in 169ms (ActiveRecord: 5.3ms | Allocations: 4322)


  
ActionView::MissingTemplate (Missing template orders/destroy, application/destroy with {:locale=>[:en], :formats=>[:html, :text, :js, :css, :ics, :csv, :vcf, :vtt, :png, :jpeg, :gif, :bmp, :tiff, :svg, :mpeg, :mp3, :ogg, :m4a, :webm, :mp4, :otf, :ttf, :woff, :woff2, :xml, :rss, :atom, :yaml, :multipart_form, :url_encoded_form, :json, :pdf, :zip, :gzip, :turbo_stream], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby, :jbuilder]}.

Searched in:
  * "/Users/artemkuvychka/Documents/Work/assesment/cofee-shop/app/views"
  * "/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/actiontext-7.0.4/app/views"
  * "/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/actionmailbox-7.0.4/app/views"

Did you mean?  rails/conductor/action_mailbox/inbound_emails/index
               layouts/rails/conductor
               rails/conductor/action_mailbox/inbound_emails/new
               rails/conductor/action_mailbox/inbound_emails/sources/new
               rails/conductor/action_mailbox/inbound_emails/show
               layouts/application):
  
app/controllers/orders_controller.rb:15:in `destroy'
Started DELETE "/orders/2" for 127.0.0.1 at 2022-10-22 19:28:40 -0500
Processing by OrdersController#destroy as */*
  Parameters: {"id"=>"2"}
Can't verify CSRF token authenticity.
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/orders_controller.rb:21:in `find_order'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/orders_controller.rb:13:in `destroy'
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders_controller.rb:13:in `destroy'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[31mrollback transaction[0m
  ↳ app/controllers/orders_controller.rb:13:in `destroy'
Completed 422 Unprocessable Entity in 96ms (ActiveRecord: 3.3ms | Allocations: 15928)


  
ActiveRecord::RecordInvalid (Validation failed: Status Unexpected transition):
  
app/controllers/orders_controller.rb:13:in `destroy'
Started GET "/orders/new?customer_id=1" for 127.0.0.1 at 2022-10-22 19:28:47 -0500
Processing by OrdersController#new as */*
  Parameters: {"customer_id"=>"1"}
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/orders_controller.rb:7:in `new'
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders_controller.rb:7:in `new'
  [1m[36mOrder Create (0.3ms)[0m  [1m[32mINSERT INTO "orders" ("status", "customer_id", "final_price") VALUES (?, ?, ?)[0m  [["status", 0], ["customer_id", 1], ["final_price", 0.0]]
  ↳ app/controllers/orders_controller.rb:7:in `new'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/orders_controller.rb:7:in `new'
  [1m[36mOrderProduct Pluck (0.1ms)[0m  [1m[34mSELECT "order_products"."id" FROM "order_products" WHERE "order_products"."order_id" = ?[0m  [["order_id", 3]]
  ↳ app/controllers/orders_controller.rb:9:in `new'
Completed 200 OK in 25ms (Views: 0.9ms | ActiveRecord: 2.0ms | Allocations: 7184)


Started DELETE "/orders/3" for 127.0.0.1 at 2022-10-22 19:29:00 -0500
Processing by OrdersController#destroy as */*
  Parameters: {"id"=>"3"}
Can't verify CSRF token authenticity.
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/orders_controller.rb:21:in `find_order'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/orders_controller.rb:13:in `destroy'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders_controller.rb:13:in `destroy'
  [1m[36mOrder Update (0.4ms)[0m  [1m[33mUPDATE "orders" SET "status" = ? WHERE "orders"."id" = ?[0m  [["status", 5], ["id", 3]]
  ↳ app/controllers/orders_controller.rb:13:in `destroy'
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/orders_controller.rb:13:in `destroy'
Completed 204 No Content in 51ms (ActiveRecord: 3.7ms | Allocations: 3182)


Started POST "/orders?id=3" for 127.0.0.1 at 2022-10-22 20:08:36 -0500
Processing by OrdersController#create as */*
  Parameters: {"id"=>"3"}
Can't verify CSRF token authenticity.
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/orders_controller.rb:40:in `find_order'
  [1m[36mOrderProduct Load (0.2ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."order_id" = ?[0m  [["order_id", 3]]
  ↳ app/controllers/orders_controller.rb:44:in `validate_order_products'
Filter chain halted as :validate_order_products rendered or redirected
Completed 200 OK in 32ms (Views: 0.5ms | ActiveRecord: 3.0ms | Allocations: 12130)


Started POST "/orders?id=3" for 127.0.0.1 at 2022-10-22 20:09:01 -0500
Processing by OrdersController#create as */*
  Parameters: {"id"=>"3"}
Can't verify CSRF token authenticity.
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/orders_controller.rb:40:in `find_order'
  [1m[36mOrderProduct Load (0.2ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."order_id" = ?[0m  [["order_id", 3]]
  ↳ app/controllers/orders_controller.rb:44:in `validate_order_products'
Filter chain halted as :validate_order_products rendered or redirected
Completed 403 Forbidden in 29ms (Views: 0.2ms | ActiveRecord: 3.0ms | Allocations: 12535)


Started POST "/orders/3/products?id=1" for 127.0.0.1 at 2022-10-22 20:20:33 -0500
Processing by Orders::ProductsController#create as */*
  Parameters: {"id"=>"1", "order_id"=>"3"}
Can't verify CSRF token authenticity.
  [1m[36mOrderProduct Load (0.4ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."product_id" = ? AND "order_products"."order_id" = ? LIMIT ?[0m  [["product_id", 1], ["order_id", 3], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:39:in `find_order_product'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/orders/products_controller.rb:12:in `create'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:12:in `create'
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:12:in `create'
  [1m[36mOrderProduct Create (0.4ms)[0m  [1m[32mINSERT INTO "order_products" ("order_id", "product_id", "amount") VALUES (?, ?, ?)[0m  [["order_id", 3], ["product_id", 1], ["amount", 1]]
  ↳ app/controllers/orders/products_controller.rb:12:in `create'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/orders/products_controller.rb:12:in `create'
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:35:in `find_order'
  [1m[36mOrderProduct Pluck (0.1ms)[0m  [1m[34mSELECT "order_products"."id" FROM "order_products" WHERE "order_products"."order_id" = ?[0m  [["order_id", 3]]
  ↳ app/controllers/orders/products_controller.rb:19:in `create'
  [1m[36mOrderProduct Load (0.1ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."order_id" = ?[0m  [["order_id", 3]]
  ↳ app/controllers/orders/products_controller.rb:19:in `create'
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/serializers/order_product_serializer.rb:10:in `block in <class:OrderProductSerializer>'
Completed 200 OK in 77ms (Views: 0.2ms | ActiveRecord: 4.8ms | Allocations: 25974)


Started POST "/orders?id=3" for 127.0.0.1 at 2022-10-22 20:20:39 -0500
Processing by OrdersController#create as */*
  Parameters: {"id"=>"3"}
Can't verify CSRF token authenticity.
  [1m[36mOrder Load (2.8ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/orders_controller.rb:40:in `find_order'
  [1m[36mOrderProduct Load (0.2ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."order_id" = ?[0m  [["order_id", 3]]
  ↳ app/controllers/orders_controller.rb:44:in `validate_order_products'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/orders_controller.rb:14:in `create'
  [1m[36mCustomer Load (1.6ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders_controller.rb:14:in `create'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[31mrollback transaction[0m
  ↳ app/controllers/orders_controller.rb:14:in `create'
Completed 422 Unprocessable Entity in 30ms (ActiveRecord: 4.9ms | Allocations: 8773)


  
ActiveRecord::RecordInvalid (Validation failed: Status Unexpected transition):
  
app/controllers/orders_controller.rb:14:in `create'
  [1m[36mOrder Load (1.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
Started GET "/orders/new?customer_id=1" for 127.0.0.1 at 2022-10-22 20:21:57 -0500
Processing by OrdersController#new as */*
  Parameters: {"customer_id"=>"1"}
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/orders_controller.rb:8:in `new'
  [1m[36mCustomer Load (0.9ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders_controller.rb:8:in `new'
  [1m[36mOrder Create (0.7ms)[0m  [1m[32mINSERT INTO "orders" ("status", "customer_id", "final_price") VALUES (?, ?, ?)[0m  [["status", 0], ["customer_id", 1], ["final_price", 0.0]]
  ↳ app/controllers/orders_controller.rb:8:in `new'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/orders_controller.rb:8:in `new'
  [1m[36mOrderProduct Pluck (0.1ms)[0m  [1m[34mSELECT "order_products"."id" FROM "order_products" WHERE "order_products"."order_id" = ?[0m  [["order_id", 4]]
  ↳ app/controllers/orders_controller.rb:10:in `new'
Completed 200 OK in 14ms (Views: 0.3ms | ActiveRecord: 2.8ms | Allocations: 3468)


Started POST "/orders/4/products?id=1" for 127.0.0.1 at 2022-10-22 20:22:10 -0500
Processing by Orders::ProductsController#create as */*
  Parameters: {"id"=>"1", "order_id"=>"4"}
Can't verify CSRF token authenticity.
  [1m[36mOrderProduct Load (0.4ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."product_id" = ? AND "order_products"."order_id" = ? LIMIT ?[0m  [["product_id", 1], ["order_id", 4], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:39:in `find_order_product'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/orders/products_controller.rb:12:in `create'
  [1m[36mProduct Load (0.4ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:12:in `create'
  [1m[36mOrder Load (0.1ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:12:in `create'
  [1m[36mOrderProduct Create (0.9ms)[0m  [1m[32mINSERT INTO "order_products" ("order_id", "product_id", "amount") VALUES (?, ?, ?)[0m  [["order_id", 4], ["product_id", 1], ["amount", 1]]
  ↳ app/controllers/orders/products_controller.rb:12:in `create'
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/orders/products_controller.rb:12:in `create'
  [1m[36mOrder Load (0.1ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:35:in `find_order'
  [1m[36mOrderProduct Pluck (0.0ms)[0m  [1m[34mSELECT "order_products"."id" FROM "order_products" WHERE "order_products"."order_id" = ?[0m  [["order_id", 4]]
  ↳ app/controllers/orders/products_controller.rb:19:in `create'
  [1m[36mOrderProduct Load (0.0ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."order_id" = ?[0m  [["order_id", 4]]
  ↳ app/controllers/orders/products_controller.rb:19:in `create'
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/serializers/order_product_serializer.rb:10:in `block in <class:OrderProductSerializer>'
Completed 200 OK in 18ms (Views: 0.3ms | ActiveRecord: 3.3ms | Allocations: 6228)


Started POST "/orders?id=4" for 127.0.0.1 at 2022-10-22 20:22:15 -0500
Processing by OrdersController#create as */*
  Parameters: {"id"=>"4"}
Can't verify CSRF token authenticity.
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/orders_controller.rb:40:in `find_order'
  [1m[36mOrderProduct Load (0.1ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."order_id" = ?[0m  [["order_id", 4]]
  ↳ app/controllers/orders_controller.rb:44:in `validate_order_products'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/orders_controller.rb:14:in `create'
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders_controller.rb:14:in `create'
  [1m[36mOrder Update (1.7ms)[0m  [1m[33mUPDATE "orders" SET "status" = ? WHERE "orders"."id" = ?[0m  [["status", 1], ["id", 4]]
  ↳ app/controllers/orders_controller.rb:14:in `create'
  [1m[36mTRANSACTION (0.9ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/orders_controller.rb:14:in `create'
Completed 500 Internal Server Error in 23ms (ActiveRecord: 3.2ms | Allocations: 6864)


  
NameError (undefined local variable or method `order' for #<OrdersController:0x00000000093198>
Did you mean?  @order):
  
app/controllers/orders_controller.rb:17:in `create'
Started PUT "/orders/4" for 127.0.0.1 at 2022-10-22 20:22:44 -0500
Processing by OrdersController#update as */*
  Parameters: {"id"=>"4"}
Can't verify CSRF token authenticity.
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/orders_controller.rb:40:in `find_order'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/order.rb:17:in `next_status'
  [1m[36mCustomer Load (0.0ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/order.rb:17:in `next_status'
  [1m[36mOrder Update (0.2ms)[0m  [1m[33mUPDATE "orders" SET "status" = ? WHERE "orders"."id" = ?[0m  [["status", 2], ["id", 4]]
  ↳ app/models/order.rb:17:in `next_status'
  [1m[36mTRANSACTION (2.1ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/order.rb:17:in `next_status'
  [1m[36mOrder Load (0.1ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/models/order.rb:18:in `next_status'
  [1m[36mOrderProduct Pluck (0.1ms)[0m  [1m[34mSELECT "order_products"."id" FROM "order_products" WHERE "order_products"."order_id" = ?[0m  [["order_id", 4]]
  ↳ app/controllers/orders_controller.rb:28:in `update'
  [1m[36mOrderProduct Load (0.1ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."order_id" = ?[0m  [["order_id", 4]]
  ↳ app/controllers/orders_controller.rb:28:in `update'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/serializers/order_product_serializer.rb:10:in `block in <class:OrderProductSerializer>'
Completed 200 OK in 52ms (Views: 0.4ms | ActiveRecord: 4.9ms | Allocations: 29274)


Started PUT "/orders/4" for 127.0.0.1 at 2022-10-22 20:23:18 -0500
Processing by OrdersController#update as */*
  Parameters: {"id"=>"4"}
Can't verify CSRF token authenticity.
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/orders_controller.rb:40:in `find_order'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/order.rb:17:in `next_status'
  [1m[36mCustomer Load (0.0ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/order.rb:17:in `next_status'
  [1m[36mOrder Update (0.3ms)[0m  [1m[33mUPDATE "orders" SET "status" = ? WHERE "orders"."id" = ?[0m  [["status", 3], ["id", 4]]
  ↳ app/models/order.rb:17:in `next_status'
  [1m[36mTRANSACTION (0.4ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/order.rb:17:in `next_status'
  [1m[36mOrder Load (0.0ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/models/order.rb:18:in `next_status'
  [1m[36mOrderProduct Pluck (0.2ms)[0m  [1m[34mSELECT "order_products"."id" FROM "order_products" WHERE "order_products"."order_id" = ?[0m  [["order_id", 4]]
  ↳ app/controllers/orders_controller.rb:28:in `update'
  [1m[36mOrderProduct Load (0.0ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."order_id" = ?[0m  [["order_id", 4]]
  ↳ app/controllers/orders_controller.rb:28:in `update'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/serializers/order_product_serializer.rb:10:in `block in <class:OrderProductSerializer>'
Completed 200 OK in 33ms (Views: 0.2ms | ActiveRecord: 4.0ms | Allocations: 29196)


Started PUT "/orders/4" for 127.0.0.1 at 2022-10-22 20:23:27 -0500
Processing by OrdersController#update as */*
  Parameters: {"id"=>"4"}
Can't verify CSRF token authenticity.
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/orders_controller.rb:40:in `find_order'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/order.rb:17:in `next_status'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/order.rb:17:in `next_status'
  [1m[36mOrder Update (0.5ms)[0m  [1m[33mUPDATE "orders" SET "status" = ? WHERE "orders"."id" = ?[0m  [["status", 4], ["id", 4]]
  ↳ app/models/order.rb:17:in `next_status'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/order.rb:17:in `next_status'
  [1m[36mOrder Load (0.1ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/models/order.rb:18:in `next_status'
  [1m[36mOrderProduct Pluck (0.1ms)[0m  [1m[34mSELECT "order_products"."id" FROM "order_products" WHERE "order_products"."order_id" = ?[0m  [["order_id", 4]]
  ↳ app/controllers/orders_controller.rb:28:in `update'
  [1m[36mOrderProduct Load (0.0ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."order_id" = ?[0m  [["order_id", 4]]
  ↳ app/controllers/orders_controller.rb:28:in `update'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/serializers/order_product_serializer.rb:10:in `block in <class:OrderProductSerializer>'
Completed 200 OK in 31ms (Views: 0.9ms | ActiveRecord: 1.9ms | Allocations: 5810)


  [1m[36mOrder Load (3.7ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
Started GET "/orders/new?customer_id=1" for 127.0.0.1 at 2022-10-22 22:52:01 -0500
Processing by OrdersController#new as */*
  Parameters: {"customer_id"=>"1"}
  [1m[36mOrder Load (1.1ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."customer_id" = ? AND "orders"."status" = ?[0m  [["customer_id", 1], ["status", 0]]
  ↳ app/controllers/orders_controller.rb:51:in `check_existing_orders'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/orders_controller.rb:9:in `new'
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders_controller.rb:9:in `new'
  [1m[36mOrder Create (0.7ms)[0m  [1m[32mINSERT INTO "orders" ("status", "customer_id", "final_price") VALUES (?, ?, ?)[0m  [["status", 0], ["customer_id", 1], ["final_price", 0.0]]
  ↳ app/controllers/orders_controller.rb:9:in `new'
  [1m[36mTRANSACTION (1.2ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/orders_controller.rb:9:in `new'
  [1m[36mOrderProduct Pluck (0.3ms)[0m  [1m[34mSELECT "order_products"."id" FROM "order_products" WHERE "order_products"."order_id" = ?[0m  [["order_id", 5]]
  ↳ app/controllers/orders_controller.rb:11:in `new'
Completed 200 OK in 90ms (Views: 0.7ms | ActiveRecord: 4.5ms | Allocations: 19125)


Started POST "/orders/5/products?id=1" for 127.0.0.1 at 2022-10-22 22:52:18 -0500
Processing by Orders::ProductsController#create as */*
  Parameters: {"id"=>"1", "order_id"=>"5"}
Can't verify CSRF token authenticity.
  [1m[36mOrderProduct Load (3.3ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."product_id" = ? AND "order_products"."order_id" = ? LIMIT ?[0m  [["product_id", 1], ["order_id", 5], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:39:in `find_order_product'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/orders/products_controller.rb:12:in `create'
  [1m[36mProduct Load (0.3ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:12:in `create'
  [1m[36mOrder Load (0.1ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:12:in `create'
  [1m[36mOrderProduct Create (0.3ms)[0m  [1m[32mINSERT INTO "order_products" ("order_id", "product_id", "amount") VALUES (?, ?, ?)[0m  [["order_id", 5], ["product_id", 1], ["amount", 1]]
  ↳ app/controllers/orders/products_controller.rb:12:in `create'
  [1m[36mTRANSACTION (0.7ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/orders/products_controller.rb:12:in `create'
  [1m[36mOrder Load (0.1ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:35:in `find_order'
  [1m[36mOrderProduct Pluck (0.0ms)[0m  [1m[34mSELECT "order_products"."id" FROM "order_products" WHERE "order_products"."order_id" = ?[0m  [["order_id", 5]]
  ↳ app/controllers/orders/products_controller.rb:19:in `create'
  [1m[36mOrderProduct Load (0.1ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."order_id" = ?[0m  [["order_id", 5]]
  ↳ app/controllers/orders/products_controller.rb:19:in `create'
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/serializers/order_product_serializer.rb:10:in `block in <class:OrderProductSerializer>'
Completed 200 OK in 35ms (Views: 0.3ms | ActiveRecord: 4.9ms | Allocations: 15244)


Started POST "/orders?id=5" for 127.0.0.1 at 2022-10-22 22:52:23 -0500
Processing by OrdersController#create as */*
  Parameters: {"id"=>"5"}
Can't verify CSRF token authenticity.
  [1m[36mOrder Load (0.1ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/orders_controller.rb:41:in `find_order'
  [1m[36mOrderProduct Load (0.1ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."order_id" = ?[0m  [["order_id", 5]]
  ↳ app/controllers/orders_controller.rb:45:in `validate_order_products'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/orders_controller.rb:15:in `create'
  [1m[36mCustomer Load (0.4ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders_controller.rb:15:in `create'
  [1m[36mOrder Update (0.5ms)[0m  [1m[33mUPDATE "orders" SET "status" = ? WHERE "orders"."id" = ?[0m  [["status", 1], ["id", 5]]
  ↳ app/controllers/orders_controller.rb:15:in `create'
  [1m[36mTRANSACTION (1.0ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/orders_controller.rb:15:in `create'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/serializers/order_product_serializer.rb:10:in `block in <class:OrderProductSerializer>'
Completed 200 OK in 16ms (Views: 0.3ms | ActiveRecord: 2.3ms | Allocations: 4666)


Started PUT "/orders/5" for 127.0.0.1 at 2022-10-22 22:52:37 -0500
Processing by OrdersController#update as */*
  Parameters: {"id"=>"5"}
Can't verify CSRF token authenticity.
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/orders_controller.rb:41:in `find_order'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/order.rb:19:in `next_status'
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/order.rb:19:in `next_status'
  [1m[36mOrder Update (0.2ms)[0m  [1m[33mUPDATE "orders" SET "status" = ? WHERE "orders"."id" = ?[0m  [["status", 2], ["id", 5]]
  ↳ app/models/order.rb:19:in `next_status'
  [1m[36mTRANSACTION (3.1ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/order.rb:19:in `next_status'
  [1m[36mOrder Load (0.1ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/models/order.rb:20:in `next_status'
  [1m[36mOrderProduct Pluck (0.0ms)[0m  [1m[34mSELECT "order_products"."id" FROM "order_products" WHERE "order_products"."order_id" = ?[0m  [["order_id", 5]]
  ↳ app/controllers/orders_controller.rb:29:in `update'
  [1m[36mOrderProduct Load (0.0ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."order_id" = ?[0m  [["order_id", 5]]
  ↳ app/controllers/orders_controller.rb:29:in `update'
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/serializers/order_product_serializer.rb:10:in `block in <class:OrderProductSerializer>'
Completed 200 OK in 13ms (Views: 0.2ms | ActiveRecord: 3.7ms | Allocations: 5830)


Started PUT "/orders/5" for 127.0.0.1 at 2022-10-22 22:52:39 -0500
Processing by OrdersController#update as */*
  Parameters: {"id"=>"5"}
Can't verify CSRF token authenticity.
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/controllers/orders_controller.rb:41:in `find_order'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/order.rb:19:in `next_status'
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/order.rb:19:in `next_status'
  [1m[36mOrder Update (0.4ms)[0m  [1m[33mUPDATE "orders" SET "status" = ? WHERE "orders"."id" = ?[0m  [["status", 3], ["id", 5]]
  ↳ app/models/order.rb:19:in `next_status'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/order.rb:19:in `next_status'
  [1m[36mOrder Load (0.1ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/models/order.rb:20:in `next_status'
  [1m[36mOrderProduct Pluck (0.1ms)[0m  [1m[34mSELECT "order_products"."id" FROM "order_products" WHERE "order_products"."order_id" = ?[0m  [["order_id", 5]]
  ↳ app/controllers/orders_controller.rb:29:in `update'
  [1m[36mOrderProduct Load (0.0ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."order_id" = ?[0m  [["order_id", 5]]
  ↳ app/controllers/orders_controller.rb:29:in `update'
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/serializers/order_product_serializer.rb:10:in `block in <class:OrderProductSerializer>'
Completed 200 OK in 19ms (Views: 0.2ms | ActiveRecord: 1.7ms | Allocations: 5798)


  [1m[36mOrder Load (1.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (0.1ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (0.1ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
[ActiveJob] [SendOrderReadyNotificationJob] [a871849a-56bf-4558-8fbf-ee075a9d13f9] Performing SendOrderReadyNotificationJob (Job ID: a871849a-56bf-4558-8fbf-ee075a9d13f9) from Async(default) enqueued at  with arguments: 5
[ActiveJob] [SendOrderReadyNotificationJob] [a871849a-56bf-4558-8fbf-ee075a9d13f9]   [1m[36mOrder Load (6.7ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
[ActiveJob] [SendOrderReadyNotificationJob] [a871849a-56bf-4558-8fbf-ee075a9d13f9] Error performing SendOrderReadyNotificationJob (Job ID: a871849a-56bf-4558-8fbf-ee075a9d13f9) from Async(default) in 159.23ms: NoMethodError (undefined method `received!' for [#<Order id: 5, status: "done", customer_id: 1, final_price: 0.0>]:Array):
/Users/artemkuvychka/Documents/Work/assesment/cofee-shop/app/jobs/send_order_ready_notification_job.rb:9:in `perform'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activejob-7.0.4/lib/active_job/execution.rb:59:in `block in _perform_job'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activesupport-7.0.4/lib/active_support/callbacks.rb:118:in `block in run_callbacks'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/i18n-1.12.0/lib/i18n.rb:317:in `with_locale'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activejob-7.0.4/lib/active_job/translation.rb:9:in `block (2 levels) in <module:Translation>'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activesupport-7.0.4/lib/active_support/callbacks.rb:127:in `instance_exec'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activesupport-7.0.4/lib/active_support/callbacks.rb:127:in `block in run_callbacks'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activesupport-7.0.4/lib/active_support/core_ext/time/zones.rb:66:in `use_zone'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activejob-7.0.4/lib/active_job/timezones.rb:9:in `block (2 levels) in <module:Timezones>'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activesupport-7.0.4/lib/active_support/callbacks.rb:127:in `instance_exec'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activesupport-7.0.4/lib/active_support/callbacks.rb:127:in `block in run_callbacks'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activesupport-7.0.4/lib/active_support/callbacks.rb:138:in `run_callbacks'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activejob-7.0.4/lib/active_job/execution.rb:58:in `_perform_job'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activejob-7.0.4/lib/active_job/instrumentation.rb:20:in `_perform_job'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activejob-7.0.4/lib/active_job/execution.rb:46:in `perform_now'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activejob-7.0.4/lib/active_job/instrumentation.rb:14:in `block in perform_now'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activejob-7.0.4/lib/active_job/instrumentation.rb:25:in `block in instrument'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activesupport-7.0.4/lib/active_support/notifications.rb:206:in `block in instrument'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activesupport-7.0.4/lib/active_support/notifications/instrumenter.rb:24:in `instrument'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activesupport-7.0.4/lib/active_support/notifications.rb:206:in `instrument'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activejob-7.0.4/lib/active_job/instrumentation.rb:35:in `instrument'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activejob-7.0.4/lib/active_job/instrumentation.rb:14:in `perform_now'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activejob-7.0.4/lib/active_job/logging.rb:18:in `block in perform_now'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activesupport-7.0.4/lib/active_support/tagged_logging.rb:99:in `block in tagged'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activesupport-7.0.4/lib/active_support/tagged_logging.rb:37:in `tagged'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activesupport-7.0.4/lib/active_support/tagged_logging.rb:99:in `tagged'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activejob-7.0.4/lib/active_job/logging.rb:25:in `tag_logger'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activejob-7.0.4/lib/active_job/logging.rb:18:in `perform_now'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activejob-7.0.4/lib/active_job/execution.rb:18:in `perform_now'
(irb):22:in `<main>'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/irb-1.4.2/lib/irb/workspace.rb:119:in `eval'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/irb-1.4.2/lib/irb/workspace.rb:119:in `evaluate'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/irb-1.4.2/lib/irb/context.rb:480:in `evaluate'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/irb-1.4.2/lib/irb.rb:529:in `block (2 levels) in eval_input'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/irb-1.4.2/lib/irb.rb:722:in `signal_status'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/irb-1.4.2/lib/irb.rb:510:in `block in eval_input'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/irb-1.4.2/lib/irb/ruby-lex.rb:257:in `block (2 levels) in each_top_level_statement'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/irb-1.4.2/lib/irb/ruby-lex.rb:239:in `loop'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/irb-1.4.2/lib/irb/ruby-lex.rb:239:in `block in each_top_level_statement'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/irb-1.4.2/lib/irb/ruby-lex.rb:238:in `catch'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/irb-1.4.2/lib/irb/ruby-lex.rb:238:in `each_top_level_statement'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/irb-1.4.2/lib/irb.rb:509:in `eval_input'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/irb-1.4.2/lib/irb.rb:443:in `block in run'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/irb-1.4.2/lib/irb.rb:442:in `catch'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/irb-1.4.2/lib/irb.rb:442:in `run'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/irb-1.4.2/lib/irb.rb:375:in `start'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/railties-7.0.4/lib/rails/commands/console/console_command.rb:70:in `start'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/railties-7.0.4/lib/rails/commands/console/console_command.rb:19:in `start'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/railties-7.0.4/lib/rails/commands/console/console_command.rb:102:in `perform'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/thor-1.2.1/lib/thor/command.rb:27:in `run'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/thor-1.2.1/lib/thor/invocation.rb:127:in `invoke_command'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/thor-1.2.1/lib/thor.rb:392:in `dispatch'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/railties-7.0.4/lib/rails/command/base.rb:87:in `perform'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/railties-7.0.4/lib/rails/command.rb:48:in `invoke'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/railties-7.0.4/lib/rails/commands.rb:18:in `<main>'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/bootsnap-1.13.0/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:32:in `require'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/bootsnap-1.13.0/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:32:in `require'
bin/rails:4:in `<main>'
  [1m[36mOrder Load (0.3ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mTRANSACTION (0.2ms)[0m  [1m[36mbegin transaction[0m
  [1m[36mCustomer Load (0.5ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrder Update (0.7ms)[0m  [1m[33mUPDATE "orders" SET "status" = ? WHERE "orders"."id" = ?[0m  [["status", 4], ["id", 5]]
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[36mcommit transaction[0m
Started GET "/orders/new?customer_id=1" for 127.0.0.1 at 2022-10-22 22:56:54 -0500
Processing by OrdersController#new as */*
  Parameters: {"customer_id"=>"1"}
  [1m[36mOrder Load (0.5ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."customer_id" = ? AND "orders"."status" = ?[0m  [["customer_id", 1], ["status", 0]]
  ↳ app/controllers/orders_controller.rb:51:in `check_existing_orders'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/orders_controller.rb:9:in `new'
  [1m[36mCustomer Load (0.0ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders_controller.rb:9:in `new'
  [1m[36mOrder Create (0.2ms)[0m  [1m[32mINSERT INTO "orders" ("status", "customer_id", "final_price") VALUES (?, ?, ?)[0m  [["status", 0], ["customer_id", 1], ["final_price", 0.0]]
  ↳ app/controllers/orders_controller.rb:9:in `new'
  [1m[36mTRANSACTION (0.5ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/orders_controller.rb:9:in `new'
  [1m[36mOrderProduct Pluck (0.1ms)[0m  [1m[34mSELECT "order_products"."id" FROM "order_products" WHERE "order_products"."order_id" = ?[0m  [["order_id", 6]]
  ↳ app/controllers/orders_controller.rb:11:in `new'
Completed 200 OK in 32ms (Views: 0.2ms | ActiveRecord: 2.9ms | Allocations: 20197)


Started POST "/orders/6/products?id=1" for 127.0.0.1 at 2022-10-22 22:57:04 -0500
Processing by Orders::ProductsController#create as */*
  Parameters: {"id"=>"1", "order_id"=>"6"}
Can't verify CSRF token authenticity.
  [1m[36mOrderProduct Load (0.4ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."product_id" = ? AND "order_products"."order_id" = ? LIMIT ?[0m  [["product_id", 1], ["order_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:39:in `find_order_product'
  [1m[36mTRANSACTION (0.0ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/orders/products_controller.rb:12:in `create'
  [1m[36mProduct Load (0.2ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:12:in `create'
  [1m[36mOrder Load (0.1ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:12:in `create'
  [1m[36mOrderProduct Create (0.2ms)[0m  [1m[32mINSERT INTO "order_products" ("order_id", "product_id", "amount") VALUES (?, ?, ?)[0m  [["order_id", 6], ["product_id", 1], ["amount", 1]]
  ↳ app/controllers/orders/products_controller.rb:12:in `create'
  [1m[36mTRANSACTION (0.3ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/orders/products_controller.rb:12:in `create'
  [1m[36mOrder Load (0.1ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/orders/products_controller.rb:35:in `find_order'
  [1m[36mOrderProduct Pluck (0.0ms)[0m  [1m[34mSELECT "order_products"."id" FROM "order_products" WHERE "order_products"."order_id" = ?[0m  [["order_id", 6]]
  ↳ app/controllers/orders/products_controller.rb:19:in `create'
  [1m[36mOrderProduct Load (0.1ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."order_id" = ?[0m  [["order_id", 6]]
  ↳ app/controllers/orders/products_controller.rb:19:in `create'
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/serializers/order_product_serializer.rb:10:in `block in <class:OrderProductSerializer>'
Completed 200 OK in 24ms (Views: 0.2ms | ActiveRecord: 1.8ms | Allocations: 15619)


Started POST "/orders?id=6" for 127.0.0.1 at 2022-10-22 22:57:08 -0500
Processing by OrdersController#create as */*
  Parameters: {"id"=>"6"}
Can't verify CSRF token authenticity.
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/orders_controller.rb:41:in `find_order'
  [1m[36mOrderProduct Load (0.1ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."order_id" = ?[0m  [["order_id", 6]]
  ↳ app/controllers/orders_controller.rb:45:in `validate_order_products'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/controllers/orders_controller.rb:15:in `create'
  [1m[36mCustomer Load (0.2ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/orders_controller.rb:15:in `create'
  [1m[36mOrder Update (0.5ms)[0m  [1m[33mUPDATE "orders" SET "status" = ? WHERE "orders"."id" = ?[0m  [["status", 1], ["id", 6]]
  ↳ app/controllers/orders_controller.rb:15:in `create'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/controllers/orders_controller.rb:15:in `create'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/serializers/order_product_serializer.rb:10:in `block in <class:OrderProductSerializer>'
Completed 200 OK in 17ms (Views: 0.2ms | ActiveRecord: 1.9ms | Allocations: 4673)


Started PUT "/orders/6" for 127.0.0.1 at 2022-10-22 22:57:12 -0500
Processing by OrdersController#update as */*
  Parameters: {"id"=>"6"}
Can't verify CSRF token authenticity.
  [1m[36mOrder Load (0.1ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/orders_controller.rb:41:in `find_order'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/order.rb:19:in `next_status'
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/order.rb:19:in `next_status'
  [1m[36mOrder Update (0.5ms)[0m  [1m[33mUPDATE "orders" SET "status" = ? WHERE "orders"."id" = ?[0m  [["status", 2], ["id", 6]]
  ↳ app/models/order.rb:19:in `next_status'
  [1m[36mTRANSACTION (0.6ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/order.rb:19:in `next_status'
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/models/order.rb:20:in `next_status'
  [1m[36mOrderProduct Pluck (0.1ms)[0m  [1m[34mSELECT "order_products"."id" FROM "order_products" WHERE "order_products"."order_id" = ?[0m  [["order_id", 6]]
  ↳ app/controllers/orders_controller.rb:29:in `update'
  [1m[36mOrderProduct Load (0.1ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."order_id" = ?[0m  [["order_id", 6]]
  ↳ app/controllers/orders_controller.rb:29:in `update'
  [1m[36mProduct Load (0.1ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/serializers/order_product_serializer.rb:10:in `block in <class:OrderProductSerializer>'
Completed 200 OK in 16ms (Views: 0.2ms | ActiveRecord: 1.9ms | Allocations: 5837)


Started PUT "/orders/6" for 127.0.0.1 at 2022-10-22 22:57:13 -0500
Processing by OrdersController#update as */*
  Parameters: {"id"=>"6"}
Can't verify CSRF token authenticity.
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/orders_controller.rb:41:in `find_order'
  [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
  ↳ app/models/order.rb:19:in `next_status'
  [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/order.rb:19:in `next_status'
  [1m[36mOrder Update (0.5ms)[0m  [1m[33mUPDATE "orders" SET "status" = ? WHERE "orders"."id" = ?[0m  [["status", 3], ["id", 6]]
  ↳ app/models/order.rb:19:in `next_status'
  [1m[36mTRANSACTION (0.8ms)[0m  [1m[36mcommit transaction[0m
  ↳ app/models/order.rb:19:in `next_status'
  [1m[36mOrder Load (0.1ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/models/order.rb:20:in `next_status'
  [1m[36mOrderProduct Pluck (0.0ms)[0m  [1m[34mSELECT "order_products"."id" FROM "order_products" WHERE "order_products"."order_id" = ?[0m  [["order_id", 6]]
  ↳ app/controllers/orders_controller.rb:29:in `update'
  [1m[36mOrderProduct Load (0.0ms)[0m  [1m[34mSELECT "order_products".* FROM "order_products" WHERE "order_products"."order_id" = ?[0m  [["order_id", 6]]
  ↳ app/controllers/orders_controller.rb:29:in `update'
  [1m[36mProduct Load (0.0ms)[0m  [1m[34mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/serializers/order_product_serializer.rb:10:in `block in <class:OrderProductSerializer>'
Completed 200 OK in 15ms (Views: 0.2ms | ActiveRecord: 1.8ms | Allocations: 5804)


  [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
  [1m[36mOrder Load (0.2ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
[ActiveJob] Enqueued SendOrderReadyNotificationJob (Job ID: 7ed14d8e-6dbc-46a8-86f2-042b667e139c) to Async(default) with arguments: 6
[ActiveJob] [SendOrderReadyNotificationJob] [7ed14d8e-6dbc-46a8-86f2-042b667e139c] Performing SendOrderReadyNotificationJob (Job ID: 7ed14d8e-6dbc-46a8-86f2-042b667e139c) from Async(default) enqueued at 2022-10-23T03:57:38Z with arguments: 6
[ActiveJob] [SendOrderReadyNotificationJob] [7ed14d8e-6dbc-46a8-86f2-042b667e139c]   [1m[36mOrder Load (0.4ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
[ActiveJob] [SendOrderReadyNotificationJob] [7ed14d8e-6dbc-46a8-86f2-042b667e139c] Error performing SendOrderReadyNotificationJob (Job ID: 7ed14d8e-6dbc-46a8-86f2-042b667e139c) from Async(default) in 26.15ms: NoMethodError (undefined method `received!' for [#<Order id: 6, status: "done", customer_id: 1, final_price: 0.0>]:Array):
/Users/artemkuvychka/Documents/Work/assesment/cofee-shop/app/jobs/send_order_ready_notification_job.rb:9:in `perform'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activejob-7.0.4/lib/active_job/execution.rb:59:in `block in _perform_job'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activesupport-7.0.4/lib/active_support/callbacks.rb:118:in `block in run_callbacks'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/i18n-1.12.0/lib/i18n.rb:322:in `with_locale'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activejob-7.0.4/lib/active_job/translation.rb:9:in `block (2 levels) in <module:Translation>'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activesupport-7.0.4/lib/active_support/callbacks.rb:127:in `instance_exec'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activesupport-7.0.4/lib/active_support/callbacks.rb:127:in `block in run_callbacks'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activesupport-7.0.4/lib/active_support/core_ext/time/zones.rb:66:in `use_zone'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activejob-7.0.4/lib/active_job/timezones.rb:9:in `block (2 levels) in <module:Timezones>'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activesupport-7.0.4/lib/active_support/callbacks.rb:127:in `instance_exec'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activesupport-7.0.4/lib/active_support/callbacks.rb:127:in `block in run_callbacks'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activesupport-7.0.4/lib/active_support/callbacks.rb:138:in `run_callbacks'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activejob-7.0.4/lib/active_job/execution.rb:58:in `_perform_job'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activejob-7.0.4/lib/active_job/instrumentation.rb:20:in `_perform_job'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activejob-7.0.4/lib/active_job/execution.rb:46:in `perform_now'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activejob-7.0.4/lib/active_job/instrumentation.rb:14:in `block in perform_now'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activejob-7.0.4/lib/active_job/instrumentation.rb:25:in `block in instrument'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activesupport-7.0.4/lib/active_support/notifications.rb:206:in `block in instrument'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activesupport-7.0.4/lib/active_support/notifications/instrumenter.rb:24:in `instrument'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activesupport-7.0.4/lib/active_support/notifications.rb:206:in `instrument'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activejob-7.0.4/lib/active_job/instrumentation.rb:35:in `instrument'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activejob-7.0.4/lib/active_job/instrumentation.rb:14:in `perform_now'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activejob-7.0.4/lib/active_job/logging.rb:18:in `block in perform_now'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activesupport-7.0.4/lib/active_support/tagged_logging.rb:99:in `block in tagged'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activesupport-7.0.4/lib/active_support/tagged_logging.rb:37:in `tagged'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activesupport-7.0.4/lib/active_support/tagged_logging.rb:99:in `tagged'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activejob-7.0.4/lib/active_job/logging.rb:25:in `tag_logger'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activejob-7.0.4/lib/active_job/logging.rb:18:in `perform_now'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activejob-7.0.4/lib/active_job/execution.rb:24:in `block in execute'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activesupport-7.0.4/lib/active_support/callbacks.rb:118:in `block in run_callbacks'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activejob-7.0.4/lib/active_job/railtie.rb:54:in `block (4 levels) in <class:Railtie>'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activesupport-7.0.4/lib/active_support/execution_wrapper.rb:92:in `wrap'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activesupport-7.0.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activesupport-7.0.4/lib/active_support/execution_wrapper.rb:92:in `wrap'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activesupport-7.0.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activejob-7.0.4/lib/active_job/railtie.rb:53:in `block (3 levels) in <class:Railtie>'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activesupport-7.0.4/lib/active_support/callbacks.rb:127:in `instance_exec'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activesupport-7.0.4/lib/active_support/callbacks.rb:127:in `block in run_callbacks'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activesupport-7.0.4/lib/active_support/callbacks.rb:138:in `run_callbacks'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activejob-7.0.4/lib/active_job/execution.rb:22:in `execute'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activejob-7.0.4/lib/active_job/queue_adapters/async_adapter.rb:70:in `perform'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/concurrent-ruby-1.1.10/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:352:in `run_task'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/concurrent-ruby-1.1.10/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:343:in `block (3 levels) in create_worker'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/concurrent-ruby-1.1.10/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:334:in `loop'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/concurrent-ruby-1.1.10/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:334:in `block (2 levels) in create_worker'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/concurrent-ruby-1.1.10/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:333:in `catch'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/concurrent-ruby-1.1.10/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:333:in `block in create_worker'
[ActiveJob] Enqueued SendOrderReadyNotificationJob (Job ID: 973bb37e-e523-4bb4-b2a2-bfd794f911f6) to Async(default) with arguments: 6
[ActiveJob] [SendOrderReadyNotificationJob] [973bb37e-e523-4bb4-b2a2-bfd794f911f6] Performing SendOrderReadyNotificationJob (Job ID: 973bb37e-e523-4bb4-b2a2-bfd794f911f6) from Async(default) enqueued at 2022-10-23T03:59:18Z with arguments: 6
[ActiveJob] [SendOrderReadyNotificationJob] [973bb37e-e523-4bb4-b2a2-bfd794f911f6]   [1m[36mOrder Load (0.6ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
[ActiveJob] [SendOrderReadyNotificationJob] [973bb37e-e523-4bb4-b2a2-bfd794f911f6] Error performing SendOrderReadyNotificationJob (Job ID: 973bb37e-e523-4bb4-b2a2-bfd794f911f6) from Async(default) in 18.71ms: NoMethodError (undefined method `first' for #<Order id: 6, status: "done", customer_id: 1, final_price: 0.0>):
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activemodel-7.0.4/lib/active_model/attribute_methods.rb:458:in `method_missing'
/Users/artemkuvychka/Documents/Work/assesment/cofee-shop/app/jobs/send_order_ready_notification_job.rb:8:in `perform'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activejob-7.0.4/lib/active_job/execution.rb:59:in `block in _perform_job'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activesupport-7.0.4/lib/active_support/callbacks.rb:118:in `block in run_callbacks'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/i18n-1.12.0/lib/i18n.rb:322:in `with_locale'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activejob-7.0.4/lib/active_job/translation.rb:9:in `block (2 levels) in <module:Translation>'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activesupport-7.0.4/lib/active_support/callbacks.rb:127:in `instance_exec'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activesupport-7.0.4/lib/active_support/callbacks.rb:127:in `block in run_callbacks'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activesupport-7.0.4/lib/active_support/core_ext/time/zones.rb:66:in `use_zone'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activejob-7.0.4/lib/active_job/timezones.rb:9:in `block (2 levels) in <module:Timezones>'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activesupport-7.0.4/lib/active_support/callbacks.rb:127:in `instance_exec'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activesupport-7.0.4/lib/active_support/callbacks.rb:127:in `block in run_callbacks'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activesupport-7.0.4/lib/active_support/callbacks.rb:138:in `run_callbacks'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activejob-7.0.4/lib/active_job/execution.rb:58:in `_perform_job'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activejob-7.0.4/lib/active_job/instrumentation.rb:20:in `_perform_job'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activejob-7.0.4/lib/active_job/execution.rb:46:in `perform_now'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activejob-7.0.4/lib/active_job/instrumentation.rb:14:in `block in perform_now'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activejob-7.0.4/lib/active_job/instrumentation.rb:25:in `block in instrument'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activesupport-7.0.4/lib/active_support/notifications.rb:206:in `block in instrument'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activesupport-7.0.4/lib/active_support/notifications/instrumenter.rb:24:in `instrument'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activesupport-7.0.4/lib/active_support/notifications.rb:206:in `instrument'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activejob-7.0.4/lib/active_job/instrumentation.rb:35:in `instrument'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activejob-7.0.4/lib/active_job/instrumentation.rb:14:in `perform_now'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activejob-7.0.4/lib/active_job/logging.rb:18:in `block in perform_now'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activesupport-7.0.4/lib/active_support/tagged_logging.rb:99:in `block in tagged'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activesupport-7.0.4/lib/active_support/tagged_logging.rb:37:in `tagged'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activesupport-7.0.4/lib/active_support/tagged_logging.rb:99:in `tagged'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activejob-7.0.4/lib/active_job/logging.rb:25:in `tag_logger'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activejob-7.0.4/lib/active_job/logging.rb:18:in `perform_now'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activejob-7.0.4/lib/active_job/execution.rb:24:in `block in execute'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activesupport-7.0.4/lib/active_support/callbacks.rb:118:in `block in run_callbacks'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activejob-7.0.4/lib/active_job/railtie.rb:54:in `block (4 levels) in <class:Railtie>'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activesupport-7.0.4/lib/active_support/execution_wrapper.rb:92:in `wrap'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activesupport-7.0.4/lib/active_support/reloader.rb:72:in `block in wrap'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activesupport-7.0.4/lib/active_support/execution_wrapper.rb:92:in `wrap'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activesupport-7.0.4/lib/active_support/reloader.rb:71:in `wrap'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activejob-7.0.4/lib/active_job/railtie.rb:53:in `block (3 levels) in <class:Railtie>'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activesupport-7.0.4/lib/active_support/callbacks.rb:127:in `instance_exec'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activesupport-7.0.4/lib/active_support/callbacks.rb:127:in `block in run_callbacks'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activesupport-7.0.4/lib/active_support/callbacks.rb:138:in `run_callbacks'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activejob-7.0.4/lib/active_job/execution.rb:22:in `execute'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/activejob-7.0.4/lib/active_job/queue_adapters/async_adapter.rb:70:in `perform'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/concurrent-ruby-1.1.10/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:352:in `run_task'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/concurrent-ruby-1.1.10/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:343:in `block (3 levels) in create_worker'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/concurrent-ruby-1.1.10/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:334:in `loop'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/concurrent-ruby-1.1.10/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:334:in `block (2 levels) in create_worker'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/concurrent-ruby-1.1.10/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:333:in `catch'
/Users/artemkuvychka/.rvm/gems/ruby-3.0.0/gems/concurrent-ruby-1.1.10/lib/concurrent-ruby/concurrent/executor/ruby_thread_pool_executor.rb:333:in `block in create_worker'
[ActiveJob] Enqueued SendOrderReadyNotificationJob (Job ID: 93f414e0-f557-444e-afd8-400d4d1c6069) to Async(default) with arguments: 6
[ActiveJob] [SendOrderReadyNotificationJob] [93f414e0-f557-444e-afd8-400d4d1c6069] Performing SendOrderReadyNotificationJob (Job ID: 93f414e0-f557-444e-afd8-400d4d1c6069) from Async(default) enqueued at 2022-10-23T03:59:29Z with arguments: 6
[ActiveJob] [SendOrderReadyNotificationJob] [93f414e0-f557-444e-afd8-400d4d1c6069]   [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT ?[0m  [["id", 6], ["LIMIT", 1]]
[ActiveJob] [SendOrderReadyNotificationJob] [93f414e0-f557-444e-afd8-400d4d1c6069]   [1m[36mTRANSACTION (0.1ms)[0m  [1m[36mbegin transaction[0m
[ActiveJob] [SendOrderReadyNotificationJob] [93f414e0-f557-444e-afd8-400d4d1c6069]   [1m[36mCustomer Load (0.1ms)[0m  [1m[34mSELECT "customers".* FROM "customers" WHERE "customers"."id" = ? LIMIT ?[0m  [["id", 1], ["LIMIT", 1]]
[ActiveJob] [SendOrderReadyNotificationJob] [93f414e0-f557-444e-afd8-400d4d1c6069]   [1m[36mOrder Update (0.5ms)[0m  [1m[33mUPDATE "orders" SET "status" = ? WHERE "orders"."id" = ?[0m  [["status", 4], ["id", 6]]
[ActiveJob] [SendOrderReadyNotificationJob] [93f414e0-f557-444e-afd8-400d4d1c6069]   [1m[36mTRANSACTION (1.3ms)[0m  [1m[36mcommit transaction[0m
[ActiveJob] [SendOrderReadyNotificationJob] [93f414e0-f557-444e-afd8-400d4d1c6069] Performed SendOrderReadyNotificationJob (Job ID: 93f414e0-f557-444e-afd8-400d4d1c6069) from Async(default) in 62.92ms
  [1m[36mOrder Load (0.7ms)[0m  [1m[34mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT ?[0m  [["LIMIT", 1]]
